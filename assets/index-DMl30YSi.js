import{j as l,G as Tc,M as zc,a as ji,P as Ni,b as Sg,U as ki,A as hs,S as Si,F as _g,I as Eg,C as it,c as _i,d as Ei,L as An,e as Tn,f as ka,g as zn,X as pt,T as Dg,D as ko,h as dd,i as So,k as cr,l as md,H as Cg,m as Mg,n as _l,o as Ag,p as gd,R as Tg,q as It,r as zg,s as _o,t as Rg,Z as qg,u as Og,v as Ug,w as hn,x as Rc,y as fd,z as Bg,B as Lg,E as Hg,J as Gg,K as $g,N as Yg,O as zr,Q as Rr,V as Vg,W as Qg,Y as Xg}from"../js/chunk-DLwJ-37y.js";import{r as S,a as Zg,b as Kg,R as hd}from"../js/chunk-Dl5HGnLU.js";import{c as Jg,_ as qr}from"../js/chunk-CK0Cv5B2.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function a(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=a(n);fetch(n.href,r)}})();var xd={exports:{}},ur={},bd={exports:{}},yd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(U,K){var N=U.length;U.push(K);e:for(;0<N;){var A=N-1>>>1,x=U[A];if(0<n(x,K))U[A]=K,U[N]=x,N=A;else break e}}function a(U){return U.length===0?null:U[0]}function s(U){if(U.length===0)return null;var K=U[0],N=U.pop();if(N!==K){U[0]=N;e:for(var A=0,x=U.length,j=x>>>1;A<j;){var E=2*(A+1)-1,_=U[E],w=E+1,v=U[w];if(0>n(_,N))w<x&&0>n(v,_)?(U[A]=v,U[w]=N,A=w):(U[A]=_,U[E]=N,A=E);else if(w<x&&0>n(v,N))U[A]=v,U[w]=N,A=w;else break e}}return K}function n(U,K){var N=U.sortIndex-K.sortIndex;return N!==0?N:U.id-K.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;e.unstable_now=function(){return r.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var c=[],g=[],f=1,h=null,m=3,d=!1,p=!1,D=!1,T=!1,b=typeof setTimeout=="function"?setTimeout:null,u=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;function k(U){for(var K=a(g);K!==null;){if(K.callback===null)s(g);else if(K.startTime<=U)s(g),K.sortIndex=K.expirationTime,t(c,K);else break;K=a(g)}}function M(U){if(D=!1,k(U),!p)if(a(c)!==null)p=!0,L||(L=!0,X());else{var K=a(g);K!==null&&W(M,K.startTime-U)}}var L=!1,z=-1,G=5,V=-1;function $(){return T?!0:!(e.unstable_now()-V<G)}function te(){if(T=!1,L){var U=e.unstable_now();V=U;var K=!0;try{e:{p=!1,D&&(D=!1,u(z),z=-1),d=!0;var N=m;try{t:{for(k(U),h=a(c);h!==null&&!(h.expirationTime>U&&$());){var A=h.callback;if(typeof A=="function"){h.callback=null,m=h.priorityLevel;var x=A(h.expirationTime<=U);if(U=e.unstable_now(),typeof x=="function"){h.callback=x,k(U),K=!0;break t}h===a(c)&&s(c),k(U)}else s(c);h=a(c)}if(h!==null)K=!0;else{var j=a(g);j!==null&&W(M,j.startTime-U),K=!1}}break e}finally{h=null,m=N,d=!1}K=void 0}}finally{K?X():L=!1}}}var X;if(typeof y=="function")X=function(){y(te)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,Y=Q.port2;Q.port1.onmessage=te,X=function(){Y.postMessage(null)}}else X=function(){b(te,0)};function W(U,K){z=b(function(){U(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(U){switch(m){case 1:case 2:case 3:var K=3;break;default:K=m}var N=m;m=K;try{return U()}finally{m=N}},e.unstable_requestPaint=function(){T=!0},e.unstable_runWithPriority=function(U,K){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var N=m;m=U;try{return K()}finally{m=N}},e.unstable_scheduleCallback=function(U,K,N){var A=e.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?A+N:A):N=A,U){case 1:var x=-1;break;case 2:x=250;break;case 5:x=1073741823;break;case 4:x=1e4;break;default:x=5e3}return x=N+x,U={id:f++,callback:K,priorityLevel:U,startTime:N,expirationTime:x,sortIndex:-1},N>A?(U.sortIndex=N,t(g,U),a(c)===null&&U===a(g)&&(D?(u(z),z=-1):D=!0,W(M,N-A))):(U.sortIndex=x,t(c,U),p||d||(p=!0,L||(L=!0,X()))),U},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(U){var K=m;return function(){var N=m;m=K;try{return U.apply(this,arguments)}finally{m=N}}}})(yd);bd.exports=yd;var Fg=bd.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qe=Fg,pd=S,Ig=Zg;function O(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function vd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Gl(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function wd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function jd(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function qc(e){if(Gl(e)!==e)throw Error(O(188))}function Wg(e){var t=e.alternate;if(!t){if(t=Gl(e),t===null)throw Error(O(188));return t!==e?null:e}for(var a=e,s=t;;){var n=a.return;if(n===null)break;var r=n.alternate;if(r===null){if(s=n.return,s!==null){a=s;continue}break}if(n.child===r.child){for(r=n.child;r;){if(r===a)return qc(n),e;if(r===s)return qc(n),t;r=r.sibling}throw Error(O(188))}if(a.return!==s.return)a=n,s=r;else{for(var i=!1,o=n.child;o;){if(o===a){i=!0,a=n,s=r;break}if(o===s){i=!0,s=n,a=r;break}o=o.sibling}if(!i){for(o=r.child;o;){if(o===a){i=!0,a=r,s=n;break}if(o===s){i=!0,s=r,a=n;break}o=o.sibling}if(!i)throw Error(O(189))}}if(a.alternate!==s)throw Error(O(190))}if(a.tag!==3)throw Error(O(188));return a.stateNode.current===a?e:t}function Nd(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=Nd(e),t!==null)return t;e=e.sibling}return null}var Me=Object.assign,Pg=Symbol.for("react.element"),Pl=Symbol.for("react.transitional.element"),il=Symbol.for("react.portal"),xs=Symbol.for("react.fragment"),kd=Symbol.for("react.strict_mode"),Di=Symbol.for("react.profiler"),Sd=Symbol.for("react.consumer"),ea=Symbol.for("react.context"),Eo=Symbol.for("react.forward_ref"),Ci=Symbol.for("react.suspense"),Mi=Symbol.for("react.suspense_list"),Do=Symbol.for("react.memo"),ma=Symbol.for("react.lazy"),Ai=Symbol.for("react.activity"),ef=Symbol.for("react.memo_cache_sentinel"),Oc=Symbol.iterator;function el(e){return e===null||typeof e!="object"?null:(e=Oc&&e[Oc]||e["@@iterator"],typeof e=="function"?e:null)}var tf=Symbol.for("react.client.reference");function Ti(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===tf?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case xs:return"Fragment";case Di:return"Profiler";case kd:return"StrictMode";case Ci:return"Suspense";case Mi:return"SuspenseList";case Ai:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case il:return"Portal";case ea:return e.displayName||"Context";case Sd:return(e._context.displayName||"Context")+".Consumer";case Eo:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Do:return t=e.displayName||null,t!==null?t:Ti(e.type)||"Memo";case ma:t=e._payload,e=e._init;try{return Ti(e(t))}catch{}}return null}var ol=Array.isArray,le=pd.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe=Ig.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Za={pending:!1,data:null,method:null,action:null},zi=[],bs=-1;function Gt(e){return{current:e}}function Je(e){0>bs||(e.current=zi[bs],zi[bs]=null,bs--)}function Ee(e,t){bs++,zi[bs]=e.current,e.current=t}var Ht=Gt(null),El=Gt(null),Sa=Gt(null),Rn=Gt(null);function qn(e,t){switch(Ee(Sa,t),Ee(El,e),Ee(Ht,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?$u(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=$u(t),e=Q0(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Je(Ht),Ee(Ht,e)}function Os(){Je(Ht),Je(El),Je(Sa)}function Ri(e){e.memoizedState!==null&&Ee(Rn,e);var t=Ht.current,a=Q0(t,e.type);t!==a&&(Ee(El,e),Ee(Ht,a))}function On(e){El.current===e&&(Je(Ht),Je(El)),Rn.current===e&&(Je(Rn),Bl._currentValue=Za)}var Or,Uc;function Ya(e){if(Or===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Or=t&&t[1]||"",Uc=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Or+e+Uc}var Ur=!1;function Br(e,t){if(!e||Ur)return"";Ur=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var h=function(){throw Error()};if(Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(d){var m=d}Reflect.construct(e,[],h)}else{try{h.call()}catch(d){m=d}e.call(h.prototype)}}else{try{throw Error()}catch(d){m=d}(h=e())&&typeof h.catch=="function"&&h.catch(function(){})}}catch(d){if(d&&m&&typeof d.stack=="string")return[d.stack,m.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var n=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");n&&n.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=s.DetermineComponentFrameRoot(),i=r[0],o=r[1];if(i&&o){var c=i.split(`
`),g=o.split(`
`);for(n=s=0;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;for(;n<g.length&&!g[n].includes("DetermineComponentFrameRoot");)n++;if(s===c.length||n===g.length)for(s=c.length-1,n=g.length-1;1<=s&&0<=n&&c[s]!==g[n];)n--;for(;1<=s&&0<=n;s--,n--)if(c[s]!==g[n]){if(s!==1||n!==1)do if(s--,n--,0>n||c[s]!==g[n]){var f=`
`+c[s].replace(" at new "," at ");return e.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",e.displayName)),f}while(1<=s&&0<=n);break}}}finally{Ur=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ya(a):""}function af(e,t){switch(e.tag){case 26:case 27:case 5:return Ya(e.type);case 16:return Ya("Lazy");case 13:return e.child!==t&&t!==null?Ya("Suspense Fallback"):Ya("Suspense");case 19:return Ya("SuspenseList");case 0:case 15:return Br(e.type,!1);case 11:return Br(e.type.render,!1);case 1:return Br(e.type,!0);case 31:return Ya("Activity");default:return""}}function Bc(e){try{var t="",a=null;do t+=af(e,a),a=e,e=e.return;while(e);return t}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var qi=Object.prototype.hasOwnProperty,Co=Qe.unstable_scheduleCallback,Lr=Qe.unstable_cancelCallback,sf=Qe.unstable_shouldYield,lf=Qe.unstable_requestPaint,ht=Qe.unstable_now,nf=Qe.unstable_getCurrentPriorityLevel,_d=Qe.unstable_ImmediatePriority,Ed=Qe.unstable_UserBlockingPriority,Un=Qe.unstable_NormalPriority,rf=Qe.unstable_LowPriority,Dd=Qe.unstable_IdlePriority,of=Qe.log,cf=Qe.unstable_setDisableYieldValue,$l=null,xt=null;function pa(e){if(typeof of=="function"&&cf(e),xt&&typeof xt.setStrictMode=="function")try{xt.setStrictMode($l,e)}catch{}}var bt=Math.clz32?Math.clz32:mf,uf=Math.log,df=Math.LN2;function mf(e){return e>>>=0,e===0?32:31-(uf(e)/df|0)|0}var en=256,tn=262144,an=4194304;function Va(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function dr(e,t,a){var s=e.pendingLanes;if(s===0)return 0;var n=0,r=e.suspendedLanes,i=e.pingedLanes;e=e.warmLanes;var o=s&134217727;return o!==0?(s=o&~r,s!==0?n=Va(s):(i&=o,i!==0?n=Va(i):a||(a=o&~e,a!==0&&(n=Va(a))))):(o=s&~r,o!==0?n=Va(o):i!==0?n=Va(i):a||(a=s&~e,a!==0&&(n=Va(a)))),n===0?0:t!==0&&t!==n&&!(t&r)&&(r=n&-n,a=t&-t,r>=a||r===32&&(a&4194048)!==0)?t:n}function Yl(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function gf(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cd(){var e=an;return an<<=1,!(an&62914560)&&(an=4194304),e}function Hr(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Vl(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ff(e,t,a,s,n,r){var i=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var o=e.entanglements,c=e.expirationTimes,g=e.hiddenUpdates;for(a=i&~a;0<a;){var f=31-bt(a),h=1<<f;o[f]=0,c[f]=-1;var m=g[f];if(m!==null)for(g[f]=null,f=0;f<m.length;f++){var d=m[f];d!==null&&(d.lane&=-536870913)}a&=~h}s!==0&&Md(e,s,0),r!==0&&n===0&&e.tag!==0&&(e.suspendedLanes|=r&~(i&~t))}function Md(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-bt(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|a&261930}function Ad(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var s=31-bt(a),n=1<<s;n&t|e[s]&t&&(e[s]|=t),a&=~n}}function Td(e,t){var a=t&-t;return a=a&42?1:Mo(a),a&(e.suspendedLanes|t)?0:a}function Mo(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ao(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function zd(){var e=pe.p;return e!==0?e:(e=window.event,e===void 0?32:ag(e.type))}function Lc(e,t){var a=pe.p;try{return pe.p=e,t()}finally{pe.p=a}}var Ba=Math.random().toString(36).slice(2),Ie="__reactFiber$"+Ba,ct="__reactProps$"+Ba,Zs="__reactContainer$"+Ba,Oi="__reactEvents$"+Ba,hf="__reactListeners$"+Ba,xf="__reactHandles$"+Ba,Hc="__reactResources$"+Ba,Ql="__reactMarker$"+Ba;function To(e){delete e[Ie],delete e[ct],delete e[Oi],delete e[hf],delete e[xf]}function ys(e){var t=e[Ie];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Zs]||a[Ie]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=Zu(e);e!==null;){if(a=e[Ie])return a;e=Zu(e)}return t}e=a,a=e.parentNode}return null}function Ks(e){if(e=e[Ie]||e[Zs]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function cl(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(O(33))}function Cs(e){var t=e[Hc];return t||(t=e[Hc]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ke(e){e[Ql]=!0}var Rd=new Set,qd={};function ss(e,t){Us(e,t),Us(e+"Capture",t)}function Us(e,t){for(qd[e]=t,e=0;e<t.length;e++)Rd.add(t[e])}var bf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Gc={},$c={};function yf(e){return qi.call($c,e)?!0:qi.call(Gc,e)?!1:bf.test(e)?$c[e]=!0:(Gc[e]=!0,!1)}function xn(e,t,a){if(yf(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function sn(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function Qt(e,t,a,s){if(s===null)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+s)}}function kt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Od(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function pf(e,t,a){var s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var n=s.get,r=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(i){a=""+i,r.call(this,i)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(i){a=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ui(e){if(!e._valueTracker){var t=Od(e)?"checked":"value";e._valueTracker=pf(e,t,""+e[t])}}function Ud(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),s="";return e&&(s=Od(e)?e.checked?"true":"false":e.value),e=s,e!==a?(t.setValue(e),!0):!1}function Bn(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var vf=/[\n"\\]/g;function Et(e){return e.replace(vf,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Bi(e,t,a,s,n,r,i,o){e.name="",i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"?e.type=i:e.removeAttribute("type"),t!=null?i==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+kt(t)):e.value!==""+kt(t)&&(e.value=""+kt(t)):i!=="submit"&&i!=="reset"||e.removeAttribute("value"),t!=null?Li(e,i,kt(t)):a!=null?Li(e,i,kt(a)):s!=null&&e.removeAttribute("value"),n==null&&r!=null&&(e.defaultChecked=!!r),n!=null&&(e.checked=n&&typeof n!="function"&&typeof n!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?e.name=""+kt(o):e.removeAttribute("name")}function Bd(e,t,a,s,n,r,i,o){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.type=r),t!=null||a!=null){if(!(r!=="submit"&&r!=="reset"||t!=null)){Ui(e);return}a=a!=null?""+kt(a):"",t=t!=null?""+kt(t):a,o||t===e.value||(e.value=t),e.defaultValue=t}s=s??n,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=o?e.checked:!!s,e.defaultChecked=!!s,i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(e.name=i),Ui(e)}function Li(e,t,a){t==="number"&&Bn(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Ms(e,t,a,s){if(e=e.options,t){t={};for(var n=0;n<a.length;n++)t["$"+a[n]]=!0;for(a=0;a<e.length;a++)n=t.hasOwnProperty("$"+e[a].value),e[a].selected!==n&&(e[a].selected=n),n&&s&&(e[a].defaultSelected=!0)}else{for(a=""+kt(a),t=null,n=0;n<e.length;n++){if(e[n].value===a){e[n].selected=!0,s&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function Ld(e,t,a){if(t!=null&&(t=""+kt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+kt(a):""}function Hd(e,t,a,s){if(t==null){if(s!=null){if(a!=null)throw Error(O(92));if(ol(s)){if(1<s.length)throw Error(O(93));s=s[0]}a=s}a==null&&(a=""),t=a}a=kt(t),e.defaultValue=a,s=e.textContent,s===a&&s!==""&&s!==null&&(e.value=s),Ui(e)}function Bs(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var wf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yc(e,t,a){var s=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,a):typeof a!="number"||a===0||wf.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function Gd(e,t,a){if(t!=null&&typeof t!="object")throw Error(O(62));if(e=e.style,a!=null){for(var s in a)!a.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var n in t)s=t[n],t.hasOwnProperty(n)&&a[n]!==s&&Yc(e,n,s)}else for(var r in t)t.hasOwnProperty(r)&&Yc(e,r,t[r])}function zo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Nf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function bn(e){return Nf.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ta(){}var Hi=null;function Ro(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ps=null,As=null;function Vc(e){var t=Ks(e);if(t&&(e=t.stateNode)){var a=e[ct]||null;e:switch(e=t.stateNode,t.type){case"input":if(Bi(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Et(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var s=a[t];if(s!==e&&s.form===e.form){var n=s[ct]||null;if(!n)throw Error(O(90));Bi(s,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name)}}for(t=0;t<a.length;t++)s=a[t],s.form===e.form&&Ud(s)}break e;case"textarea":Ld(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&Ms(e,!!a.multiple,t,!1)}}}var Gr=!1;function $d(e,t,a){if(Gr)return e(t,a);Gr=!0;try{var s=e(t);return s}finally{if(Gr=!1,(ps!==null||As!==null)&&(Nr(),ps&&(t=ps,e=As,As=ps=null,Vc(t),e)))for(t=0;t<e.length;t++)Vc(e[t])}}function Dl(e,t){var a=e.stateNode;if(a===null)return null;var s=a[ct]||null;if(s===null)return null;a=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(O(231,t,typeof a));return a}var ra=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gi=!1;if(ra)try{var tl={};Object.defineProperty(tl,"passive",{get:function(){Gi=!0}}),window.addEventListener("test",tl,tl),window.removeEventListener("test",tl,tl)}catch{Gi=!1}var va=null,qo=null,yn=null;function Yd(){if(yn)return yn;var e,t=qo,a=t.length,s,n="value"in va?va.value:va.textContent,r=n.length;for(e=0;e<a&&t[e]===n[e];e++);var i=a-e;for(s=1;s<=i&&t[a-s]===n[r-s];s++);return yn=n.slice(e,1<s?1-s:void 0)}function pn(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ln(){return!0}function Qc(){return!1}function ut(e){function t(a,s,n,r,i){this._reactName=a,this._targetInst=n,this.type=s,this.nativeEvent=r,this.target=i,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(a=e[o],this[o]=a?a(r):r[o]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?ln:Qc,this.isPropagationStopped=Qc,this}return Me(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ln)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ln)},persist:function(){},isPersistent:ln}),t}var ls={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mr=ut(ls),Xl=Me({},ls,{view:0,detail:0}),kf=ut(Xl),$r,Yr,al,gr=Me({},Xl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==al&&(al&&e.type==="mousemove"?($r=e.screenX-al.screenX,Yr=e.screenY-al.screenY):Yr=$r=0,al=e),$r)},movementY:function(e){return"movementY"in e?e.movementY:Yr}}),Xc=ut(gr),Sf=Me({},gr,{dataTransfer:0}),_f=ut(Sf),Ef=Me({},Xl,{relatedTarget:0}),Vr=ut(Ef),Df=Me({},ls,{animationName:0,elapsedTime:0,pseudoElement:0}),Cf=ut(Df),Mf=Me({},ls,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Af=ut(Mf),Tf=Me({},ls,{data:0}),Zc=ut(Tf),zf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Of(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=qf[e])?!!t[e]:!1}function Oo(){return Of}var Uf=Me({},Xl,{key:function(e){if(e.key){var t=zf[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=pn(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Rf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oo,charCode:function(e){return e.type==="keypress"?pn(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?pn(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Bf=ut(Uf),Lf=Me({},gr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kc=ut(Lf),Hf=Me({},Xl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oo}),Gf=ut(Hf),$f=Me({},ls,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yf=ut($f),Vf=Me({},gr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Qf=ut(Vf),Xf=Me({},ls,{newState:0,oldState:0}),Zf=ut(Xf),Kf=[9,13,27,32],Uo=ra&&"CompositionEvent"in window,ml=null;ra&&"documentMode"in document&&(ml=document.documentMode);var Jf=ra&&"TextEvent"in window&&!ml,Vd=ra&&(!Uo||ml&&8<ml&&11>=ml),Jc=" ",Fc=!1;function Qd(e,t){switch(e){case"keyup":return Kf.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var vs=!1;function Ff(e,t){switch(e){case"compositionend":return Xd(t);case"keypress":return t.which!==32?null:(Fc=!0,Jc);case"textInput":return e=t.data,e===Jc&&Fc?null:e;default:return null}}function If(e,t){if(vs)return e==="compositionend"||!Uo&&Qd(e,t)?(e=Yd(),yn=qo=va=null,vs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vd&&t.locale!=="ko"?null:t.data;default:return null}}var Wf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ic(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Wf[e.type]:t==="textarea"}function Zd(e,t,a,s){ps?As?As.push(s):As=[s]:ps=s,t=ar(t,"onChange"),0<t.length&&(a=new mr("onChange","change",null,a,s),e.push({event:a,listeners:t}))}var gl=null,Cl=null;function Pf(e){$0(e,0)}function fr(e){var t=cl(e);if(Ud(t))return e}function Wc(e,t){if(e==="change")return t}var Kd=!1;if(ra){var Qr;if(ra){var Xr="oninput"in document;if(!Xr){var Pc=document.createElement("div");Pc.setAttribute("oninput","return;"),Xr=typeof Pc.oninput=="function"}Qr=Xr}else Qr=!1;Kd=Qr&&(!document.documentMode||9<document.documentMode)}function eu(){gl&&(gl.detachEvent("onpropertychange",Jd),Cl=gl=null)}function Jd(e){if(e.propertyName==="value"&&fr(Cl)){var t=[];Zd(t,Cl,e,Ro(e)),$d(Pf,t)}}function eh(e,t,a){e==="focusin"?(eu(),gl=t,Cl=a,gl.attachEvent("onpropertychange",Jd)):e==="focusout"&&eu()}function th(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return fr(Cl)}function ah(e,t){if(e==="click")return fr(t)}function sh(e,t){if(e==="input"||e==="change")return fr(t)}function lh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vt=typeof Object.is=="function"?Object.is:lh;function Ml(e,t){if(vt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(s=0;s<a.length;s++){var n=a[s];if(!qi.call(t,n)||!vt(e[n],t[n]))return!1}return!0}function tu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function au(e,t){var a=tu(e);e=0;for(var s;a;){if(a.nodeType===3){if(s=e+a.textContent.length,e<=t&&s>=t)return{node:a,offset:t-e};e=s}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=tu(a)}}function Fd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Fd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Id(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Bn(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=Bn(e.document)}return t}function Bo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var nh=ra&&"documentMode"in document&&11>=document.documentMode,ws=null,$i=null,fl=null,Yi=!1;function su(e,t,a){var s=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Yi||ws==null||ws!==Bn(s)||(s=ws,"selectionStart"in s&&Bo(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),fl&&Ml(fl,s)||(fl=s,s=ar($i,"onSelect"),0<s.length&&(t=new mr("onSelect","select",null,t,a),e.push({event:t,listeners:s}),t.target=ws)))}function Ga(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var js={animationend:Ga("Animation","AnimationEnd"),animationiteration:Ga("Animation","AnimationIteration"),animationstart:Ga("Animation","AnimationStart"),transitionrun:Ga("Transition","TransitionRun"),transitionstart:Ga("Transition","TransitionStart"),transitioncancel:Ga("Transition","TransitionCancel"),transitionend:Ga("Transition","TransitionEnd")},Zr={},Wd={};ra&&(Wd=document.createElement("div").style,"AnimationEvent"in window||(delete js.animationend.animation,delete js.animationiteration.animation,delete js.animationstart.animation),"TransitionEvent"in window||delete js.transitionend.transition);function ns(e){if(Zr[e])return Zr[e];if(!js[e])return e;var t=js[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Wd)return Zr[e]=t[a];return e}var Pd=ns("animationend"),em=ns("animationiteration"),tm=ns("animationstart"),rh=ns("transitionrun"),ih=ns("transitionstart"),oh=ns("transitioncancel"),am=ns("transitionend"),sm=new Map,Vi="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vi.push("scrollEnd");function qt(e,t){sm.set(e,t),ss(t,[e])}var Ln=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Nt=[],Ns=0,Lo=0;function hr(){for(var e=Ns,t=Lo=Ns=0;t<e;){var a=Nt[t];Nt[t++]=null;var s=Nt[t];Nt[t++]=null;var n=Nt[t];Nt[t++]=null;var r=Nt[t];if(Nt[t++]=null,s!==null&&n!==null){var i=s.pending;i===null?n.next=n:(n.next=i.next,i.next=n),s.pending=n}r!==0&&lm(a,n,r)}}function xr(e,t,a,s){Nt[Ns++]=e,Nt[Ns++]=t,Nt[Ns++]=a,Nt[Ns++]=s,Lo|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function Ho(e,t,a,s){return xr(e,t,a,s),Hn(e)}function rs(e,t){return xr(e,null,null,t),Hn(e)}function lm(e,t,a){e.lanes|=a;var s=e.alternate;s!==null&&(s.lanes|=a);for(var n=!1,r=e.return;r!==null;)r.childLanes|=a,s=r.alternate,s!==null&&(s.childLanes|=a),r.tag===22&&(e=r.stateNode,e===null||e._visibility&1||(n=!0)),e=r,r=r.return;return e.tag===3?(r=e.stateNode,n&&t!==null&&(n=31-bt(a),e=r.hiddenUpdates,s=e[n],s===null?e[n]=[t]:s.push(t),t.lane=a|536870912),r):null}function Hn(e){if(50<Nl)throw Nl=0,mo=null,Error(O(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ks={};function ch(e,t,a,s){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gt(e,t,a,s){return new ch(e,t,a,s)}function Go(e){return e=e.prototype,!(!e||!e.isReactComponent)}function sa(e,t){var a=e.alternate;return a===null?(a=gt(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function nm(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function vn(e,t,a,s,n,r){var i=0;if(s=e,typeof e=="function")Go(e)&&(i=1);else if(typeof e=="string")i=fx(e,a,Ht.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Ai:return e=gt(31,a,t,n),e.elementType=Ai,e.lanes=r,e;case xs:return Ka(a.children,n,r,t);case kd:i=8,n|=24;break;case Di:return e=gt(12,a,t,n|2),e.elementType=Di,e.lanes=r,e;case Ci:return e=gt(13,a,t,n),e.elementType=Ci,e.lanes=r,e;case Mi:return e=gt(19,a,t,n),e.elementType=Mi,e.lanes=r,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ea:i=10;break e;case Sd:i=9;break e;case Eo:i=11;break e;case Do:i=14;break e;case ma:i=16,s=null;break e}i=29,a=Error(O(130,e===null?"null":typeof e,"")),s=null}return t=gt(i,a,t,n),t.elementType=e,t.type=s,t.lanes=r,t}function Ka(e,t,a,s){return e=gt(7,e,s,t),e.lanes=a,e}function Kr(e,t,a){return e=gt(6,e,null,t),e.lanes=a,e}function rm(e){var t=gt(18,null,null,0);return t.stateNode=e,t}function Jr(e,t,a){return t=gt(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var lu=new WeakMap;function Dt(e,t){if(typeof e=="object"&&e!==null){var a=lu.get(e);return a!==void 0?a:(t={value:e,source:t,stack:Bc(t)},lu.set(e,t),t)}return{value:e,source:t,stack:Bc(t)}}var Ss=[],_s=0,Gn=null,Al=0,St=[],_t=0,Ra=null,Ut=1,Bt="";function Wt(e,t){Ss[_s++]=Al,Ss[_s++]=Gn,Gn=e,Al=t}function im(e,t,a){St[_t++]=Ut,St[_t++]=Bt,St[_t++]=Ra,Ra=e;var s=Ut;e=Bt;var n=32-bt(s)-1;s&=~(1<<n),a+=1;var r=32-bt(t)+n;if(30<r){var i=n-n%5;r=(s&(1<<i)-1).toString(32),s>>=i,n-=i,Ut=1<<32-bt(t)+n|a<<n|s,Bt=r+e}else Ut=1<<r|a<<n|s,Bt=e}function $o(e){e.return!==null&&(Wt(e,1),im(e,1,0))}function Yo(e){for(;e===Gn;)Gn=Ss[--_s],Ss[_s]=null,Al=Ss[--_s],Ss[_s]=null;for(;e===Ra;)Ra=St[--_t],St[_t]=null,Bt=St[--_t],St[_t]=null,Ut=St[--_t],St[_t]=null}function om(e,t){St[_t++]=Ut,St[_t++]=Bt,St[_t++]=Ra,Ut=t.id,Bt=t.overflow,Ra=e}var We=null,Ce=null,xe=!1,_a=null,Ct=!1,Qi=Error(O(519));function qa(e){var t=Error(O(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Tl(Dt(t,e)),Qi}function nu(e){var t=e.stateNode,a=e.type,s=e.memoizedProps;switch(t[Ie]=e,t[ct]=s,a){case"dialog":me("cancel",t),me("close",t);break;case"iframe":case"object":case"embed":me("load",t);break;case"video":case"audio":for(a=0;a<Ol.length;a++)me(Ol[a],t);break;case"source":me("error",t);break;case"img":case"image":case"link":me("error",t),me("load",t);break;case"details":me("toggle",t);break;case"input":me("invalid",t),Bd(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":me("invalid",t);break;case"textarea":me("invalid",t),Hd(t,s.value,s.defaultValue,s.children)}a=s.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||s.suppressHydrationWarning===!0||V0(t.textContent,a)?(s.popover!=null&&(me("beforetoggle",t),me("toggle",t)),s.onScroll!=null&&me("scroll",t),s.onScrollEnd!=null&&me("scrollend",t),s.onClick!=null&&(t.onclick=ta),t=!0):t=!1,t||qa(e,!0)}function ru(e){for(We=e.return;We;)switch(We.tag){case 5:case 31:case 13:Ct=!1;return;case 27:case 3:Ct=!0;return;default:We=We.return}}function us(e){if(e!==We)return!1;if(!xe)return ru(e),xe=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||bo(e.type,e.memoizedProps)),a=!a),a&&Ce&&qa(e),ru(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(O(317));Ce=Xu(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(O(317));Ce=Xu(e)}else t===27?(t=Ce,La(e.type)?(e=wo,wo=null,Ce=e):Ce=t):Ce=We?At(e.stateNode.nextSibling):null;return!0}function Wa(){Ce=We=null,xe=!1}function Fr(){var e=_a;return e!==null&&(rt===null?rt=e:rt.push.apply(rt,e),_a=null),e}function Tl(e){_a===null?_a=[e]:_a.push(e)}var Xi=Gt(null),is=null,aa=null;function ha(e,t,a){Ee(Xi,t._currentValue),t._currentValue=a}function la(e){e._currentValue=Xi.current,Je(Xi)}function Zi(e,t,a){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===a)break;e=e.return}}function Ki(e,t,a,s){var n=e.child;for(n!==null&&(n.return=e);n!==null;){var r=n.dependencies;if(r!==null){var i=n.child;r=r.firstContext;e:for(;r!==null;){var o=r;r=n;for(var c=0;c<t.length;c++)if(o.context===t[c]){r.lanes|=a,o=r.alternate,o!==null&&(o.lanes|=a),Zi(r.return,a,e),s||(i=null);break e}r=o.next}}else if(n.tag===18){if(i=n.return,i===null)throw Error(O(341));i.lanes|=a,r=i.alternate,r!==null&&(r.lanes|=a),Zi(i,a,e),i=null}else i=n.child;if(i!==null)i.return=n;else for(i=n;i!==null;){if(i===e){i=null;break}if(n=i.sibling,n!==null){n.return=i.return,i=n;break}i=i.return}n=i}}function Js(e,t,a,s){e=null;for(var n=t,r=!1;n!==null;){if(!r){if(n.flags&524288)r=!0;else if(n.flags&262144)break}if(n.tag===10){var i=n.alternate;if(i===null)throw Error(O(387));if(i=i.memoizedProps,i!==null){var o=n.type;vt(n.pendingProps.value,i.value)||(e!==null?e.push(o):e=[o])}}else if(n===Rn.current){if(i=n.alternate,i===null)throw Error(O(387));i.memoizedState.memoizedState!==n.memoizedState.memoizedState&&(e!==null?e.push(Bl):e=[Bl])}n=n.return}e!==null&&Ki(t,e,a,s),t.flags|=262144}function $n(e){for(e=e.firstContext;e!==null;){if(!vt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Pa(e){is=e,aa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Pe(e){return cm(is,e)}function nn(e,t){return is===null&&Pa(e),cm(e,t)}function cm(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},aa===null){if(e===null)throw Error(O(308));aa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else aa=aa.next=t;return a}var uh=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},dh=Qe.unstable_scheduleCallback,mh=Qe.unstable_NormalPriority,He={$$typeof:ea,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vo(){return{controller:new uh,data:new Map,refCount:0}}function Zl(e){e.refCount--,e.refCount===0&&dh(mh,function(){e.controller.abort()})}var hl=null,Ji=0,Ls=0,Ts=null;function gh(e,t){if(hl===null){var a=hl=[];Ji=0,Ls=hc(),Ts={status:"pending",value:void 0,then:function(s){a.push(s)}}}return Ji++,t.then(iu,iu),t}function iu(){if(--Ji===0&&hl!==null){Ts!==null&&(Ts.status="fulfilled");var e=hl;hl=null,Ls=0,Ts=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function fh(e,t){var a=[],s={status:"pending",value:null,reason:null,then:function(n){a.push(n)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var n=0;n<a.length;n++)(0,a[n])(t)},function(n){for(s.status="rejected",s.reason=n,n=0;n<a.length;n++)(0,a[n])(void 0)}),s}var ou=le.S;le.S=function(e,t){N0=ht(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&gh(e,t),ou!==null&&ou(e,t)};var Ja=Gt(null);function Qo(){var e=Ja.current;return e!==null?e:_e.pooledCache}function wn(e,t){t===null?Ee(Ja,Ja.current):Ee(Ja,t.pool)}function um(){var e=Qo();return e===null?null:{parent:He._currentValue,pool:e}}var Fs=Error(O(460)),Xo=Error(O(474)),br=Error(O(542)),Yn={then:function(){}};function cu(e){return e=e.status,e==="fulfilled"||e==="rejected"}function dm(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(ta,ta),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,du(e),e;default:if(typeof t.status=="string")t.then(ta,ta);else{if(e=_e,e!==null&&100<e.shellSuspendCounter)throw Error(O(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var n=t;n.status="fulfilled",n.value=s}},function(s){if(t.status==="pending"){var n=t;n.status="rejected",n.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,du(e),e}throw Fa=t,Fs}}function Qa(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Fa=a,Fs):a}}var Fa=null;function uu(){if(Fa===null)throw Error(O(459));var e=Fa;return Fa=null,e}function du(e){if(e===Fs||e===br)throw Error(O(483))}var zs=null,zl=0;function rn(e){var t=zl;return zl+=1,zs===null&&(zs=[]),dm(zs,e,t)}function sl(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function on(e,t){throw t.$$typeof===Pg?Error(O(525)):(e=Object.prototype.toString.call(t),Error(O(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function mm(e){function t(b,u){if(e){var y=b.deletions;y===null?(b.deletions=[u],b.flags|=16):y.push(u)}}function a(b,u){if(!e)return null;for(;u!==null;)t(b,u),u=u.sibling;return null}function s(b){for(var u=new Map;b!==null;)b.key!==null?u.set(b.key,b):u.set(b.index,b),b=b.sibling;return u}function n(b,u){return b=sa(b,u),b.index=0,b.sibling=null,b}function r(b,u,y){return b.index=y,e?(y=b.alternate,y!==null?(y=y.index,y<u?(b.flags|=67108866,u):y):(b.flags|=67108866,u)):(b.flags|=1048576,u)}function i(b){return e&&b.alternate===null&&(b.flags|=67108866),b}function o(b,u,y,k){return u===null||u.tag!==6?(u=Kr(y,b.mode,k),u.return=b,u):(u=n(u,y),u.return=b,u)}function c(b,u,y,k){var M=y.type;return M===xs?f(b,u,y.props.children,k,y.key):u!==null&&(u.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===ma&&Qa(M)===u.type)?(u=n(u,y.props),sl(u,y),u.return=b,u):(u=vn(y.type,y.key,y.props,null,b.mode,k),sl(u,y),u.return=b,u)}function g(b,u,y,k){return u===null||u.tag!==4||u.stateNode.containerInfo!==y.containerInfo||u.stateNode.implementation!==y.implementation?(u=Jr(y,b.mode,k),u.return=b,u):(u=n(u,y.children||[]),u.return=b,u)}function f(b,u,y,k,M){return u===null||u.tag!==7?(u=Ka(y,b.mode,k,M),u.return=b,u):(u=n(u,y),u.return=b,u)}function h(b,u,y){if(typeof u=="string"&&u!==""||typeof u=="number"||typeof u=="bigint")return u=Kr(""+u,b.mode,y),u.return=b,u;if(typeof u=="object"&&u!==null){switch(u.$$typeof){case Pl:return y=vn(u.type,u.key,u.props,null,b.mode,y),sl(y,u),y.return=b,y;case il:return u=Jr(u,b.mode,y),u.return=b,u;case ma:return u=Qa(u),h(b,u,y)}if(ol(u)||el(u))return u=Ka(u,b.mode,y,null),u.return=b,u;if(typeof u.then=="function")return h(b,rn(u),y);if(u.$$typeof===ea)return h(b,nn(b,u),y);on(b,u)}return null}function m(b,u,y,k){var M=u!==null?u.key:null;if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return M!==null?null:o(b,u,""+y,k);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Pl:return y.key===M?c(b,u,y,k):null;case il:return y.key===M?g(b,u,y,k):null;case ma:return y=Qa(y),m(b,u,y,k)}if(ol(y)||el(y))return M!==null?null:f(b,u,y,k,null);if(typeof y.then=="function")return m(b,u,rn(y),k);if(y.$$typeof===ea)return m(b,u,nn(b,y),k);on(b,y)}return null}function d(b,u,y,k,M){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return b=b.get(y)||null,o(u,b,""+k,M);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Pl:return b=b.get(k.key===null?y:k.key)||null,c(u,b,k,M);case il:return b=b.get(k.key===null?y:k.key)||null,g(u,b,k,M);case ma:return k=Qa(k),d(b,u,y,k,M)}if(ol(k)||el(k))return b=b.get(y)||null,f(u,b,k,M,null);if(typeof k.then=="function")return d(b,u,y,rn(k),M);if(k.$$typeof===ea)return d(b,u,y,nn(u,k),M);on(u,k)}return null}function p(b,u,y,k){for(var M=null,L=null,z=u,G=u=0,V=null;z!==null&&G<y.length;G++){z.index>G?(V=z,z=null):V=z.sibling;var $=m(b,z,y[G],k);if($===null){z===null&&(z=V);break}e&&z&&$.alternate===null&&t(b,z),u=r($,u,G),L===null?M=$:L.sibling=$,L=$,z=V}if(G===y.length)return a(b,z),xe&&Wt(b,G),M;if(z===null){for(;G<y.length;G++)z=h(b,y[G],k),z!==null&&(u=r(z,u,G),L===null?M=z:L.sibling=z,L=z);return xe&&Wt(b,G),M}for(z=s(z);G<y.length;G++)V=d(z,b,G,y[G],k),V!==null&&(e&&V.alternate!==null&&z.delete(V.key===null?G:V.key),u=r(V,u,G),L===null?M=V:L.sibling=V,L=V);return e&&z.forEach(function(te){return t(b,te)}),xe&&Wt(b,G),M}function D(b,u,y,k){if(y==null)throw Error(O(151));for(var M=null,L=null,z=u,G=u=0,V=null,$=y.next();z!==null&&!$.done;G++,$=y.next()){z.index>G?(V=z,z=null):V=z.sibling;var te=m(b,z,$.value,k);if(te===null){z===null&&(z=V);break}e&&z&&te.alternate===null&&t(b,z),u=r(te,u,G),L===null?M=te:L.sibling=te,L=te,z=V}if($.done)return a(b,z),xe&&Wt(b,G),M;if(z===null){for(;!$.done;G++,$=y.next())$=h(b,$.value,k),$!==null&&(u=r($,u,G),L===null?M=$:L.sibling=$,L=$);return xe&&Wt(b,G),M}for(z=s(z);!$.done;G++,$=y.next())$=d(z,b,G,$.value,k),$!==null&&(e&&$.alternate!==null&&z.delete($.key===null?G:$.key),u=r($,u,G),L===null?M=$:L.sibling=$,L=$);return e&&z.forEach(function(X){return t(b,X)}),xe&&Wt(b,G),M}function T(b,u,y,k){if(typeof y=="object"&&y!==null&&y.type===xs&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Pl:e:{for(var M=y.key;u!==null;){if(u.key===M){if(M=y.type,M===xs){if(u.tag===7){a(b,u.sibling),k=n(u,y.props.children),k.return=b,b=k;break e}}else if(u.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===ma&&Qa(M)===u.type){a(b,u.sibling),k=n(u,y.props),sl(k,y),k.return=b,b=k;break e}a(b,u);break}else t(b,u);u=u.sibling}y.type===xs?(k=Ka(y.props.children,b.mode,k,y.key),k.return=b,b=k):(k=vn(y.type,y.key,y.props,null,b.mode,k),sl(k,y),k.return=b,b=k)}return i(b);case il:e:{for(M=y.key;u!==null;){if(u.key===M)if(u.tag===4&&u.stateNode.containerInfo===y.containerInfo&&u.stateNode.implementation===y.implementation){a(b,u.sibling),k=n(u,y.children||[]),k.return=b,b=k;break e}else{a(b,u);break}else t(b,u);u=u.sibling}k=Jr(y,b.mode,k),k.return=b,b=k}return i(b);case ma:return y=Qa(y),T(b,u,y,k)}if(ol(y))return p(b,u,y,k);if(el(y)){if(M=el(y),typeof M!="function")throw Error(O(150));return y=M.call(y),D(b,u,y,k)}if(typeof y.then=="function")return T(b,u,rn(y),k);if(y.$$typeof===ea)return T(b,u,nn(b,y),k);on(b,y)}return typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint"?(y=""+y,u!==null&&u.tag===6?(a(b,u.sibling),k=n(u,y),k.return=b,b=k):(a(b,u),k=Kr(y,b.mode,k),k.return=b,b=k),i(b)):a(b,u)}return function(b,u,y,k){try{zl=0;var M=T(b,u,y,k);return zs=null,M}catch(z){if(z===Fs||z===br)throw z;var L=gt(29,z,null,b.mode);return L.lanes=k,L.return=b,L}finally{}}}var es=mm(!0),gm=mm(!1),ga=!1;function Zo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ea(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Da(e,t,a){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,ye&2){var n=s.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),s.pending=t,t=Hn(e),lm(e,null,a),t}return xr(e,s,t,a),Hn(e)}function xl(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,Ad(e,a)}}function Ir(e,t){var a=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,a===s)){var n=null,r=null;if(a=a.firstBaseUpdate,a!==null){do{var i={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};r===null?n=r=i:r=r.next=i,a=a.next}while(a!==null);r===null?n=r=t:r=r.next=t}else n=r=t;a={baseState:s.baseState,firstBaseUpdate:n,lastBaseUpdate:r,shared:s.shared,callbacks:s.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var Ii=!1;function bl(){if(Ii){var e=Ts;if(e!==null)throw e}}function yl(e,t,a,s){Ii=!1;var n=e.updateQueue;ga=!1;var r=n.firstBaseUpdate,i=n.lastBaseUpdate,o=n.shared.pending;if(o!==null){n.shared.pending=null;var c=o,g=c.next;c.next=null,i===null?r=g:i.next=g,i=c;var f=e.alternate;f!==null&&(f=f.updateQueue,o=f.lastBaseUpdate,o!==i&&(o===null?f.firstBaseUpdate=g:o.next=g,f.lastBaseUpdate=c))}if(r!==null){var h=n.baseState;i=0,f=g=c=null,o=r;do{var m=o.lane&-536870913,d=m!==o.lane;if(d?(fe&m)===m:(s&m)===m){m!==0&&m===Ls&&(Ii=!0),f!==null&&(f=f.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var p=e,D=o;m=t;var T=a;switch(D.tag){case 1:if(p=D.payload,typeof p=="function"){h=p.call(T,h,m);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=D.payload,m=typeof p=="function"?p.call(T,h,m):p,m==null)break e;h=Me({},h,m);break e;case 2:ga=!0}}m=o.callback,m!==null&&(e.flags|=64,d&&(e.flags|=8192),d=n.callbacks,d===null?n.callbacks=[m]:d.push(m))}else d={lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},f===null?(g=f=d,c=h):f=f.next=d,i|=m;if(o=o.next,o===null){if(o=n.shared.pending,o===null)break;d=o,o=d.next,d.next=null,n.lastBaseUpdate=d,n.shared.pending=null}}while(!0);f===null&&(c=h),n.baseState=c,n.firstBaseUpdate=g,n.lastBaseUpdate=f,r===null&&(n.shared.lanes=0),Ua|=i,e.lanes=i,e.memoizedState=h}}function fm(e,t){if(typeof e!="function")throw Error(O(191,e));e.call(t)}function hm(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)fm(a[e],t)}var Hs=Gt(null),Vn=Gt(0);function mu(e,t){e=ua,Ee(Vn,e),Ee(Hs,t),ua=e|t.baseLanes}function Wi(){Ee(Vn,ua),Ee(Hs,Hs.current)}function Ko(){ua=Vn.current,Je(Hs),Je(Vn)}var wt=Gt(null),Mt=null;function xa(e){var t=e.alternate;Ee(qe,qe.current&1),Ee(wt,e),Mt===null&&(t===null||Hs.current!==null||t.memoizedState!==null)&&(Mt=e)}function Pi(e){Ee(qe,qe.current),Ee(wt,e),Mt===null&&(Mt=e)}function xm(e){e.tag===22?(Ee(qe,qe.current),Ee(wt,e),Mt===null&&(Mt=e)):ba()}function ba(){Ee(qe,qe.current),Ee(wt,wt.current)}function mt(e){Je(wt),Mt===e&&(Mt=null),Je(qe)}var qe=Gt(0);function Qn(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||po(a)||vo(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ia=0,oe=null,Se=null,Be=null,Xn=!1,Rs=!1,ts=!1,Zn=0,Rl=0,qs=null,hh=0;function ze(){throw Error(O(321))}function Jo(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!vt(e[a],t[a]))return!1;return!0}function Fo(e,t,a,s,n,r){return ia=r,oe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,le.H=e===null||e.memoizedState===null?Zm:ic,ts=!1,r=a(s,n),ts=!1,Rs&&(r=ym(t,a,s,n)),bm(e),r}function bm(e){le.H=ql;var t=Se!==null&&Se.next!==null;if(ia=0,Be=Se=oe=null,Xn=!1,Rl=0,qs=null,t)throw Error(O(300));e===null||Ge||(e=e.dependencies,e!==null&&$n(e)&&(Ge=!0))}function ym(e,t,a,s){oe=e;var n=0;do{if(Rs&&(qs=null),Rl=0,Rs=!1,25<=n)throw Error(O(301));if(n+=1,Be=Se=null,e.updateQueue!=null){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}le.H=Km,r=t(a,s)}while(Rs);return r}function xh(){var e=le.H,t=e.useState()[0];return t=typeof t.then=="function"?Kl(t):t,e=e.useState()[0],(Se!==null?Se.memoizedState:null)!==e&&(oe.flags|=1024),t}function Io(){var e=Zn!==0;return Zn=0,e}function Wo(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function Po(e){if(Xn){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Xn=!1}ia=0,Be=Se=oe=null,Rs=!1,Rl=Zn=0,qs=null}function at(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Be===null?oe.memoizedState=Be=e:Be=Be.next=e,Be}function Oe(){if(Se===null){var e=oe.alternate;e=e!==null?e.memoizedState:null}else e=Se.next;var t=Be===null?oe.memoizedState:Be.next;if(t!==null)Be=t,Se=e;else{if(e===null)throw oe.alternate===null?Error(O(467)):Error(O(310));Se=e,e={memoizedState:Se.memoizedState,baseState:Se.baseState,baseQueue:Se.baseQueue,queue:Se.queue,next:null},Be===null?oe.memoizedState=Be=e:Be=Be.next=e}return Be}function yr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Kl(e){var t=Rl;return Rl+=1,qs===null&&(qs=[]),e=dm(qs,e,t),t=oe,(Be===null?t.memoizedState:Be.next)===null&&(t=t.alternate,le.H=t===null||t.memoizedState===null?Zm:ic),e}function pr(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Kl(e);if(e.$$typeof===ea)return Pe(e)}throw Error(O(438,String(e)))}function ec(e){var t=null,a=oe.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var s=oe.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(n){return n.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=yr(),oe.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),s=0;s<e;s++)a[s]=ef;return t.index++,a}function oa(e,t){return typeof t=="function"?t(e):t}function jn(e){var t=Oe();return tc(t,Se,e)}function tc(e,t,a){var s=e.queue;if(s===null)throw Error(O(311));s.lastRenderedReducer=a;var n=e.baseQueue,r=s.pending;if(r!==null){if(n!==null){var i=n.next;n.next=r.next,r.next=i}t.baseQueue=n=r,s.pending=null}if(r=e.baseState,n===null)e.memoizedState=r;else{t=n.next;var o=i=null,c=null,g=t,f=!1;do{var h=g.lane&-536870913;if(h!==g.lane?(fe&h)===h:(ia&h)===h){var m=g.revertLane;if(m===0)c!==null&&(c=c.next={lane:0,revertLane:0,gesture:null,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null}),h===Ls&&(f=!0);else if((ia&m)===m){g=g.next,m===Ls&&(f=!0);continue}else h={lane:0,revertLane:g.revertLane,gesture:null,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null},c===null?(o=c=h,i=r):c=c.next=h,oe.lanes|=m,Ua|=m;h=g.action,ts&&a(r,h),r=g.hasEagerState?g.eagerState:a(r,h)}else m={lane:h,revertLane:g.revertLane,gesture:g.gesture,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null},c===null?(o=c=m,i=r):c=c.next=m,oe.lanes|=h,Ua|=h;g=g.next}while(g!==null&&g!==t);if(c===null?i=r:c.next=o,!vt(r,e.memoizedState)&&(Ge=!0,f&&(a=Ts,a!==null)))throw a;e.memoizedState=r,e.baseState=i,e.baseQueue=c,s.lastRenderedState=r}return n===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function Wr(e){var t=Oe(),a=t.queue;if(a===null)throw Error(O(311));a.lastRenderedReducer=e;var s=a.dispatch,n=a.pending,r=t.memoizedState;if(n!==null){a.pending=null;var i=n=n.next;do r=e(r,i.action),i=i.next;while(i!==n);vt(r,t.memoizedState)||(Ge=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),a.lastRenderedState=r}return[r,s]}function pm(e,t,a){var s=oe,n=Oe(),r=xe;if(r){if(a===void 0)throw Error(O(407));a=a()}else a=t();var i=!vt((Se||n).memoizedState,a);if(i&&(n.memoizedState=a,Ge=!0),n=n.queue,ac(jm.bind(null,s,n,e),[e]),n.getSnapshot!==t||i||Be!==null&&Be.memoizedState.tag&1){if(s.flags|=2048,Gs(9,{destroy:void 0},wm.bind(null,s,n,a,t),null),_e===null)throw Error(O(349));r||ia&127||vm(s,t,a)}return a}function vm(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=oe.updateQueue,t===null?(t=yr(),oe.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function wm(e,t,a,s){t.value=a,t.getSnapshot=s,Nm(t)&&km(e)}function jm(e,t,a){return a(function(){Nm(t)&&km(e)})}function Nm(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!vt(e,a)}catch{return!0}}function km(e){var t=rs(e,2);t!==null&&ot(t,e,2)}function eo(e){var t=at();if(typeof e=="function"){var a=e;if(e=a(),ts){pa(!0);try{a()}finally{pa(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:e},t}function Sm(e,t,a,s){return e.baseState=a,tc(e,Se,typeof s=="function"?s:oa)}function bh(e,t,a,s,n){if(wr(e))throw Error(O(485));if(e=t.action,e!==null){var r={payload:n,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(i){r.listeners.push(i)}};le.T!==null?a(!0):r.isTransition=!1,s(r),a=t.pending,a===null?(r.next=t.pending=r,_m(t,r)):(r.next=a.next,t.pending=a.next=r)}}function _m(e,t){var a=t.action,s=t.payload,n=e.state;if(t.isTransition){var r=le.T,i={};le.T=i;try{var o=a(n,s),c=le.S;c!==null&&c(i,o),gu(e,t,o)}catch(g){to(e,t,g)}finally{r!==null&&i.types!==null&&(r.types=i.types),le.T=r}}else try{r=a(n,s),gu(e,t,r)}catch(g){to(e,t,g)}}function gu(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(s){fu(e,t,s)},function(s){return to(e,t,s)}):fu(e,t,a)}function fu(e,t,a){t.status="fulfilled",t.value=a,Em(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,_m(e,a)))}function to(e,t,a){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=a,Em(t),t=t.next;while(t!==s)}e.action=null}function Em(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Dm(e,t){return t}function hu(e,t){if(xe){var a=_e.formState;if(a!==null){e:{var s=oe;if(xe){if(Ce){t:{for(var n=Ce,r=Ct;n.nodeType!==8;){if(!r){n=null;break t}if(n=At(n.nextSibling),n===null){n=null;break t}}r=n.data,n=r==="F!"||r==="F"?n:null}if(n){Ce=At(n.nextSibling),s=n.data==="F!";break e}}qa(s)}s=!1}s&&(t=a[0])}}return a=at(),a.memoizedState=a.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dm,lastRenderedState:t},a.queue=s,a=Vm.bind(null,oe,s),s.dispatch=a,s=eo(!1),r=rc.bind(null,oe,!1,s.queue),s=at(),n={state:t,dispatch:null,action:e,pending:null},s.queue=n,a=bh.bind(null,oe,n,r,a),n.dispatch=a,s.memoizedState=e,[t,a,!1]}function xu(e){var t=Oe();return Cm(t,Se,e)}function Cm(e,t,a){if(t=tc(e,t,Dm)[0],e=jn(oa)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=Kl(t)}catch(i){throw i===Fs?br:i}else s=t;t=Oe();var n=t.queue,r=n.dispatch;return a!==t.memoizedState&&(oe.flags|=2048,Gs(9,{destroy:void 0},yh.bind(null,n,a),null)),[s,r,e]}function yh(e,t){e.action=t}function bu(e){var t=Oe(),a=Se;if(a!==null)return Cm(t,a,e);Oe(),t=t.memoizedState,a=Oe();var s=a.queue.dispatch;return a.memoizedState=e,[t,s,!1]}function Gs(e,t,a,s){return e={tag:e,create:a,deps:s,inst:t,next:null},t=oe.updateQueue,t===null&&(t=yr(),oe.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(s=a.next,a.next=e,e.next=s,t.lastEffect=e),e}function Mm(){return Oe().memoizedState}function Nn(e,t,a,s){var n=at();oe.flags|=e,n.memoizedState=Gs(1|t,{destroy:void 0},a,s===void 0?null:s)}function vr(e,t,a,s){var n=Oe();s=s===void 0?null:s;var r=n.memoizedState.inst;Se!==null&&s!==null&&Jo(s,Se.memoizedState.deps)?n.memoizedState=Gs(t,r,a,s):(oe.flags|=e,n.memoizedState=Gs(1|t,r,a,s))}function yu(e,t){Nn(8390656,8,e,t)}function ac(e,t){vr(2048,8,e,t)}function ph(e){oe.flags|=4;var t=oe.updateQueue;if(t===null)t=yr(),oe.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function Am(e){var t=Oe().memoizedState;return ph({ref:t,nextImpl:e}),function(){if(ye&2)throw Error(O(440));return t.impl.apply(void 0,arguments)}}function Tm(e,t){return vr(4,2,e,t)}function zm(e,t){return vr(4,4,e,t)}function Rm(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function qm(e,t,a){a=a!=null?a.concat([e]):null,vr(4,4,Rm.bind(null,t,e),a)}function sc(){}function Om(e,t){var a=Oe();t=t===void 0?null:t;var s=a.memoizedState;return t!==null&&Jo(t,s[1])?s[0]:(a.memoizedState=[e,t],e)}function Um(e,t){var a=Oe();t=t===void 0?null:t;var s=a.memoizedState;if(t!==null&&Jo(t,s[1]))return s[0];if(s=e(),ts){pa(!0);try{e()}finally{pa(!1)}}return a.memoizedState=[s,t],s}function lc(e,t,a){return a===void 0||ia&1073741824&&!(fe&261930)?e.memoizedState=t:(e.memoizedState=a,e=S0(),oe.lanes|=e,Ua|=e,a)}function Bm(e,t,a,s){return vt(a,t)?a:Hs.current!==null?(e=lc(e,a,s),vt(e,t)||(Ge=!0),e):!(ia&42)||ia&1073741824&&!(fe&261930)?(Ge=!0,e.memoizedState=a):(e=S0(),oe.lanes|=e,Ua|=e,t)}function Lm(e,t,a,s,n){var r=pe.p;pe.p=r!==0&&8>r?r:8;var i=le.T,o={};le.T=o,rc(e,!1,t,a);try{var c=n(),g=le.S;if(g!==null&&g(o,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=fh(c,s);pl(e,t,f,yt(e))}else pl(e,t,s,yt(e))}catch(h){pl(e,t,{then:function(){},status:"rejected",reason:h},yt())}finally{pe.p=r,i!==null&&o.types!==null&&(i.types=o.types),le.T=i}}function vh(){}function ao(e,t,a,s){if(e.tag!==5)throw Error(O(476));var n=Hm(e).queue;Lm(e,n,t,Za,a===null?vh:function(){return Gm(e),a(s)})}function Hm(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Za,baseState:Za,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:Za},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Gm(e){var t=Hm(e);t.next===null&&(t=e.alternate.memoizedState),pl(e,t.next.queue,{},yt())}function nc(){return Pe(Bl)}function $m(){return Oe().memoizedState}function Ym(){return Oe().memoizedState}function wh(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=yt();e=Ea(a);var s=Da(t,e,a);s!==null&&(ot(s,t,a),xl(s,t,a)),t={cache:Vo()},e.payload=t;return}t=t.return}}function jh(e,t,a){var s=yt();a={lane:s,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},wr(e)?Qm(t,a):(a=Ho(e,t,a,s),a!==null&&(ot(a,e,s),Xm(a,t,s)))}function Vm(e,t,a){var s=yt();pl(e,t,a,s)}function pl(e,t,a,s){var n={lane:s,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(wr(e))Qm(t,n);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var i=t.lastRenderedState,o=r(i,a);if(n.hasEagerState=!0,n.eagerState=o,vt(o,i))return xr(e,t,n,0),_e===null&&hr(),!1}catch{}finally{}if(a=Ho(e,t,n,s),a!==null)return ot(a,e,s),Xm(a,t,s),!0}return!1}function rc(e,t,a,s){if(s={lane:2,revertLane:hc(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},wr(e)){if(t)throw Error(O(479))}else t=Ho(e,a,s,2),t!==null&&ot(t,e,2)}function wr(e){var t=e.alternate;return e===oe||t!==null&&t===oe}function Qm(e,t){Rs=Xn=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Xm(e,t,a){if(a&4194048){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,Ad(e,a)}}var ql={readContext:Pe,use:pr,useCallback:ze,useContext:ze,useEffect:ze,useImperativeHandle:ze,useLayoutEffect:ze,useInsertionEffect:ze,useMemo:ze,useReducer:ze,useRef:ze,useState:ze,useDebugValue:ze,useDeferredValue:ze,useTransition:ze,useSyncExternalStore:ze,useId:ze,useHostTransitionStatus:ze,useFormState:ze,useActionState:ze,useOptimistic:ze,useMemoCache:ze,useCacheRefresh:ze};ql.useEffectEvent=ze;var Zm={readContext:Pe,use:pr,useCallback:function(e,t){return at().memoizedState=[e,t===void 0?null:t],e},useContext:Pe,useEffect:yu,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,Nn(4194308,4,Rm.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Nn(4194308,4,e,t)},useInsertionEffect:function(e,t){Nn(4,2,e,t)},useMemo:function(e,t){var a=at();t=t===void 0?null:t;var s=e();if(ts){pa(!0);try{e()}finally{pa(!1)}}return a.memoizedState=[s,t],s},useReducer:function(e,t,a){var s=at();if(a!==void 0){var n=a(t);if(ts){pa(!0);try{a(t)}finally{pa(!1)}}}else n=t;return s.memoizedState=s.baseState=n,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},s.queue=e,e=e.dispatch=jh.bind(null,oe,e),[s.memoizedState,e]},useRef:function(e){var t=at();return e={current:e},t.memoizedState=e},useState:function(e){e=eo(e);var t=e.queue,a=Vm.bind(null,oe,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:sc,useDeferredValue:function(e,t){var a=at();return lc(a,e,t)},useTransition:function(){var e=eo(!1);return e=Lm.bind(null,oe,e.queue,!0,!1),at().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var s=oe,n=at();if(xe){if(a===void 0)throw Error(O(407));a=a()}else{if(a=t(),_e===null)throw Error(O(349));fe&127||vm(s,t,a)}n.memoizedState=a;var r={value:a,getSnapshot:t};return n.queue=r,yu(jm.bind(null,s,r,e),[e]),s.flags|=2048,Gs(9,{destroy:void 0},wm.bind(null,s,r,a,t),null),a},useId:function(){var e=at(),t=_e.identifierPrefix;if(xe){var a=Bt,s=Ut;a=(s&~(1<<32-bt(s)-1)).toString(32)+a,t="_"+t+"R_"+a,a=Zn++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=hh++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:nc,useFormState:hu,useActionState:hu,useOptimistic:function(e){var t=at();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=rc.bind(null,oe,!0,a),a.dispatch=t,[e,t]},useMemoCache:ec,useCacheRefresh:function(){return at().memoizedState=wh.bind(null,oe)},useEffectEvent:function(e){var t=at(),a={impl:e};return t.memoizedState=a,function(){if(ye&2)throw Error(O(440));return a.impl.apply(void 0,arguments)}}},ic={readContext:Pe,use:pr,useCallback:Om,useContext:Pe,useEffect:ac,useImperativeHandle:qm,useInsertionEffect:Tm,useLayoutEffect:zm,useMemo:Um,useReducer:jn,useRef:Mm,useState:function(){return jn(oa)},useDebugValue:sc,useDeferredValue:function(e,t){var a=Oe();return Bm(a,Se.memoizedState,e,t)},useTransition:function(){var e=jn(oa)[0],t=Oe().memoizedState;return[typeof e=="boolean"?e:Kl(e),t]},useSyncExternalStore:pm,useId:$m,useHostTransitionStatus:nc,useFormState:xu,useActionState:xu,useOptimistic:function(e,t){var a=Oe();return Sm(a,Se,e,t)},useMemoCache:ec,useCacheRefresh:Ym};ic.useEffectEvent=Am;var Km={readContext:Pe,use:pr,useCallback:Om,useContext:Pe,useEffect:ac,useImperativeHandle:qm,useInsertionEffect:Tm,useLayoutEffect:zm,useMemo:Um,useReducer:Wr,useRef:Mm,useState:function(){return Wr(oa)},useDebugValue:sc,useDeferredValue:function(e,t){var a=Oe();return Se===null?lc(a,e,t):Bm(a,Se.memoizedState,e,t)},useTransition:function(){var e=Wr(oa)[0],t=Oe().memoizedState;return[typeof e=="boolean"?e:Kl(e),t]},useSyncExternalStore:pm,useId:$m,useHostTransitionStatus:nc,useFormState:bu,useActionState:bu,useOptimistic:function(e,t){var a=Oe();return Se!==null?Sm(a,Se,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:ec,useCacheRefresh:Ym};Km.useEffectEvent=Am;function Pr(e,t,a,s){t=e.memoizedState,a=a(s,t),a=a==null?t:Me({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var so={enqueueSetState:function(e,t,a){e=e._reactInternals;var s=yt(),n=Ea(s);n.payload=t,a!=null&&(n.callback=a),t=Da(e,n,s),t!==null&&(ot(t,e,s),xl(t,e,s))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var s=yt(),n=Ea(s);n.tag=1,n.payload=t,a!=null&&(n.callback=a),t=Da(e,n,s),t!==null&&(ot(t,e,s),xl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=yt(),s=Ea(a);s.tag=2,t!=null&&(s.callback=t),t=Da(e,s,a),t!==null&&(ot(t,e,a),xl(t,e,a))}};function pu(e,t,a,s,n,r,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,r,i):t.prototype&&t.prototype.isPureReactComponent?!Ml(a,s)||!Ml(n,r):!0}function vu(e,t,a,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,s),t.state!==e&&so.enqueueReplaceState(t,t.state,null)}function as(e,t){var a=t;if("ref"in t){a={};for(var s in t)s!=="ref"&&(a[s]=t[s])}if(e=e.defaultProps){a===t&&(a=Me({},a));for(var n in e)a[n]===void 0&&(a[n]=e[n])}return a}function Jm(e){Ln(e)}function Fm(e){console.error(e)}function Im(e){Ln(e)}function Kn(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function wu(e,t,a){try{var s=e.onCaughtError;s(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(n){setTimeout(function(){throw n})}}function lo(e,t,a){return a=Ea(a),a.tag=3,a.payload={element:null},a.callback=function(){Kn(e,t)},a}function Wm(e){return e=Ea(e),e.tag=3,e}function Pm(e,t,a,s){var n=a.type.getDerivedStateFromError;if(typeof n=="function"){var r=s.value;e.payload=function(){return n(r)},e.callback=function(){wu(t,a,s)}}var i=a.stateNode;i!==null&&typeof i.componentDidCatch=="function"&&(e.callback=function(){wu(t,a,s),typeof n!="function"&&(Ca===null?Ca=new Set([this]):Ca.add(this));var o=s.stack;this.componentDidCatch(s.value,{componentStack:o!==null?o:""})})}function Nh(e,t,a,s,n){if(a.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=a.alternate,t!==null&&Js(t,a,n,!0),a=wt.current,a!==null){switch(a.tag){case 31:case 13:return Mt===null?Pn():a.alternate===null&&Re===0&&(Re=3),a.flags&=-257,a.flags|=65536,a.lanes=n,s===Yn?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([s]):t.add(s),ui(e,s,n)),!1;case 22:return a.flags|=65536,s===Yn?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([s]):a.add(s)),ui(e,s,n)),!1}throw Error(O(435,a.tag))}return ui(e,s,n),Pn(),!1}if(xe)return t=wt.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=n,s!==Qi&&(e=Error(O(422),{cause:s}),Tl(Dt(e,a)))):(s!==Qi&&(t=Error(O(423),{cause:s}),Tl(Dt(t,a))),e=e.current.alternate,e.flags|=65536,n&=-n,e.lanes|=n,s=Dt(s,a),n=lo(e.stateNode,s,n),Ir(e,n),Re!==4&&(Re=2)),!1;var r=Error(O(520),{cause:s});if(r=Dt(r,a),jl===null?jl=[r]:jl.push(r),Re!==4&&(Re=2),t===null)return!0;s=Dt(s,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=n&-n,a.lanes|=e,e=lo(a.stateNode,s,e),Ir(a,e),!1;case 1:if(t=a.type,r=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(Ca===null||!Ca.has(r))))return a.flags|=65536,n&=-n,a.lanes|=n,n=Wm(n),Pm(n,e,a,s),Ir(a,n),!1}a=a.return}while(a!==null);return!1}var oc=Error(O(461)),Ge=!1;function Fe(e,t,a,s){t.child=e===null?gm(t,null,a,s):es(t,e.child,a,s)}function ju(e,t,a,s,n){a=a.render;var r=t.ref;if("ref"in s){var i={};for(var o in s)o!=="ref"&&(i[o]=s[o])}else i=s;return Pa(t),s=Fo(e,t,a,i,r,n),o=Io(),e!==null&&!Ge?(Wo(e,t,n),ca(e,t,n)):(xe&&o&&$o(t),t.flags|=1,Fe(e,t,s,n),t.child)}function Nu(e,t,a,s,n){if(e===null){var r=a.type;return typeof r=="function"&&!Go(r)&&r.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=r,e0(e,t,r,s,n)):(e=vn(a.type,null,s,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!cc(e,n)){var i=r.memoizedProps;if(a=a.compare,a=a!==null?a:Ml,a(i,s)&&e.ref===t.ref)return ca(e,t,n)}return t.flags|=1,e=sa(r,s),e.ref=t.ref,e.return=t,t.child=e}function e0(e,t,a,s,n){if(e!==null){var r=e.memoizedProps;if(Ml(r,s)&&e.ref===t.ref)if(Ge=!1,t.pendingProps=s=r,cc(e,n))e.flags&131072&&(Ge=!0);else return t.lanes=e.lanes,ca(e,t,n)}return no(e,t,a,s,n)}function t0(e,t,a,s){var n=s.children,r=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if(t.flags&128){if(r=r!==null?r.baseLanes|a:a,e!==null){for(s=t.child=e.child,n=0;s!==null;)n=n|s.lanes|s.childLanes,s=s.sibling;s=n&~r}else s=0,t.child=null;return ku(e,t,r,a,s)}if(a&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&wn(t,r!==null?r.cachePool:null),r!==null?mu(t,r):Wi(),xm(t);else return s=t.lanes=536870912,ku(e,t,r!==null?r.baseLanes|a:a,a,s)}else r!==null?(wn(t,r.cachePool),mu(t,r),ba(),t.memoizedState=null):(e!==null&&wn(t,null),Wi(),ba());return Fe(e,t,n,a),t.child}function ul(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function ku(e,t,a,s,n){var r=Qo();return r=r===null?null:{parent:He._currentValue,pool:r},t.memoizedState={baseLanes:a,cachePool:r},e!==null&&wn(t,null),Wi(),xm(t),e!==null&&Js(e,t,s,!0),t.childLanes=n,null}function kn(e,t){return t=Jn({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Su(e,t,a){return es(t,e.child,null,a),e=kn(t,t.pendingProps),e.flags|=2,mt(t),t.memoizedState=null,e}function kh(e,t,a){var s=t.pendingProps,n=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(xe){if(s.mode==="hidden")return e=kn(t,s),t.lanes=536870912,ul(null,e);if(Pi(t),(e=Ce)?(e=Z0(e,Ct),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ra!==null?{id:Ut,overflow:Bt}:null,retryLane:536870912,hydrationErrors:null},a=rm(e),a.return=t,t.child=a,We=t,Ce=null)):e=null,e===null)throw qa(t);return t.lanes=536870912,null}return kn(t,s)}var r=e.memoizedState;if(r!==null){var i=r.dehydrated;if(Pi(t),n)if(t.flags&256)t.flags&=-257,t=Su(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(O(558));else if(Ge||Js(e,t,a,!1),n=(a&e.childLanes)!==0,Ge||n){if(s=_e,s!==null&&(i=Td(s,a),i!==0&&i!==r.retryLane))throw r.retryLane=i,rs(e,i),ot(s,e,i),oc;Pn(),t=Su(e,t,a)}else e=r.treeContext,Ce=At(i.nextSibling),We=t,xe=!0,_a=null,Ct=!1,e!==null&&om(t,e),t=kn(t,s),t.flags|=4096;return t}return e=sa(e.child,{mode:s.mode,children:s.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Sn(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(O(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function no(e,t,a,s,n){return Pa(t),a=Fo(e,t,a,s,void 0,n),s=Io(),e!==null&&!Ge?(Wo(e,t,n),ca(e,t,n)):(xe&&s&&$o(t),t.flags|=1,Fe(e,t,a,n),t.child)}function _u(e,t,a,s,n,r){return Pa(t),t.updateQueue=null,a=ym(t,s,a,n),bm(e),s=Io(),e!==null&&!Ge?(Wo(e,t,r),ca(e,t,r)):(xe&&s&&$o(t),t.flags|=1,Fe(e,t,a,r),t.child)}function Eu(e,t,a,s,n){if(Pa(t),t.stateNode===null){var r=ks,i=a.contextType;typeof i=="object"&&i!==null&&(r=Pe(i)),r=new a(s,r),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=so,t.stateNode=r,r._reactInternals=t,r=t.stateNode,r.props=s,r.state=t.memoizedState,r.refs={},Zo(t),i=a.contextType,r.context=typeof i=="object"&&i!==null?Pe(i):ks,r.state=t.memoizedState,i=a.getDerivedStateFromProps,typeof i=="function"&&(Pr(t,a,i,s),r.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(i=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),i!==r.state&&so.enqueueReplaceState(r,r.state,null),yl(t,s,r,n),bl(),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){r=t.stateNode;var o=t.memoizedProps,c=as(a,o);r.props=c;var g=r.context,f=a.contextType;i=ks,typeof f=="object"&&f!==null&&(i=Pe(f));var h=a.getDerivedStateFromProps;f=typeof h=="function"||typeof r.getSnapshotBeforeUpdate=="function",o=t.pendingProps!==o,f||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(o||g!==i)&&vu(t,r,s,i),ga=!1;var m=t.memoizedState;r.state=m,yl(t,s,r,n),bl(),g=t.memoizedState,o||m!==g||ga?(typeof h=="function"&&(Pr(t,a,h,s),g=t.memoizedState),(c=ga||pu(t,a,c,s,m,g,i))?(f||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(t.flags|=4194308)):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=g),r.props=s,r.state=g,r.context=i,s=c):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{r=t.stateNode,Fi(e,t),i=t.memoizedProps,f=as(a,i),r.props=f,h=t.pendingProps,m=r.context,g=a.contextType,c=ks,typeof g=="object"&&g!==null&&(c=Pe(g)),o=a.getDerivedStateFromProps,(g=typeof o=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(i!==h||m!==c)&&vu(t,r,s,c),ga=!1,m=t.memoizedState,r.state=m,yl(t,s,r,n),bl();var d=t.memoizedState;i!==h||m!==d||ga||e!==null&&e.dependencies!==null&&$n(e.dependencies)?(typeof o=="function"&&(Pr(t,a,o,s),d=t.memoizedState),(f=ga||pu(t,a,f,s,m,d,c)||e!==null&&e.dependencies!==null&&$n(e.dependencies))?(g||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(s,d,c),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(s,d,c)),typeof r.componentDidUpdate=="function"&&(t.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof r.componentDidUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=d),r.props=s,r.state=d,r.context=c,s=f):(typeof r.componentDidUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),s=!1)}return r=s,Sn(e,t),s=(t.flags&128)!==0,r||s?(r=t.stateNode,a=s&&typeof a.getDerivedStateFromError!="function"?null:r.render(),t.flags|=1,e!==null&&s?(t.child=es(t,e.child,null,n),t.child=es(t,null,a,n)):Fe(e,t,a,n),t.memoizedState=r.state,e=t.child):e=ca(e,t,n),e}function Du(e,t,a,s){return Wa(),t.flags|=256,Fe(e,t,a,s),t.child}var ei={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ti(e){return{baseLanes:e,cachePool:um()}}function ai(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=ft),e}function a0(e,t,a){var s=t.pendingProps,n=!1,r=(t.flags&128)!==0,i;if((i=r)||(i=e!==null&&e.memoizedState===null?!1:(qe.current&2)!==0),i&&(n=!0,t.flags&=-129),i=(t.flags&32)!==0,t.flags&=-33,e===null){if(xe){if(n?xa(t):ba(),(e=Ce)?(e=Z0(e,Ct),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ra!==null?{id:Ut,overflow:Bt}:null,retryLane:536870912,hydrationErrors:null},a=rm(e),a.return=t,t.child=a,We=t,Ce=null)):e=null,e===null)throw qa(t);return vo(e)?t.lanes=32:t.lanes=536870912,null}var o=s.children;return s=s.fallback,n?(ba(),n=t.mode,o=Jn({mode:"hidden",children:o},n),s=Ka(s,n,a,null),o.return=t,s.return=t,o.sibling=s,t.child=o,s=t.child,s.memoizedState=ti(a),s.childLanes=ai(e,i,a),t.memoizedState=ei,ul(null,s)):(xa(t),ro(t,o))}var c=e.memoizedState;if(c!==null&&(o=c.dehydrated,o!==null)){if(r)t.flags&256?(xa(t),t.flags&=-257,t=si(e,t,a)):t.memoizedState!==null?(ba(),t.child=e.child,t.flags|=128,t=null):(ba(),o=s.fallback,n=t.mode,s=Jn({mode:"visible",children:s.children},n),o=Ka(o,n,a,null),o.flags|=2,s.return=t,o.return=t,s.sibling=o,t.child=s,es(t,e.child,null,a),s=t.child,s.memoizedState=ti(a),s.childLanes=ai(e,i,a),t.memoizedState=ei,t=ul(null,s));else if(xa(t),vo(o)){if(i=o.nextSibling&&o.nextSibling.dataset,i)var g=i.dgst;i=g,s=Error(O(419)),s.stack="",s.digest=i,Tl({value:s,source:null,stack:null}),t=si(e,t,a)}else if(Ge||Js(e,t,a,!1),i=(a&e.childLanes)!==0,Ge||i){if(i=_e,i!==null&&(s=Td(i,a),s!==0&&s!==c.retryLane))throw c.retryLane=s,rs(e,s),ot(i,e,s),oc;po(o)||Pn(),t=si(e,t,a)}else po(o)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,Ce=At(o.nextSibling),We=t,xe=!0,_a=null,Ct=!1,e!==null&&om(t,e),t=ro(t,s.children),t.flags|=4096);return t}return n?(ba(),o=s.fallback,n=t.mode,c=e.child,g=c.sibling,s=sa(c,{mode:"hidden",children:s.children}),s.subtreeFlags=c.subtreeFlags&65011712,g!==null?o=sa(g,o):(o=Ka(o,n,a,null),o.flags|=2),o.return=t,s.return=t,s.sibling=o,t.child=s,ul(null,s),s=t.child,o=e.child.memoizedState,o===null?o=ti(a):(n=o.cachePool,n!==null?(c=He._currentValue,n=n.parent!==c?{parent:c,pool:c}:n):n=um(),o={baseLanes:o.baseLanes|a,cachePool:n}),s.memoizedState=o,s.childLanes=ai(e,i,a),t.memoizedState=ei,ul(e.child,s)):(xa(t),a=e.child,e=a.sibling,a=sa(a,{mode:"visible",children:s.children}),a.return=t,a.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=a,t.memoizedState=null,a)}function ro(e,t){return t=Jn({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Jn(e,t){return e=gt(22,e,null,t),e.lanes=0,e}function si(e,t,a){return es(t,e.child,null,a),e=ro(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Cu(e,t,a){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Zi(e.return,t,a)}function li(e,t,a,s,n,r){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:a,tailMode:n,treeForkCount:r}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=a,i.tailMode=n,i.treeForkCount=r)}function s0(e,t,a){var s=t.pendingProps,n=s.revealOrder,r=s.tail;s=s.children;var i=qe.current,o=(i&2)!==0;if(o?(i=i&1|2,t.flags|=128):i&=1,Ee(qe,i),Fe(e,t,s,a),s=xe?Al:0,!o&&e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Cu(e,a,t);else if(e.tag===19)Cu(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(n){case"forwards":for(a=t.child,n=null;a!==null;)e=a.alternate,e!==null&&Qn(e)===null&&(n=a),a=a.sibling;a=n,a===null?(n=t.child,t.child=null):(n=a.sibling,a.sibling=null),li(t,!1,n,a,r,s);break;case"backwards":case"unstable_legacy-backwards":for(a=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&Qn(e)===null){t.child=n;break}e=n.sibling,n.sibling=a,a=n,n=e}li(t,!0,a,null,r,s);break;case"together":li(t,!1,null,null,void 0,s);break;default:t.memoizedState=null}return t.child}function ca(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Ua|=t.lanes,!(a&t.childLanes))if(e!==null){if(Js(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(O(153));if(t.child!==null){for(e=t.child,a=sa(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=sa(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function cc(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&$n(e)))}function Sh(e,t,a){switch(t.tag){case 3:qn(t,t.stateNode.containerInfo),ha(t,He,e.memoizedState.cache),Wa();break;case 27:case 5:Ri(t);break;case 4:qn(t,t.stateNode.containerInfo);break;case 10:ha(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Pi(t),null;break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(xa(t),t.flags|=128,null):a&t.child.childLanes?a0(e,t,a):(xa(t),e=ca(e,t,a),e!==null?e.sibling:null);xa(t);break;case 19:var n=(e.flags&128)!==0;if(s=(a&t.childLanes)!==0,s||(Js(e,t,a,!1),s=(a&t.childLanes)!==0),n){if(s)return s0(e,t,a);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Ee(qe,qe.current),s)break;return null;case 22:return t.lanes=0,t0(e,t,a,t.pendingProps);case 24:ha(t,He,e.memoizedState.cache)}return ca(e,t,a)}function l0(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Ge=!0;else{if(!cc(e,a)&&!(t.flags&128))return Ge=!1,Sh(e,t,a);Ge=!!(e.flags&131072)}else Ge=!1,xe&&t.flags&1048576&&im(t,Al,t.index);switch(t.lanes=0,t.tag){case 16:e:{var s=t.pendingProps;if(e=Qa(t.elementType),t.type=e,typeof e=="function")Go(e)?(s=as(e,s),t.tag=1,t=Eu(null,t,e,s,a)):(t.tag=0,t=no(null,t,e,s,a));else{if(e!=null){var n=e.$$typeof;if(n===Eo){t.tag=11,t=ju(null,t,e,s,a);break e}else if(n===Do){t.tag=14,t=Nu(null,t,e,s,a);break e}}throw t=Ti(e)||e,Error(O(306,t,""))}}return t;case 0:return no(e,t,t.type,t.pendingProps,a);case 1:return s=t.type,n=as(s,t.pendingProps),Eu(e,t,s,n,a);case 3:e:{if(qn(t,t.stateNode.containerInfo),e===null)throw Error(O(387));s=t.pendingProps;var r=t.memoizedState;n=r.element,Fi(e,t),yl(t,s,null,a);var i=t.memoizedState;if(s=i.cache,ha(t,He,s),s!==r.cache&&Ki(t,[He],a,!0),bl(),s=i.element,r.isDehydrated)if(r={element:s,isDehydrated:!1,cache:i.cache},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){t=Du(e,t,s,a);break e}else if(s!==n){n=Dt(Error(O(424)),t),Tl(n),t=Du(e,t,s,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ce=At(e.firstChild),We=t,xe=!0,_a=null,Ct=!0,a=gm(t,null,s,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Wa(),s===n){t=ca(e,t,a);break e}Fe(e,t,s,a)}t=t.child}return t;case 26:return Sn(e,t),e===null?(a=Ju(t.type,null,t.pendingProps,null))?t.memoizedState=a:xe||(a=t.type,e=t.pendingProps,s=sr(Sa.current).createElement(a),s[Ie]=t,s[ct]=e,et(s,a,e),Ke(s),t.stateNode=s):t.memoizedState=Ju(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ri(t),e===null&&xe&&(s=t.stateNode=K0(t.type,t.pendingProps,Sa.current),We=t,Ct=!0,n=Ce,La(t.type)?(wo=n,Ce=At(s.firstChild)):Ce=n),Fe(e,t,t.pendingProps.children,a),Sn(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&xe&&((n=s=Ce)&&(s=tx(s,t.type,t.pendingProps,Ct),s!==null?(t.stateNode=s,We=t,Ce=At(s.firstChild),Ct=!1,n=!0):n=!1),n||qa(t)),Ri(t),n=t.type,r=t.pendingProps,i=e!==null?e.memoizedProps:null,s=r.children,bo(n,r)?s=null:i!==null&&bo(n,i)&&(t.flags|=32),t.memoizedState!==null&&(n=Fo(e,t,xh,null,null,a),Bl._currentValue=n),Sn(e,t),Fe(e,t,s,a),t.child;case 6:return e===null&&xe&&((e=a=Ce)&&(a=ax(a,t.pendingProps,Ct),a!==null?(t.stateNode=a,We=t,Ce=null,e=!0):e=!1),e||qa(t)),null;case 13:return a0(e,t,a);case 4:return qn(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=es(t,null,s,a):Fe(e,t,s,a),t.child;case 11:return ju(e,t,t.type,t.pendingProps,a);case 7:return Fe(e,t,t.pendingProps,a),t.child;case 8:return Fe(e,t,t.pendingProps.children,a),t.child;case 12:return Fe(e,t,t.pendingProps.children,a),t.child;case 10:return s=t.pendingProps,ha(t,t.type,s.value),Fe(e,t,s.children,a),t.child;case 9:return n=t.type._context,s=t.pendingProps.children,Pa(t),n=Pe(n),s=s(n),t.flags|=1,Fe(e,t,s,a),t.child;case 14:return Nu(e,t,t.type,t.pendingProps,a);case 15:return e0(e,t,t.type,t.pendingProps,a);case 19:return s0(e,t,a);case 31:return kh(e,t,a);case 22:return t0(e,t,a,t.pendingProps);case 24:return Pa(t),s=Pe(He),e===null?(n=Qo(),n===null&&(n=_e,r=Vo(),n.pooledCache=r,r.refCount++,r!==null&&(n.pooledCacheLanes|=a),n=r),t.memoizedState={parent:s,cache:n},Zo(t),ha(t,He,n)):(e.lanes&a&&(Fi(e,t),yl(t,null,null,a),bl()),n=e.memoizedState,r=t.memoizedState,n.parent!==s?(n={parent:s,cache:s},t.memoizedState=n,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=n),ha(t,He,s)):(s=r.cache,ha(t,He,s),s!==n.cache&&Ki(t,[He],a,!0))),Fe(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(O(156,t.tag))}function Xt(e){e.flags|=4}function ni(e,t,a,s,n){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(n&335544128)===n)if(e.stateNode.complete)e.flags|=8192;else if(D0())e.flags|=8192;else throw Fa=Yn,Xo}else e.flags&=-16777217}function Mu(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!I0(t))if(D0())e.flags|=8192;else throw Fa=Yn,Xo}function cn(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Cd():536870912,e.lanes|=t,$s|=t)}function ll(e,t){if(!xe)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function De(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,s=0;if(t)for(var n=e.child;n!==null;)a|=n.lanes|n.childLanes,s|=n.subtreeFlags&65011712,s|=n.flags&65011712,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)a|=n.lanes|n.childLanes,s|=n.subtreeFlags,s|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=s,e.childLanes=a,t}function _h(e,t,a){var s=t.pendingProps;switch(Yo(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return De(t),null;case 1:return De(t),null;case 3:return a=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),la(He),Os(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(us(t)?Xt(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Fr())),De(t),null;case 26:var n=t.type,r=t.memoizedState;return e===null?(Xt(t),r!==null?(De(t),Mu(t,r)):(De(t),ni(t,n,null,s,a))):r?r!==e.memoizedState?(Xt(t),De(t),Mu(t,r)):(De(t),t.flags&=-16777217):(e=e.memoizedProps,e!==s&&Xt(t),De(t),ni(t,n,e,s,a)),null;case 27:if(On(t),a=Sa.current,n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&Xt(t);else{if(!s){if(t.stateNode===null)throw Error(O(166));return De(t),null}e=Ht.current,us(t)?nu(t):(e=K0(n,s,a),t.stateNode=e,Xt(t))}return De(t),null;case 5:if(On(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&Xt(t);else{if(!s){if(t.stateNode===null)throw Error(O(166));return De(t),null}if(r=Ht.current,us(t))nu(t);else{var i=sr(Sa.current);switch(r){case 1:r=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:r=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":r=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":r=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":r=i.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof s.is=="string"?i.createElement("select",{is:s.is}):i.createElement("select"),s.multiple?r.multiple=!0:s.size&&(r.size=s.size);break;default:r=typeof s.is=="string"?i.createElement(n,{is:s.is}):i.createElement(n)}}r[Ie]=t,r[ct]=s;e:for(i=t.child;i!==null;){if(i.tag===5||i.tag===6)r.appendChild(i.stateNode);else if(i.tag!==4&&i.tag!==27&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=r;e:switch(et(r,n,s),n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Xt(t)}}return De(t),ni(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&Xt(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(O(166));if(e=Sa.current,us(t)){if(e=t.stateNode,a=t.memoizedProps,s=null,n=We,n!==null)switch(n.tag){case 27:case 5:s=n.memoizedProps}e[Ie]=t,e=!!(e.nodeValue===a||s!==null&&s.suppressHydrationWarning===!0||V0(e.nodeValue,a)),e||qa(t,!0)}else e=sr(e).createTextNode(s),e[Ie]=t,t.stateNode=e}return De(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(s=us(t),a!==null){if(e===null){if(!s)throw Error(O(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(O(557));e[Ie]=t}else Wa(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;De(t),e=!1}else a=Fr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(mt(t),t):(mt(t),null);if(t.flags&128)throw Error(O(558))}return De(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(n=us(t),s!==null&&s.dehydrated!==null){if(e===null){if(!n)throw Error(O(318));if(n=t.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(O(317));n[Ie]=t}else Wa(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;De(t),n=!1}else n=Fr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),n=!0;if(!n)return t.flags&256?(mt(t),t):(mt(t),null)}return mt(t),t.flags&128?(t.lanes=a,t):(a=s!==null,e=e!==null&&e.memoizedState!==null,a&&(s=t.child,n=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(n=s.alternate.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==n&&(s.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),cn(t,t.updateQueue),De(t),null);case 4:return Os(),e===null&&xc(t.stateNode.containerInfo),De(t),null;case 10:return la(t.type),De(t),null;case 19:if(Je(qe),s=t.memoizedState,s===null)return De(t),null;if(n=(t.flags&128)!==0,r=s.rendering,r===null)if(n)ll(s,!1);else{if(Re!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(r=Qn(e),r!==null){for(t.flags|=128,ll(s,!1),e=r.updateQueue,t.updateQueue=e,cn(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)nm(a,e),a=a.sibling;return Ee(qe,qe.current&1|2),xe&&Wt(t,s.treeForkCount),t.child}e=e.sibling}s.tail!==null&&ht()>In&&(t.flags|=128,n=!0,ll(s,!1),t.lanes=4194304)}else{if(!n)if(e=Qn(r),e!==null){if(t.flags|=128,n=!0,e=e.updateQueue,t.updateQueue=e,cn(t,e),ll(s,!0),s.tail===null&&s.tailMode==="hidden"&&!r.alternate&&!xe)return De(t),null}else 2*ht()-s.renderingStartTime>In&&a!==536870912&&(t.flags|=128,n=!0,ll(s,!1),t.lanes=4194304);s.isBackwards?(r.sibling=t.child,t.child=r):(e=s.last,e!==null?e.sibling=r:t.child=r,s.last=r)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ht(),e.sibling=null,a=qe.current,Ee(qe,n?a&1|2:a&1),xe&&Wt(t,s.treeForkCount),e):(De(t),null);case 22:case 23:return mt(t),Ko(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?a&536870912&&!(t.flags&128)&&(De(t),t.subtreeFlags&6&&(t.flags|=8192)):De(t),a=t.updateQueue,a!==null&&cn(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==a&&(t.flags|=2048),e!==null&&Je(Ja),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),la(He),De(t),null;case 25:return null;case 30:return null}throw Error(O(156,t.tag))}function Eh(e,t){switch(Yo(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return la(He),Os(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return On(t),null;case 31:if(t.memoizedState!==null){if(mt(t),t.alternate===null)throw Error(O(340));Wa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(mt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(O(340));Wa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Je(qe),null;case 4:return Os(),null;case 10:return la(t.type),null;case 22:case 23:return mt(t),Ko(),e!==null&&Je(Ja),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return la(He),null;case 25:return null;default:return null}}function n0(e,t){switch(Yo(t),t.tag){case 3:la(He),Os();break;case 26:case 27:case 5:On(t);break;case 4:Os();break;case 31:t.memoizedState!==null&&mt(t);break;case 13:mt(t);break;case 19:Je(qe);break;case 10:la(t.type);break;case 22:case 23:mt(t),Ko(),e!==null&&Je(Ja);break;case 24:la(He)}}function Jl(e,t){try{var a=t.updateQueue,s=a!==null?a.lastEffect:null;if(s!==null){var n=s.next;a=n;do{if((a.tag&e)===e){s=void 0;var r=a.create,i=a.inst;s=r(),i.destroy=s}a=a.next}while(a!==n)}}catch(o){je(t,t.return,o)}}function Oa(e,t,a){try{var s=t.updateQueue,n=s!==null?s.lastEffect:null;if(n!==null){var r=n.next;s=r;do{if((s.tag&e)===e){var i=s.inst,o=i.destroy;if(o!==void 0){i.destroy=void 0,n=t;var c=a,g=o;try{g()}catch(f){je(n,c,f)}}}s=s.next}while(s!==r)}}catch(f){je(t,t.return,f)}}function r0(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{hm(t,a)}catch(s){je(e,e.return,s)}}}function i0(e,t,a){a.props=as(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(s){je(e,t,s)}}function vl(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof a=="function"?e.refCleanup=a(s):a.current=s}}catch(n){je(e,t,n)}}function Lt(e,t){var a=e.ref,s=e.refCleanup;if(a!==null)if(typeof s=="function")try{s()}catch(n){je(e,t,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(n){je(e,t,n)}else a.current=null}function o0(e){var t=e.type,a=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&s.focus();break e;case"img":a.src?s.src=a.src:a.srcSet&&(s.srcset=a.srcSet)}}catch(n){je(e,e.return,n)}}function ri(e,t,a){try{var s=e.stateNode;Jh(s,e.type,a,t),s[ct]=t}catch(n){je(e,e.return,n)}}function c0(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&La(e.type)||e.tag===4}function ii(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||c0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&La(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function io(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=ta));else if(s!==4&&(s===27&&La(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(io(e,t,a),e=e.sibling;e!==null;)io(e,t,a),e=e.sibling}function Fn(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(s!==4&&(s===27&&La(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Fn(e,t,a),e=e.sibling;e!==null;)Fn(e,t,a),e=e.sibling}function u0(e){var t=e.stateNode,a=e.memoizedProps;try{for(var s=e.type,n=t.attributes;n.length;)t.removeAttributeNode(n[0]);et(t,s,a),t[Ie]=e,t[ct]=a}catch(r){je(e,e.return,r)}}var Pt=!1,Le=!1,oi=!1,Au=typeof WeakSet=="function"?WeakSet:Set,Ze=null;function Dh(e,t){if(e=e.containerInfo,ho=ir,e=Id(e),Bo(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var s=a.getSelection&&a.getSelection();if(s&&s.rangeCount!==0){a=s.anchorNode;var n=s.anchorOffset,r=s.focusNode;s=s.focusOffset;try{a.nodeType,r.nodeType}catch{a=null;break e}var i=0,o=-1,c=-1,g=0,f=0,h=e,m=null;t:for(;;){for(var d;h!==a||n!==0&&h.nodeType!==3||(o=i+n),h!==r||s!==0&&h.nodeType!==3||(c=i+s),h.nodeType===3&&(i+=h.nodeValue.length),(d=h.firstChild)!==null;)m=h,h=d;for(;;){if(h===e)break t;if(m===a&&++g===n&&(o=i),m===r&&++f===s&&(c=i),(d=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=d}a=o===-1||c===-1?null:{start:o,end:c}}else a=null}a=a||{start:0,end:0}}else a=null;for(xo={focusedElem:e,selectionRange:a},ir=!1,Ze=t;Ze!==null;)if(t=Ze,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ze=e;else for(;Ze!==null;){switch(t=Ze,r=t.alternate,e=t.flags,t.tag){case 0:if(e&4&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)n=e[a],n.ref.impl=n.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&r!==null){e=void 0,a=t,n=r.memoizedProps,r=r.memoizedState,s=a.stateNode;try{var p=as(a.type,n);e=s.getSnapshotBeforeUpdate(p,r),s.__reactInternalSnapshotBeforeUpdate=e}catch(D){je(a,a.return,D)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)yo(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":yo(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(O(163))}if(e=t.sibling,e!==null){e.return=t.return,Ze=e;break}Ze=t.return}}function d0(e,t,a){var s=a.flags;switch(a.tag){case 0:case 11:case 15:Kt(e,a),s&4&&Jl(5,a);break;case 1:if(Kt(e,a),s&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(i){je(a,a.return,i)}else{var n=as(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(n,t,e.__reactInternalSnapshotBeforeUpdate)}catch(i){je(a,a.return,i)}}s&64&&r0(a),s&512&&vl(a,a.return);break;case 3:if(Kt(e,a),s&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{hm(e,t)}catch(i){je(a,a.return,i)}}break;case 27:t===null&&s&4&&u0(a);case 26:case 5:Kt(e,a),t===null&&s&4&&o0(a),s&512&&vl(a,a.return);break;case 12:Kt(e,a);break;case 31:Kt(e,a),s&4&&f0(e,a);break;case 13:Kt(e,a),s&4&&h0(e,a),s&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=Uh.bind(null,a),sx(e,a))));break;case 22:if(s=a.memoizedState!==null||Pt,!s){t=t!==null&&t.memoizedState!==null||Le,n=Pt;var r=Le;Pt=s,(Le=t)&&!r?Jt(e,a,(a.subtreeFlags&8772)!==0):Kt(e,a),Pt=n,Le=r}break;case 30:break;default:Kt(e,a)}}function m0(e){var t=e.alternate;t!==null&&(e.alternate=null,m0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&To(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ae=null,nt=!1;function Zt(e,t,a){for(a=a.child;a!==null;)g0(e,t,a),a=a.sibling}function g0(e,t,a){if(xt&&typeof xt.onCommitFiberUnmount=="function")try{xt.onCommitFiberUnmount($l,a)}catch{}switch(a.tag){case 26:Le||Lt(a,t),Zt(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Le||Lt(a,t);var s=Ae,n=nt;La(a.type)&&(Ae=a.stateNode,nt=!1),Zt(e,t,a),kl(a.stateNode),Ae=s,nt=n;break;case 5:Le||Lt(a,t);case 6:if(s=Ae,n=nt,Ae=null,Zt(e,t,a),Ae=s,nt=n,Ae!==null)if(nt)try{(Ae.nodeType===9?Ae.body:Ae.nodeName==="HTML"?Ae.ownerDocument.body:Ae).removeChild(a.stateNode)}catch(r){je(a,t,r)}else try{Ae.removeChild(a.stateNode)}catch(r){je(a,t,r)}break;case 18:Ae!==null&&(nt?(e=Ae,Vu(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Xs(e)):Vu(Ae,a.stateNode));break;case 4:s=Ae,n=nt,Ae=a.stateNode.containerInfo,nt=!0,Zt(e,t,a),Ae=s,nt=n;break;case 0:case 11:case 14:case 15:Oa(2,a,t),Le||Oa(4,a,t),Zt(e,t,a);break;case 1:Le||(Lt(a,t),s=a.stateNode,typeof s.componentWillUnmount=="function"&&i0(a,t,s)),Zt(e,t,a);break;case 21:Zt(e,t,a);break;case 22:Le=(s=Le)||a.memoizedState!==null,Zt(e,t,a),Le=s;break;default:Zt(e,t,a)}}function f0(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Xs(e)}catch(a){je(t,t.return,a)}}}function h0(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Xs(e)}catch(a){je(t,t.return,a)}}function Ch(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Au),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Au),t;default:throw Error(O(435,e.tag))}}function un(e,t){var a=Ch(e);t.forEach(function(s){if(!a.has(s)){a.add(s);var n=Bh.bind(null,e,s);s.then(n,n)}})}function st(e,t){var a=t.deletions;if(a!==null)for(var s=0;s<a.length;s++){var n=a[s],r=e,i=t,o=i;e:for(;o!==null;){switch(o.tag){case 27:if(La(o.type)){Ae=o.stateNode,nt=!1;break e}break;case 5:Ae=o.stateNode,nt=!1;break e;case 3:case 4:Ae=o.stateNode.containerInfo,nt=!0;break e}o=o.return}if(Ae===null)throw Error(O(160));g0(r,i,n),Ae=null,nt=!1,r=n.alternate,r!==null&&(r.return=null),n.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)x0(t,e),t=t.sibling}var Rt=null;function x0(e,t){var a=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:st(t,e),lt(e),s&4&&(Oa(3,e,e.return),Jl(3,e),Oa(5,e,e.return));break;case 1:st(t,e),lt(e),s&512&&(Le||a===null||Lt(a,a.return)),s&64&&Pt&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?s:a.concat(s))));break;case 26:var n=Rt;if(st(t,e),lt(e),s&512&&(Le||a===null||Lt(a,a.return)),s&4){var r=a!==null?a.memoizedState:null;if(s=e.memoizedState,a===null)if(s===null)if(e.stateNode===null){e:{s=e.type,a=e.memoizedProps,n=n.ownerDocument||n;t:switch(s){case"title":r=n.getElementsByTagName("title")[0],(!r||r[Ql]||r[Ie]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=n.createElement(s),n.head.insertBefore(r,n.querySelector("head > title"))),et(r,s,a),r[Ie]=e,Ke(r),s=r;break e;case"link":var i=Iu("link","href",n).get(s+(a.href||""));if(i){for(var o=0;o<i.length;o++)if(r=i[o],r.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&r.getAttribute("rel")===(a.rel==null?null:a.rel)&&r.getAttribute("title")===(a.title==null?null:a.title)&&r.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){i.splice(o,1);break t}}r=n.createElement(s),et(r,s,a),n.head.appendChild(r);break;case"meta":if(i=Iu("meta","content",n).get(s+(a.content||""))){for(o=0;o<i.length;o++)if(r=i[o],r.getAttribute("content")===(a.content==null?null:""+a.content)&&r.getAttribute("name")===(a.name==null?null:a.name)&&r.getAttribute("property")===(a.property==null?null:a.property)&&r.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&r.getAttribute("charset")===(a.charSet==null?null:a.charSet)){i.splice(o,1);break t}}r=n.createElement(s),et(r,s,a),n.head.appendChild(r);break;default:throw Error(O(468,s))}r[Ie]=e,Ke(r),s=r}e.stateNode=s}else Wu(n,e.type,e.stateNode);else e.stateNode=Fu(n,s,e.memoizedProps);else r!==s?(r===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):r.count--,s===null?Wu(n,e.type,e.stateNode):Fu(n,s,e.memoizedProps)):s===null&&e.stateNode!==null&&ri(e,e.memoizedProps,a.memoizedProps)}break;case 27:st(t,e),lt(e),s&512&&(Le||a===null||Lt(a,a.return)),a!==null&&s&4&&ri(e,e.memoizedProps,a.memoizedProps);break;case 5:if(st(t,e),lt(e),s&512&&(Le||a===null||Lt(a,a.return)),e.flags&32){n=e.stateNode;try{Bs(n,"")}catch(p){je(e,e.return,p)}}s&4&&e.stateNode!=null&&(n=e.memoizedProps,ri(e,n,a!==null?a.memoizedProps:n)),s&1024&&(oi=!0);break;case 6:if(st(t,e),lt(e),s&4){if(e.stateNode===null)throw Error(O(162));s=e.memoizedProps,a=e.stateNode;try{a.nodeValue=s}catch(p){je(e,e.return,p)}}break;case 3:if(Dn=null,n=Rt,Rt=lr(t.containerInfo),st(t,e),Rt=n,lt(e),s&4&&a!==null&&a.memoizedState.isDehydrated)try{Xs(t.containerInfo)}catch(p){je(e,e.return,p)}oi&&(oi=!1,b0(e));break;case 4:s=Rt,Rt=lr(e.stateNode.containerInfo),st(t,e),lt(e),Rt=s;break;case 12:st(t,e),lt(e);break;case 31:st(t,e),lt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,un(e,s)));break;case 13:st(t,e),lt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(jr=ht()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,un(e,s)));break;case 22:n=e.memoizedState!==null;var c=a!==null&&a.memoizedState!==null,g=Pt,f=Le;if(Pt=g||n,Le=f||c,st(t,e),Le=f,Pt=g,lt(e),s&8192)e:for(t=e.stateNode,t._visibility=n?t._visibility&-2:t._visibility|1,n&&(a===null||c||Pt||Le||Xa(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){c=a=t;try{if(r=c.stateNode,n)i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none";else{o=c.stateNode;var h=c.memoizedProps.style,m=h!=null&&h.hasOwnProperty("display")?h.display:null;o.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(p){je(c,c.return,p)}}}else if(t.tag===6){if(a===null){c=t;try{c.stateNode.nodeValue=n?"":c.memoizedProps}catch(p){je(c,c.return,p)}}}else if(t.tag===18){if(a===null){c=t;try{var d=c.stateNode;n?Qu(d,!0):Qu(c.stateNode,!1)}catch(p){je(c,c.return,p)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(a=s.retryQueue,a!==null&&(s.retryQueue=null,un(e,a))));break;case 19:st(t,e),lt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,un(e,s)));break;case 30:break;case 21:break;default:st(t,e),lt(e)}}function lt(e){var t=e.flags;if(t&2){try{for(var a,s=e.return;s!==null;){if(c0(s)){a=s;break}s=s.return}if(a==null)throw Error(O(160));switch(a.tag){case 27:var n=a.stateNode,r=ii(e);Fn(e,r,n);break;case 5:var i=a.stateNode;a.flags&32&&(Bs(i,""),a.flags&=-33);var o=ii(e);Fn(e,o,i);break;case 3:case 4:var c=a.stateNode.containerInfo,g=ii(e);io(e,g,c);break;default:throw Error(O(161))}}catch(f){je(e,e.return,f)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function b0(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;b0(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Kt(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)d0(e,t.alternate,t),t=t.sibling}function Xa(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Oa(4,t,t.return),Xa(t);break;case 1:Lt(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&i0(t,t.return,a),Xa(t);break;case 27:kl(t.stateNode);case 26:case 5:Lt(t,t.return),Xa(t);break;case 22:t.memoizedState===null&&Xa(t);break;case 30:Xa(t);break;default:Xa(t)}e=e.sibling}}function Jt(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,n=e,r=t,i=r.flags;switch(r.tag){case 0:case 11:case 15:Jt(n,r,a),Jl(4,r);break;case 1:if(Jt(n,r,a),s=r,n=s.stateNode,typeof n.componentDidMount=="function")try{n.componentDidMount()}catch(g){je(s,s.return,g)}if(s=r,n=s.updateQueue,n!==null){var o=s.stateNode;try{var c=n.shared.hiddenCallbacks;if(c!==null)for(n.shared.hiddenCallbacks=null,n=0;n<c.length;n++)fm(c[n],o)}catch(g){je(s,s.return,g)}}a&&i&64&&r0(r),vl(r,r.return);break;case 27:u0(r);case 26:case 5:Jt(n,r,a),a&&s===null&&i&4&&o0(r),vl(r,r.return);break;case 12:Jt(n,r,a);break;case 31:Jt(n,r,a),a&&i&4&&f0(n,r);break;case 13:Jt(n,r,a),a&&i&4&&h0(n,r);break;case 22:r.memoizedState===null&&Jt(n,r,a),vl(r,r.return);break;case 30:break;default:Jt(n,r,a)}t=t.sibling}}function uc(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Zl(a))}function dc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Zl(e))}function zt(e,t,a,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)y0(e,t,a,s),t=t.sibling}function y0(e,t,a,s){var n=t.flags;switch(t.tag){case 0:case 11:case 15:zt(e,t,a,s),n&2048&&Jl(9,t);break;case 1:zt(e,t,a,s);break;case 3:zt(e,t,a,s),n&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Zl(e)));break;case 12:if(n&2048){zt(e,t,a,s),e=t.stateNode;try{var r=t.memoizedProps,i=r.id,o=r.onPostCommit;typeof o=="function"&&o(i,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(c){je(t,t.return,c)}}else zt(e,t,a,s);break;case 31:zt(e,t,a,s);break;case 13:zt(e,t,a,s);break;case 23:break;case 22:r=t.stateNode,i=t.alternate,t.memoizedState!==null?r._visibility&2?zt(e,t,a,s):wl(e,t):r._visibility&2?zt(e,t,a,s):(r._visibility|=2,gs(e,t,a,s,(t.subtreeFlags&10256)!==0||!1)),n&2048&&uc(i,t);break;case 24:zt(e,t,a,s),n&2048&&dc(t.alternate,t);break;default:zt(e,t,a,s)}}function gs(e,t,a,s,n){for(n=n&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var r=e,i=t,o=a,c=s,g=i.flags;switch(i.tag){case 0:case 11:case 15:gs(r,i,o,c,n),Jl(8,i);break;case 23:break;case 22:var f=i.stateNode;i.memoizedState!==null?f._visibility&2?gs(r,i,o,c,n):wl(r,i):(f._visibility|=2,gs(r,i,o,c,n)),n&&g&2048&&uc(i.alternate,i);break;case 24:gs(r,i,o,c,n),n&&g&2048&&dc(i.alternate,i);break;default:gs(r,i,o,c,n)}t=t.sibling}}function wl(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,s=t,n=s.flags;switch(s.tag){case 22:wl(a,s),n&2048&&uc(s.alternate,s);break;case 24:wl(a,s),n&2048&&dc(s.alternate,s);break;default:wl(a,s)}t=t.sibling}}var dl=8192;function ds(e,t,a){if(e.subtreeFlags&dl)for(e=e.child;e!==null;)p0(e,t,a),e=e.sibling}function p0(e,t,a){switch(e.tag){case 26:ds(e,t,a),e.flags&dl&&e.memoizedState!==null&&hx(a,Rt,e.memoizedState,e.memoizedProps);break;case 5:ds(e,t,a);break;case 3:case 4:var s=Rt;Rt=lr(e.stateNode.containerInfo),ds(e,t,a),Rt=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=dl,dl=16777216,ds(e,t,a),dl=s):ds(e,t,a));break;default:ds(e,t,a)}}function v0(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function nl(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];Ze=s,j0(s,e)}v0(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)w0(e),e=e.sibling}function w0(e){switch(e.tag){case 0:case 11:case 15:nl(e),e.flags&2048&&Oa(9,e,e.return);break;case 3:nl(e);break;case 12:nl(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,_n(e)):nl(e);break;default:nl(e)}}function _n(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];Ze=s,j0(s,e)}v0(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Oa(8,t,t.return),_n(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,_n(t));break;default:_n(t)}e=e.sibling}}function j0(e,t){for(;Ze!==null;){var a=Ze;switch(a.tag){case 0:case 11:case 15:Oa(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var s=a.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:Zl(a.memoizedState.cache)}if(s=a.child,s!==null)s.return=a,Ze=s;else e:for(a=e;Ze!==null;){s=Ze;var n=s.sibling,r=s.return;if(m0(s),s===a){Ze=null;break e}if(n!==null){n.return=r,Ze=n;break e}Ze=r}}}var Mh={getCacheForType:function(e){var t=Pe(He),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return Pe(He).controller.signal}},Ah=typeof WeakMap=="function"?WeakMap:Map,ye=0,_e=null,ge=null,fe=0,we=0,dt=null,wa=!1,Is=!1,mc=!1,ua=0,Re=0,Ua=0,Ia=0,gc=0,ft=0,$s=0,jl=null,rt=null,oo=!1,jr=0,N0=0,In=1/0,Wn=null,Ca=null,Ye=0,Ma=null,Ys=null,na=0,co=0,uo=null,k0=null,Nl=0,mo=null;function yt(){return ye&2&&fe!==0?fe&-fe:le.T!==null?hc():zd()}function S0(){if(ft===0)if(!(fe&536870912)||xe){var e=tn;tn<<=1,!(tn&3932160)&&(tn=262144),ft=e}else ft=536870912;return e=wt.current,e!==null&&(e.flags|=32),ft}function ot(e,t,a){(e===_e&&(we===2||we===9)||e.cancelPendingCommit!==null)&&(Vs(e,0),ja(e,fe,ft,!1)),Vl(e,a),(!(ye&2)||e!==_e)&&(e===_e&&(!(ye&2)&&(Ia|=a),Re===4&&ja(e,fe,ft,!1)),$t(e))}function _0(e,t,a){if(ye&6)throw Error(O(327));var s=!a&&(t&127)===0&&(t&e.expiredLanes)===0||Yl(e,t),n=s?Rh(e,t):ci(e,t,!0),r=s;do{if(n===0){Is&&!s&&ja(e,t,0,!1);break}else{if(a=e.current.alternate,r&&!Th(a)){n=ci(e,t,!1),r=!1;continue}if(n===2){if(r=t,e.errorRecoveryDisabledLanes&r)var i=0;else i=e.pendingLanes&-536870913,i=i!==0?i:i&536870912?536870912:0;if(i!==0){t=i;e:{var o=e;n=jl;var c=o.current.memoizedState.isDehydrated;if(c&&(Vs(o,i).flags|=256),i=ci(o,i,!1),i!==2){if(mc&&!c){o.errorRecoveryDisabledLanes|=r,Ia|=r,n=4;break e}r=rt,rt=n,r!==null&&(rt===null?rt=r:rt.push.apply(rt,r))}n=i}if(r=!1,n!==2)continue}}if(n===1){Vs(e,0),ja(e,t,0,!0);break}e:{switch(s=e,r=n,r){case 0:case 1:throw Error(O(345));case 4:if((t&4194048)!==t)break;case 6:ja(s,t,ft,!wa);break e;case 2:rt=null;break;case 3:case 5:break;default:throw Error(O(329))}if((t&62914560)===t&&(n=jr+300-ht(),10<n)){if(ja(s,t,ft,!wa),dr(s,0,!0)!==0)break e;na=t,s.timeoutHandle=X0(Tu.bind(null,s,a,rt,Wn,oo,t,ft,Ia,$s,wa,r,"Throttled",-0,0),n);break e}Tu(s,a,rt,Wn,oo,t,ft,Ia,$s,wa,r,null,-0,0)}}break}while(!0);$t(e)}function Tu(e,t,a,s,n,r,i,o,c,g,f,h,m,d){if(e.timeoutHandle=-1,h=t.subtreeFlags,h&8192||(h&16785408)===16785408){h={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ta},p0(t,r,h);var p=(r&62914560)===r?jr-ht():(r&4194048)===r?N0-ht():0;if(p=xx(h,p),p!==null){na=r,e.cancelPendingCommit=p(Ru.bind(null,e,t,r,a,s,n,i,o,c,f,h,null,m,d)),ja(e,r,i,!g);return}}Ru(e,t,r,a,s,n,i,o,c)}function Th(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var s=0;s<a.length;s++){var n=a[s],r=n.getSnapshot;n=n.value;try{if(!vt(r(),n))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ja(e,t,a,s){t&=~gc,t&=~Ia,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var n=t;0<n;){var r=31-bt(n),i=1<<r;s[r]=-1,n&=~i}a!==0&&Md(e,a,t)}function Nr(){return ye&6?!0:(Fl(0),!1)}function fc(){if(ge!==null){if(we===0)var e=ge.return;else e=ge,aa=is=null,Po(e),zs=null,zl=0,e=ge;for(;e!==null;)n0(e.alternate,e),e=e.return;ge=null}}function Vs(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Wh(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),na=0,fc(),_e=e,ge=a=sa(e.current,null),fe=t,we=0,dt=null,wa=!1,Is=Yl(e,t),mc=!1,$s=ft=gc=Ia=Ua=Re=0,rt=jl=null,oo=!1,t&8&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var n=31-bt(s),r=1<<n;t|=e[n],s&=~r}return ua=t,hr(),a}function E0(e,t){oe=null,le.H=ql,t===Fs||t===br?(t=uu(),we=3):t===Xo?(t=uu(),we=4):we=t===oc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,dt=t,ge===null&&(Re=1,Kn(e,Dt(t,e.current)))}function D0(){var e=wt.current;return e===null?!0:(fe&4194048)===fe?Mt===null:(fe&62914560)===fe||fe&536870912?e===Mt:!1}function C0(){var e=le.H;return le.H=ql,e===null?ql:e}function M0(){var e=le.A;return le.A=Mh,e}function Pn(){Re=4,wa||(fe&4194048)!==fe&&wt.current!==null||(Is=!0),!(Ua&134217727)&&!(Ia&134217727)||_e===null||ja(_e,fe,ft,!1)}function ci(e,t,a){var s=ye;ye|=2;var n=C0(),r=M0();(_e!==e||fe!==t)&&(Wn=null,Vs(e,t)),t=!1;var i=Re;e:do try{if(we!==0&&ge!==null){var o=ge,c=dt;switch(we){case 8:fc(),i=6;break e;case 3:case 2:case 9:case 6:wt.current===null&&(t=!0);var g=we;if(we=0,dt=null,Es(e,o,c,g),a&&Is){i=0;break e}break;default:g=we,we=0,dt=null,Es(e,o,c,g)}}zh(),i=Re;break}catch(f){E0(e,f)}while(!0);return t&&e.shellSuspendCounter++,aa=is=null,ye=s,le.H=n,le.A=r,ge===null&&(_e=null,fe=0,hr()),i}function zh(){for(;ge!==null;)A0(ge)}function Rh(e,t){var a=ye;ye|=2;var s=C0(),n=M0();_e!==e||fe!==t?(Wn=null,In=ht()+500,Vs(e,t)):Is=Yl(e,t);e:do try{if(we!==0&&ge!==null){t=ge;var r=dt;t:switch(we){case 1:we=0,dt=null,Es(e,t,r,1);break;case 2:case 9:if(cu(r)){we=0,dt=null,zu(t);break}t=function(){we!==2&&we!==9||_e!==e||(we=7),$t(e)},r.then(t,t);break e;case 3:we=7;break e;case 4:we=5;break e;case 7:cu(r)?(we=0,dt=null,zu(t)):(we=0,dt=null,Es(e,t,r,7));break;case 5:var i=null;switch(ge.tag){case 26:i=ge.memoizedState;case 5:case 27:var o=ge;if(i?I0(i):o.stateNode.complete){we=0,dt=null;var c=o.sibling;if(c!==null)ge=c;else{var g=o.return;g!==null?(ge=g,kr(g)):ge=null}break t}}we=0,dt=null,Es(e,t,r,5);break;case 6:we=0,dt=null,Es(e,t,r,6);break;case 8:fc(),Re=6;break e;default:throw Error(O(462))}}qh();break}catch(f){E0(e,f)}while(!0);return aa=is=null,le.H=s,le.A=n,ye=a,ge!==null?0:(_e=null,fe=0,hr(),Re)}function qh(){for(;ge!==null&&!sf();)A0(ge)}function A0(e){var t=l0(e.alternate,e,ua);e.memoizedProps=e.pendingProps,t===null?kr(e):ge=t}function zu(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=_u(a,t,t.pendingProps,t.type,void 0,fe);break;case 11:t=_u(a,t,t.pendingProps,t.type.render,t.ref,fe);break;case 5:Po(t);default:n0(a,t),t=ge=nm(t,ua),t=l0(a,t,ua)}e.memoizedProps=e.pendingProps,t===null?kr(e):ge=t}function Es(e,t,a,s){aa=is=null,Po(t),zs=null,zl=0;var n=t.return;try{if(Nh(e,n,t,a,fe)){Re=1,Kn(e,Dt(a,e.current)),ge=null;return}}catch(r){if(n!==null)throw ge=n,r;Re=1,Kn(e,Dt(a,e.current)),ge=null;return}t.flags&32768?(xe||s===1?e=!0:Is||fe&536870912?e=!1:(wa=e=!0,(s===2||s===9||s===3||s===6)&&(s=wt.current,s!==null&&s.tag===13&&(s.flags|=16384))),T0(t,e)):kr(t)}function kr(e){var t=e;do{if(t.flags&32768){T0(t,wa);return}e=t.return;var a=_h(t.alternate,t,ua);if(a!==null){ge=a;return}if(t=t.sibling,t!==null){ge=t;return}ge=t=e}while(t!==null);Re===0&&(Re=5)}function T0(e,t){do{var a=Eh(e.alternate,e);if(a!==null){a.flags&=32767,ge=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){ge=e;return}ge=e=a}while(e!==null);Re=6,ge=null}function Ru(e,t,a,s,n,r,i,o,c){e.cancelPendingCommit=null;do Sr();while(Ye!==0);if(ye&6)throw Error(O(327));if(t!==null){if(t===e.current)throw Error(O(177));if(r=t.lanes|t.childLanes,r|=Lo,ff(e,a,r,i,o,c),e===_e&&(ge=_e=null,fe=0),Ys=t,Ma=e,na=a,co=r,uo=n,k0=s,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,Lh(Un,function(){return U0(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,t.subtreeFlags&13878||s){s=le.T,le.T=null,n=pe.p,pe.p=2,i=ye,ye|=4;try{Dh(e,t,a)}finally{ye=i,pe.p=n,le.T=s}}Ye=1,z0(),R0(),q0()}}function z0(){if(Ye===1){Ye=0;var e=Ma,t=Ys,a=(t.flags&13878)!==0;if(t.subtreeFlags&13878||a){a=le.T,le.T=null;var s=pe.p;pe.p=2;var n=ye;ye|=4;try{x0(t,e);var r=xo,i=Id(e.containerInfo),o=r.focusedElem,c=r.selectionRange;if(i!==o&&o&&o.ownerDocument&&Fd(o.ownerDocument.documentElement,o)){if(c!==null&&Bo(o)){var g=c.start,f=c.end;if(f===void 0&&(f=g),"selectionStart"in o)o.selectionStart=g,o.selectionEnd=Math.min(f,o.value.length);else{var h=o.ownerDocument||document,m=h&&h.defaultView||window;if(m.getSelection){var d=m.getSelection(),p=o.textContent.length,D=Math.min(c.start,p),T=c.end===void 0?D:Math.min(c.end,p);!d.extend&&D>T&&(i=T,T=D,D=i);var b=au(o,D),u=au(o,T);if(b&&u&&(d.rangeCount!==1||d.anchorNode!==b.node||d.anchorOffset!==b.offset||d.focusNode!==u.node||d.focusOffset!==u.offset)){var y=h.createRange();y.setStart(b.node,b.offset),d.removeAllRanges(),D>T?(d.addRange(y),d.extend(u.node,u.offset)):(y.setEnd(u.node,u.offset),d.addRange(y))}}}}for(h=[],d=o;d=d.parentNode;)d.nodeType===1&&h.push({element:d,left:d.scrollLeft,top:d.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<h.length;o++){var k=h[o];k.element.scrollLeft=k.left,k.element.scrollTop=k.top}}ir=!!ho,xo=ho=null}finally{ye=n,pe.p=s,le.T=a}}e.current=t,Ye=2}}function R0(){if(Ye===2){Ye=0;var e=Ma,t=Ys,a=(t.flags&8772)!==0;if(t.subtreeFlags&8772||a){a=le.T,le.T=null;var s=pe.p;pe.p=2;var n=ye;ye|=4;try{d0(e,t.alternate,t)}finally{ye=n,pe.p=s,le.T=a}}Ye=3}}function q0(){if(Ye===4||Ye===3){Ye=0,lf();var e=Ma,t=Ys,a=na,s=k0;t.subtreeFlags&10256||t.flags&10256?Ye=5:(Ye=0,Ys=Ma=null,O0(e,e.pendingLanes));var n=e.pendingLanes;if(n===0&&(Ca=null),Ao(a),t=t.stateNode,xt&&typeof xt.onCommitFiberRoot=="function")try{xt.onCommitFiberRoot($l,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=le.T,n=pe.p,pe.p=2,le.T=null;try{for(var r=e.onRecoverableError,i=0;i<s.length;i++){var o=s[i];r(o.value,{componentStack:o.stack})}}finally{le.T=t,pe.p=n}}na&3&&Sr(),$t(e),n=e.pendingLanes,a&261930&&n&42?e===mo?Nl++:(Nl=0,mo=e):Nl=0,Fl(0)}}function O0(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Zl(t)))}function Sr(){return z0(),R0(),q0(),U0()}function U0(){if(Ye!==5)return!1;var e=Ma,t=co;co=0;var a=Ao(na),s=le.T,n=pe.p;try{pe.p=32>a?32:a,le.T=null,a=uo,uo=null;var r=Ma,i=na;if(Ye=0,Ys=Ma=null,na=0,ye&6)throw Error(O(331));var o=ye;if(ye|=4,w0(r.current),y0(r,r.current,i,a),ye=o,Fl(0,!1),xt&&typeof xt.onPostCommitFiberRoot=="function")try{xt.onPostCommitFiberRoot($l,r)}catch{}return!0}finally{pe.p=n,le.T=s,O0(e,t)}}function qu(e,t,a){t=Dt(a,t),t=lo(e.stateNode,t,2),e=Da(e,t,2),e!==null&&(Vl(e,2),$t(e))}function je(e,t,a){if(e.tag===3)qu(e,e,a);else for(;t!==null;){if(t.tag===3){qu(t,e,a);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Ca===null||!Ca.has(s))){e=Dt(a,e),a=Wm(2),s=Da(t,a,2),s!==null&&(Pm(a,s,t,e),Vl(s,2),$t(s));break}}t=t.return}}function ui(e,t,a){var s=e.pingCache;if(s===null){s=e.pingCache=new Ah;var n=new Set;s.set(t,n)}else n=s.get(t),n===void 0&&(n=new Set,s.set(t,n));n.has(a)||(mc=!0,n.add(a),e=Oh.bind(null,e,t,a),t.then(e,e))}function Oh(e,t,a){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,_e===e&&(fe&a)===a&&(Re===4||Re===3&&(fe&62914560)===fe&&300>ht()-jr?!(ye&2)&&Vs(e,0):gc|=a,$s===fe&&($s=0)),$t(e)}function B0(e,t){t===0&&(t=Cd()),e=rs(e,t),e!==null&&(Vl(e,t),$t(e))}function Uh(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),B0(e,a)}function Bh(e,t){var a=0;switch(e.tag){case 31:case 13:var s=e.stateNode,n=e.memoizedState;n!==null&&(a=n.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(O(314))}s!==null&&s.delete(t),B0(e,a)}function Lh(e,t){return Co(e,t)}var er=null,fs=null,go=!1,tr=!1,di=!1,Na=0;function $t(e){e!==fs&&e.next===null&&(fs===null?er=fs=e:fs=fs.next=e),tr=!0,go||(go=!0,Gh())}function Fl(e,t){if(!di&&tr){di=!0;do for(var a=!1,s=er;s!==null;){if(e!==0){var n=s.pendingLanes;if(n===0)var r=0;else{var i=s.suspendedLanes,o=s.pingedLanes;r=(1<<31-bt(42|e)+1)-1,r&=n&~(i&~o),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(a=!0,Ou(s,r))}else r=fe,r=dr(s,s===_e?r:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),!(r&3)||Yl(s,r)||(a=!0,Ou(s,r));s=s.next}while(a);di=!1}}function Hh(){L0()}function L0(){tr=go=!1;var e=0;Na!==0&&Ih()&&(e=Na);for(var t=ht(),a=null,s=er;s!==null;){var n=s.next,r=H0(s,t);r===0?(s.next=null,a===null?er=n:a.next=n,n===null&&(fs=a)):(a=s,(e!==0||r&3)&&(tr=!0)),s=n}Ye!==0&&Ye!==5||Fl(e),Na!==0&&(Na=0)}function H0(e,t){for(var a=e.suspendedLanes,s=e.pingedLanes,n=e.expirationTimes,r=e.pendingLanes&-62914561;0<r;){var i=31-bt(r),o=1<<i,c=n[i];c===-1?(!(o&a)||o&s)&&(n[i]=gf(o,t)):c<=t&&(e.expiredLanes|=o),r&=~o}if(t=_e,a=fe,a=dr(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,a===0||e===t&&(we===2||we===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&Lr(s),e.callbackNode=null,e.callbackPriority=0;if(!(a&3)||Yl(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(s!==null&&Lr(s),Ao(a)){case 2:case 8:a=Ed;break;case 32:a=Un;break;case 268435456:a=Dd;break;default:a=Un}return s=G0.bind(null,e),a=Co(a,s),e.callbackPriority=t,e.callbackNode=a,t}return s!==null&&s!==null&&Lr(s),e.callbackPriority=2,e.callbackNode=null,2}function G0(e,t){if(Ye!==0&&Ye!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Sr()&&e.callbackNode!==a)return null;var s=fe;return s=dr(e,e===_e?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(_0(e,s,t),H0(e,ht()),e.callbackNode!=null&&e.callbackNode===a?G0.bind(null,e):null)}function Ou(e,t){if(Sr())return null;_0(e,t,!0)}function Gh(){Ph(function(){ye&6?Co(_d,Hh):L0()})}function hc(){if(Na===0){var e=Ls;e===0&&(e=en,en<<=1,!(en&261888)&&(en=256)),Na=e}return Na}function Uu(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:bn(""+e)}function Bu(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function $h(e,t,a,s,n){if(t==="submit"&&a&&a.stateNode===n){var r=Uu((n[ct]||null).action),i=s.submitter;i&&(t=(t=i[ct]||null)?Uu(t.formAction):i.getAttribute("formAction"),t!==null&&(r=t,i=null));var o=new mr("action","action",null,s,n);e.push({event:o,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(Na!==0){var c=i?Bu(n,i):new FormData(n);ao(a,{pending:!0,data:c,method:n.method,action:r},null,c)}}else typeof r=="function"&&(o.preventDefault(),c=i?Bu(n,i):new FormData(n),ao(a,{pending:!0,data:c,method:n.method,action:r},r,c))},currentTarget:n}]})}}for(var mi=0;mi<Vi.length;mi++){var gi=Vi[mi],Yh=gi.toLowerCase(),Vh=gi[0].toUpperCase()+gi.slice(1);qt(Yh,"on"+Vh)}qt(Pd,"onAnimationEnd");qt(em,"onAnimationIteration");qt(tm,"onAnimationStart");qt("dblclick","onDoubleClick");qt("focusin","onFocus");qt("focusout","onBlur");qt(rh,"onTransitionRun");qt(ih,"onTransitionStart");qt(oh,"onTransitionCancel");qt(am,"onTransitionEnd");Us("onMouseEnter",["mouseout","mouseover"]);Us("onMouseLeave",["mouseout","mouseover"]);Us("onPointerEnter",["pointerout","pointerover"]);Us("onPointerLeave",["pointerout","pointerover"]);ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ss("onBeforeInput",["compositionend","keypress","textInput","paste"]);ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qh=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ol));function $0(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var s=e[a],n=s.event;s=s.listeners;e:{var r=void 0;if(t)for(var i=s.length-1;0<=i;i--){var o=s[i],c=o.instance,g=o.currentTarget;if(o=o.listener,c!==r&&n.isPropagationStopped())break e;r=o,n.currentTarget=g;try{r(n)}catch(f){Ln(f)}n.currentTarget=null,r=c}else for(i=0;i<s.length;i++){if(o=s[i],c=o.instance,g=o.currentTarget,o=o.listener,c!==r&&n.isPropagationStopped())break e;r=o,n.currentTarget=g;try{r(n)}catch(f){Ln(f)}n.currentTarget=null,r=c}}}}function me(e,t){var a=t[Oi];a===void 0&&(a=t[Oi]=new Set);var s=e+"__bubble";a.has(s)||(Y0(t,e,2,!1),a.add(s))}function fi(e,t,a){var s=0;t&&(s|=4),Y0(a,e,s,t)}var dn="_reactListening"+Math.random().toString(36).slice(2);function xc(e){if(!e[dn]){e[dn]=!0,Rd.forEach(function(a){a!=="selectionchange"&&(Qh.has(a)||fi(a,!1,e),fi(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[dn]||(t[dn]=!0,fi("selectionchange",!1,t))}}function Y0(e,t,a,s){switch(ag(t)){case 2:var n=px;break;case 8:n=vx;break;default:n=vc}a=n.bind(null,t,a,e),n=void 0,!Gi||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),s?n!==void 0?e.addEventListener(t,a,{capture:!0,passive:n}):e.addEventListener(t,a,!0):n!==void 0?e.addEventListener(t,a,{passive:n}):e.addEventListener(t,a,!1)}function hi(e,t,a,s,n){var r=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var i=s.tag;if(i===3||i===4){var o=s.stateNode.containerInfo;if(o===n)break;if(i===4)for(i=s.return;i!==null;){var c=i.tag;if((c===3||c===4)&&i.stateNode.containerInfo===n)return;i=i.return}for(;o!==null;){if(i=ys(o),i===null)return;if(c=i.tag,c===5||c===6||c===26||c===27){s=r=i;continue e}o=o.parentNode}}s=s.return}$d(function(){var g=r,f=Ro(a),h=[];e:{var m=sm.get(e);if(m!==void 0){var d=mr,p=e;switch(e){case"keypress":if(pn(a)===0)break e;case"keydown":case"keyup":d=Bf;break;case"focusin":p="focus",d=Vr;break;case"focusout":p="blur",d=Vr;break;case"beforeblur":case"afterblur":d=Vr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=Xc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=_f;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=Gf;break;case Pd:case em:case tm:d=Cf;break;case am:d=Yf;break;case"scroll":case"scrollend":d=kf;break;case"wheel":d=Qf;break;case"copy":case"cut":case"paste":d=Af;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=Kc;break;case"toggle":case"beforetoggle":d=Zf}var D=(t&4)!==0,T=!D&&(e==="scroll"||e==="scrollend"),b=D?m!==null?m+"Capture":null:m;D=[];for(var u=g,y;u!==null;){var k=u;if(y=k.stateNode,k=k.tag,k!==5&&k!==26&&k!==27||y===null||b===null||(k=Dl(u,b),k!=null&&D.push(Ul(u,k,y))),T)break;u=u.return}0<D.length&&(m=new d(m,p,null,a,f),h.push({event:m,listeners:D}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",d=e==="mouseout"||e==="pointerout",m&&a!==Hi&&(p=a.relatedTarget||a.fromElement)&&(ys(p)||p[Zs]))break e;if((d||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,d?(p=a.relatedTarget||a.toElement,d=g,p=p?ys(p):null,p!==null&&(T=Gl(p),D=p.tag,p!==T||D!==5&&D!==27&&D!==6)&&(p=null)):(d=null,p=g),d!==p)){if(D=Xc,k="onMouseLeave",b="onMouseEnter",u="mouse",(e==="pointerout"||e==="pointerover")&&(D=Kc,k="onPointerLeave",b="onPointerEnter",u="pointer"),T=d==null?m:cl(d),y=p==null?m:cl(p),m=new D(k,u+"leave",d,a,f),m.target=T,m.relatedTarget=y,k=null,ys(f)===g&&(D=new D(b,u+"enter",p,a,f),D.target=y,D.relatedTarget=T,k=D),T=k,d&&p)t:{for(D=Xh,b=d,u=p,y=0,k=b;k;k=D(k))y++;k=0;for(var M=u;M;M=D(M))k++;for(;0<y-k;)b=D(b),y--;for(;0<k-y;)u=D(u),k--;for(;y--;){if(b===u||u!==null&&b===u.alternate){D=b;break t}b=D(b),u=D(u)}D=null}else D=null;d!==null&&Lu(h,m,d,D,!1),p!==null&&T!==null&&Lu(h,T,p,D,!0)}}e:{if(m=g?cl(g):window,d=m.nodeName&&m.nodeName.toLowerCase(),d==="select"||d==="input"&&m.type==="file")var L=Wc;else if(Ic(m))if(Kd)L=sh;else{L=th;var z=eh}else d=m.nodeName,!d||d.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?g&&zo(g.elementType)&&(L=Wc):L=ah;if(L&&(L=L(e,g))){Zd(h,L,a,f);break e}z&&z(e,m,g),e==="focusout"&&g&&m.type==="number"&&g.memoizedProps.value!=null&&Li(m,"number",m.value)}switch(z=g?cl(g):window,e){case"focusin":(Ic(z)||z.contentEditable==="true")&&(ws=z,$i=g,fl=null);break;case"focusout":fl=$i=ws=null;break;case"mousedown":Yi=!0;break;case"contextmenu":case"mouseup":case"dragend":Yi=!1,su(h,a,f);break;case"selectionchange":if(nh)break;case"keydown":case"keyup":su(h,a,f)}var G;if(Uo)e:{switch(e){case"compositionstart":var V="onCompositionStart";break e;case"compositionend":V="onCompositionEnd";break e;case"compositionupdate":V="onCompositionUpdate";break e}V=void 0}else vs?Qd(e,a)&&(V="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(V="onCompositionStart");V&&(Vd&&a.locale!=="ko"&&(vs||V!=="onCompositionStart"?V==="onCompositionEnd"&&vs&&(G=Yd()):(va=f,qo="value"in va?va.value:va.textContent,vs=!0)),z=ar(g,V),0<z.length&&(V=new Zc(V,e,null,a,f),h.push({event:V,listeners:z}),G?V.data=G:(G=Xd(a),G!==null&&(V.data=G)))),(G=Jf?Ff(e,a):If(e,a))&&(V=ar(g,"onBeforeInput"),0<V.length&&(z=new Zc("onBeforeInput","beforeinput",null,a,f),h.push({event:z,listeners:V}),z.data=G)),$h(h,e,g,a,f)}$0(h,t)})}function Ul(e,t,a){return{instance:e,listener:t,currentTarget:a}}function ar(e,t){for(var a=t+"Capture",s=[];e!==null;){var n=e,r=n.stateNode;if(n=n.tag,n!==5&&n!==26&&n!==27||r===null||(n=Dl(e,a),n!=null&&s.unshift(Ul(e,n,r)),n=Dl(e,t),n!=null&&s.push(Ul(e,n,r))),e.tag===3)return s;e=e.return}return[]}function Xh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Lu(e,t,a,s,n){for(var r=t._reactName,i=[];a!==null&&a!==s;){var o=a,c=o.alternate,g=o.stateNode;if(o=o.tag,c!==null&&c===s)break;o!==5&&o!==26&&o!==27||g===null||(c=g,n?(g=Dl(a,r),g!=null&&i.unshift(Ul(a,g,c))):n||(g=Dl(a,r),g!=null&&i.push(Ul(a,g,c)))),a=a.return}i.length!==0&&e.push({event:t,listeners:i})}var Zh=/\r\n?/g,Kh=/\u0000|\uFFFD/g;function Hu(e){return(typeof e=="string"?e:""+e).replace(Zh,`
`).replace(Kh,"")}function V0(e,t){return t=Hu(t),Hu(e)===t}function ke(e,t,a,s,n,r){switch(a){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||Bs(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&Bs(e,""+s);break;case"className":sn(e,"class",s);break;case"tabIndex":sn(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":sn(e,a,s);break;case"style":Gd(e,s,r);break;case"data":if(t!=="object"){sn(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=bn(""+s),e.setAttribute(a,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(a==="formAction"?(t!=="input"&&ke(e,t,"name",n.name,n,null),ke(e,t,"formEncType",n.formEncType,n,null),ke(e,t,"formMethod",n.formMethod,n,null),ke(e,t,"formTarget",n.formTarget,n,null)):(ke(e,t,"encType",n.encType,n,null),ke(e,t,"method",n.method,n,null),ke(e,t,"target",n.target,n,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=bn(""+s),e.setAttribute(a,s);break;case"onClick":s!=null&&(e.onclick=ta);break;case"onScroll":s!=null&&me("scroll",e);break;case"onScrollEnd":s!=null&&me("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(O(61));if(a=s.__html,a!=null){if(n.children!=null)throw Error(O(60));e.innerHTML=a}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}a=bn(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""+s):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":s===!0?e.setAttribute(a,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,s):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(a,s):e.removeAttribute(a);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(a):e.setAttribute(a,s);break;case"popover":me("beforetoggle",e),me("toggle",e),xn(e,"popover",s);break;case"xlinkActuate":Qt(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Qt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Qt(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Qt(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Qt(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Qt(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Qt(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Qt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Qt(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":xn(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=jf.get(a)||a,xn(e,a,s))}}function fo(e,t,a,s,n,r){switch(a){case"style":Gd(e,s,r);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(O(61));if(a=s.__html,a!=null){if(n.children!=null)throw Error(O(60));e.innerHTML=a}}break;case"children":typeof s=="string"?Bs(e,s):(typeof s=="number"||typeof s=="bigint")&&Bs(e,""+s);break;case"onScroll":s!=null&&me("scroll",e);break;case"onScrollEnd":s!=null&&me("scrollend",e);break;case"onClick":s!=null&&(e.onclick=ta);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!qd.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(n=a.endsWith("Capture"),t=a.slice(2,n?a.length-7:void 0),r=e[ct]||null,r=r!=null?r[a]:null,typeof r=="function"&&e.removeEventListener(t,r,n),typeof s=="function")){typeof r!="function"&&r!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,s,n);break e}a in e?e[a]=s:s===!0?e.setAttribute(a,""):xn(e,a,s)}}}function et(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":me("error",e),me("load",e);var s=!1,n=!1,r;for(r in a)if(a.hasOwnProperty(r)){var i=a[r];if(i!=null)switch(r){case"src":s=!0;break;case"srcSet":n=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(O(137,t));default:ke(e,t,r,i,a,null)}}n&&ke(e,t,"srcSet",a.srcSet,a,null),s&&ke(e,t,"src",a.src,a,null);return;case"input":me("invalid",e);var o=r=i=n=null,c=null,g=null;for(s in a)if(a.hasOwnProperty(s)){var f=a[s];if(f!=null)switch(s){case"name":n=f;break;case"type":i=f;break;case"checked":c=f;break;case"defaultChecked":g=f;break;case"value":r=f;break;case"defaultValue":o=f;break;case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(O(137,t));break;default:ke(e,t,s,f,a,null)}}Bd(e,r,o,c,g,i,n,!1);return;case"select":me("invalid",e),s=i=r=null;for(n in a)if(a.hasOwnProperty(n)&&(o=a[n],o!=null))switch(n){case"value":r=o;break;case"defaultValue":i=o;break;case"multiple":s=o;default:ke(e,t,n,o,a,null)}t=r,a=i,e.multiple=!!s,t!=null?Ms(e,!!s,t,!1):a!=null&&Ms(e,!!s,a,!0);return;case"textarea":me("invalid",e),r=n=s=null;for(i in a)if(a.hasOwnProperty(i)&&(o=a[i],o!=null))switch(i){case"value":s=o;break;case"defaultValue":n=o;break;case"children":r=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(O(91));break;default:ke(e,t,i,o,a,null)}Hd(e,s,n,r);return;case"option":for(c in a)if(a.hasOwnProperty(c)&&(s=a[c],s!=null))switch(c){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:ke(e,t,c,s,a,null)}return;case"dialog":me("beforetoggle",e),me("toggle",e),me("cancel",e),me("close",e);break;case"iframe":case"object":me("load",e);break;case"video":case"audio":for(s=0;s<Ol.length;s++)me(Ol[s],e);break;case"image":me("error",e),me("load",e);break;case"details":me("toggle",e);break;case"embed":case"source":case"link":me("error",e),me("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(g in a)if(a.hasOwnProperty(g)&&(s=a[g],s!=null))switch(g){case"children":case"dangerouslySetInnerHTML":throw Error(O(137,t));default:ke(e,t,g,s,a,null)}return;default:if(zo(t)){for(f in a)a.hasOwnProperty(f)&&(s=a[f],s!==void 0&&fo(e,t,f,s,a,void 0));return}}for(o in a)a.hasOwnProperty(o)&&(s=a[o],s!=null&&ke(e,t,o,s,a,null))}function Jh(e,t,a,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var n=null,r=null,i=null,o=null,c=null,g=null,f=null;for(d in a){var h=a[d];if(a.hasOwnProperty(d)&&h!=null)switch(d){case"checked":break;case"value":break;case"defaultValue":c=h;default:s.hasOwnProperty(d)||ke(e,t,d,null,s,h)}}for(var m in s){var d=s[m];if(h=a[m],s.hasOwnProperty(m)&&(d!=null||h!=null))switch(m){case"type":r=d;break;case"name":n=d;break;case"checked":g=d;break;case"defaultChecked":f=d;break;case"value":i=d;break;case"defaultValue":o=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(O(137,t));break;default:d!==h&&ke(e,t,m,d,s,h)}}Bi(e,i,o,c,g,f,r,n);return;case"select":d=i=o=m=null;for(r in a)if(c=a[r],a.hasOwnProperty(r)&&c!=null)switch(r){case"value":break;case"multiple":d=c;default:s.hasOwnProperty(r)||ke(e,t,r,null,s,c)}for(n in s)if(r=s[n],c=a[n],s.hasOwnProperty(n)&&(r!=null||c!=null))switch(n){case"value":m=r;break;case"defaultValue":o=r;break;case"multiple":i=r;default:r!==c&&ke(e,t,n,r,s,c)}t=o,a=i,s=d,m!=null?Ms(e,!!a,m,!1):!!s!=!!a&&(t!=null?Ms(e,!!a,t,!0):Ms(e,!!a,a?[]:"",!1));return;case"textarea":d=m=null;for(o in a)if(n=a[o],a.hasOwnProperty(o)&&n!=null&&!s.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:ke(e,t,o,null,s,n)}for(i in s)if(n=s[i],r=a[i],s.hasOwnProperty(i)&&(n!=null||r!=null))switch(i){case"value":m=n;break;case"defaultValue":d=n;break;case"children":break;case"dangerouslySetInnerHTML":if(n!=null)throw Error(O(91));break;default:n!==r&&ke(e,t,i,n,s,r)}Ld(e,m,d);return;case"option":for(var p in a)if(m=a[p],a.hasOwnProperty(p)&&m!=null&&!s.hasOwnProperty(p))switch(p){case"selected":e.selected=!1;break;default:ke(e,t,p,null,s,m)}for(c in s)if(m=s[c],d=a[c],s.hasOwnProperty(c)&&m!==d&&(m!=null||d!=null))switch(c){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:ke(e,t,c,m,s,d)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var D in a)m=a[D],a.hasOwnProperty(D)&&m!=null&&!s.hasOwnProperty(D)&&ke(e,t,D,null,s,m);for(g in s)if(m=s[g],d=a[g],s.hasOwnProperty(g)&&m!==d&&(m!=null||d!=null))switch(g){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(O(137,t));break;default:ke(e,t,g,m,s,d)}return;default:if(zo(t)){for(var T in a)m=a[T],a.hasOwnProperty(T)&&m!==void 0&&!s.hasOwnProperty(T)&&fo(e,t,T,void 0,s,m);for(f in s)m=s[f],d=a[f],!s.hasOwnProperty(f)||m===d||m===void 0&&d===void 0||fo(e,t,f,m,s,d);return}}for(var b in a)m=a[b],a.hasOwnProperty(b)&&m!=null&&!s.hasOwnProperty(b)&&ke(e,t,b,null,s,m);for(h in s)m=s[h],d=a[h],!s.hasOwnProperty(h)||m===d||m==null&&d==null||ke(e,t,h,m,s,d)}function Gu(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Fh(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),s=0;s<a.length;s++){var n=a[s],r=n.transferSize,i=n.initiatorType,o=n.duration;if(r&&o&&Gu(i)){for(i=0,o=n.responseEnd,s+=1;s<a.length;s++){var c=a[s],g=c.startTime;if(g>o)break;var f=c.transferSize,h=c.initiatorType;f&&Gu(h)&&(c=c.responseEnd,i+=f*(c<o?1:(o-g)/(c-g)))}if(--s,t+=8*(r+i)/(n.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var ho=null,xo=null;function sr(e){return e.nodeType===9?e:e.ownerDocument}function $u(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Q0(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function bo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var xi=null;function Ih(){var e=window.event;return e&&e.type==="popstate"?e===xi?!1:(xi=e,!0):(xi=null,!1)}var X0=typeof setTimeout=="function"?setTimeout:void 0,Wh=typeof clearTimeout=="function"?clearTimeout:void 0,Yu=typeof Promise=="function"?Promise:void 0,Ph=typeof queueMicrotask=="function"?queueMicrotask:typeof Yu<"u"?function(e){return Yu.resolve(null).then(e).catch(ex)}:X0;function ex(e){setTimeout(function(){throw e})}function La(e){return e==="head"}function Vu(e,t){var a=t,s=0;do{var n=a.nextSibling;if(e.removeChild(a),n&&n.nodeType===8)if(a=n.data,a==="/$"||a==="/&"){if(s===0){e.removeChild(n),Xs(t);return}s--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")s++;else if(a==="html")kl(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,kl(a);for(var r=a.firstChild;r;){var i=r.nextSibling,o=r.nodeName;r[Ql]||o==="SCRIPT"||o==="STYLE"||o==="LINK"&&r.rel.toLowerCase()==="stylesheet"||a.removeChild(r),r=i}}else a==="body"&&kl(e.ownerDocument.body);a=n}while(a);Xs(t)}function Qu(e,t){var a=e;e=0;do{var s=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),s&&s.nodeType===8)if(a=s.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=s}while(a)}function yo(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":yo(a),To(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function tx(e,t,a,s){for(;e.nodeType===1;){var n=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[Ql])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(r=e.getAttribute("rel"),r==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(r!==n.rel||e.getAttribute("href")!==(n.href==null||n.href===""?null:n.href)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin)||e.getAttribute("title")!==(n.title==null?null:n.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(r=e.getAttribute("src"),(r!==(n.src==null?null:n.src)||e.getAttribute("type")!==(n.type==null?null:n.type)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var r=n.name==null?null:""+n.name;if(n.type==="hidden"&&e.getAttribute("name")===r)return e}else return e;if(e=At(e.nextSibling),e===null)break}return null}function ax(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=At(e.nextSibling),e===null))return null;return e}function Z0(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=At(e.nextSibling),e===null))return null;return e}function po(e){return e.data==="$?"||e.data==="$~"}function vo(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function sx(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var s=function(){t(),a.removeEventListener("DOMContentLoaded",s)};a.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function At(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var wo=null;function Xu(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return At(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function Zu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function K0(e,t,a){switch(t=sr(a),e){case"html":if(e=t.documentElement,!e)throw Error(O(452));return e;case"head":if(e=t.head,!e)throw Error(O(453));return e;case"body":if(e=t.body,!e)throw Error(O(454));return e;default:throw Error(O(451))}}function kl(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);To(e)}var Tt=new Map,Ku=new Set;function lr(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var da=pe.d;pe.d={f:lx,r:nx,D:rx,C:ix,L:ox,m:cx,X:dx,S:ux,M:mx};function lx(){var e=da.f(),t=Nr();return e||t}function nx(e){var t=Ks(e);t!==null&&t.tag===5&&t.type==="form"?Gm(t):da.r(e)}var Ws=typeof document>"u"?null:document;function J0(e,t,a){var s=Ws;if(s&&typeof t=="string"&&t){var n=Et(t);n='link[rel="'+e+'"][href="'+n+'"]',typeof a=="string"&&(n+='[crossorigin="'+a+'"]'),Ku.has(n)||(Ku.add(n),e={rel:e,crossOrigin:a,href:t},s.querySelector(n)===null&&(t=s.createElement("link"),et(t,"link",e),Ke(t),s.head.appendChild(t)))}}function rx(e){da.D(e),J0("dns-prefetch",e,null)}function ix(e,t){da.C(e,t),J0("preconnect",e,t)}function ox(e,t,a){da.L(e,t,a);var s=Ws;if(s&&e&&t){var n='link[rel="preload"][as="'+Et(t)+'"]';t==="image"&&a&&a.imageSrcSet?(n+='[imagesrcset="'+Et(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(n+='[imagesizes="'+Et(a.imageSizes)+'"]')):n+='[href="'+Et(e)+'"]';var r=n;switch(t){case"style":r=Qs(e);break;case"script":r=Ps(e)}Tt.has(r)||(e=Me({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Tt.set(r,e),s.querySelector(n)!==null||t==="style"&&s.querySelector(Il(r))||t==="script"&&s.querySelector(Wl(r))||(t=s.createElement("link"),et(t,"link",e),Ke(t),s.head.appendChild(t)))}}function cx(e,t){da.m(e,t);var a=Ws;if(a&&e){var s=t&&typeof t.as=="string"?t.as:"script",n='link[rel="modulepreload"][as="'+Et(s)+'"][href="'+Et(e)+'"]',r=n;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=Ps(e)}if(!Tt.has(r)&&(e=Me({rel:"modulepreload",href:e},t),Tt.set(r,e),a.querySelector(n)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Wl(r)))return}s=a.createElement("link"),et(s,"link",e),Ke(s),a.head.appendChild(s)}}}function ux(e,t,a){da.S(e,t,a);var s=Ws;if(s&&e){var n=Cs(s).hoistableStyles,r=Qs(e);t=t||"default";var i=n.get(r);if(!i){var o={loading:0,preload:null};if(i=s.querySelector(Il(r)))o.loading=5;else{e=Me({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Tt.get(r))&&bc(e,a);var c=i=s.createElement("link");Ke(c),et(c,"link",e),c._p=new Promise(function(g,f){c.onload=g,c.onerror=f}),c.addEventListener("load",function(){o.loading|=1}),c.addEventListener("error",function(){o.loading|=2}),o.loading|=4,En(i,t,s)}i={type:"stylesheet",instance:i,count:1,state:o},n.set(r,i)}}}function dx(e,t){da.X(e,t);var a=Ws;if(a&&e){var s=Cs(a).hoistableScripts,n=Ps(e),r=s.get(n);r||(r=a.querySelector(Wl(n)),r||(e=Me({src:e,async:!0},t),(t=Tt.get(n))&&yc(e,t),r=a.createElement("script"),Ke(r),et(r,"link",e),a.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},s.set(n,r))}}function mx(e,t){da.M(e,t);var a=Ws;if(a&&e){var s=Cs(a).hoistableScripts,n=Ps(e),r=s.get(n);r||(r=a.querySelector(Wl(n)),r||(e=Me({src:e,async:!0,type:"module"},t),(t=Tt.get(n))&&yc(e,t),r=a.createElement("script"),Ke(r),et(r,"link",e),a.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},s.set(n,r))}}function Ju(e,t,a,s){var n=(n=Sa.current)?lr(n):null;if(!n)throw Error(O(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=Qs(a.href),a=Cs(n).hoistableStyles,s=a.get(t),s||(s={type:"style",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Qs(a.href);var r=Cs(n).hoistableStyles,i=r.get(e);if(i||(n=n.ownerDocument||n,i={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(e,i),(r=n.querySelector(Il(e)))&&!r._p&&(i.instance=r,i.state.loading=5),Tt.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Tt.set(e,a),r||gx(n,e,a,i.state))),t&&s===null)throw Error(O(528,""));return i}if(t&&s!==null)throw Error(O(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Ps(a),a=Cs(n).hoistableScripts,s=a.get(t),s||(s={type:"script",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(O(444,e))}}function Qs(e){return'href="'+Et(e)+'"'}function Il(e){return'link[rel="stylesheet"]['+e+"]"}function F0(e){return Me({},e,{"data-precedence":e.precedence,precedence:null})}function gx(e,t,a,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),et(t,"link",a),Ke(t),e.head.appendChild(t))}function Ps(e){return'[src="'+Et(e)+'"]'}function Wl(e){return"script[async]"+e}function Fu(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+Et(a.href)+'"]');if(s)return t.instance=s,Ke(s),s;var n=Me({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),Ke(s),et(s,"style",n),En(s,a.precedence,e),t.instance=s;case"stylesheet":n=Qs(a.href);var r=e.querySelector(Il(n));if(r)return t.state.loading|=4,t.instance=r,Ke(r),r;s=F0(a),(n=Tt.get(n))&&bc(s,n),r=(e.ownerDocument||e).createElement("link"),Ke(r);var i=r;return i._p=new Promise(function(o,c){i.onload=o,i.onerror=c}),et(r,"link",s),t.state.loading|=4,En(r,a.precedence,e),t.instance=r;case"script":return r=Ps(a.src),(n=e.querySelector(Wl(r)))?(t.instance=n,Ke(n),n):(s=a,(n=Tt.get(r))&&(s=Me({},a),yc(s,n)),e=e.ownerDocument||e,n=e.createElement("script"),Ke(n),et(n,"link",s),e.head.appendChild(n),t.instance=n);case"void":return null;default:throw Error(O(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(s=t.instance,t.state.loading|=4,En(s,a.precedence,e));return t.instance}function En(e,t,a){for(var s=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),n=s.length?s[s.length-1]:null,r=n,i=0;i<s.length;i++){var o=s[i];if(o.dataset.precedence===t)r=o;else if(r!==n)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function bc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function yc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Dn=null;function Iu(e,t,a){if(Dn===null){var s=new Map,n=Dn=new Map;n.set(a,s)}else n=Dn,s=n.get(a),s||(s=new Map,n.set(a,s));if(s.has(e))return s;for(s.set(e,null),a=a.getElementsByTagName(e),n=0;n<a.length;n++){var r=a[n];if(!(r[Ql]||r[Ie]||e==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var i=r.getAttribute(t)||"";i=e+i;var o=s.get(i);o?o.push(r):s.set(i,[r])}}return s}function Wu(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function fx(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function I0(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}function hx(e,t,a,s){if(a.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&!(a.state.loading&4)){if(a.instance===null){var n=Qs(s.href),r=t.querySelector(Il(n));if(r){t=r._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=nr.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=r,Ke(r);return}r=t.ownerDocument||t,s=F0(s),(n=Tt.get(n))&&bc(s,n),r=r.createElement("link"),Ke(r);var i=r;i._p=new Promise(function(o,c){i.onload=o,i.onerror=c}),et(r,"link",s),a.instance=r}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&!(a.state.loading&3)&&(e.count++,a=nr.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var bi=0;function xx(e,t){return e.stylesheets&&e.count===0&&Cn(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var s=setTimeout(function(){if(e.stylesheets&&Cn(e,e.stylesheets),e.unsuspend){var r=e.unsuspend;e.unsuspend=null,r()}},6e4+t);0<e.imgBytes&&bi===0&&(bi=62500*Fh());var n=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Cn(e,e.stylesheets),e.unsuspend)){var r=e.unsuspend;e.unsuspend=null,r()}},(e.imgBytes>bi?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(s),clearTimeout(n)}}:null}function nr(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Cn(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var rr=null;function Cn(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,rr=new Map,t.forEach(bx,e),rr=null,nr.call(e))}function bx(e,t){if(!(t.state.loading&4)){var a=rr.get(e);if(a)var s=a.get(null);else{a=new Map,rr.set(e,a);for(var n=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<n.length;r++){var i=n[r];(i.nodeName==="LINK"||i.getAttribute("media")!=="not all")&&(a.set(i.dataset.precedence,i),s=i)}s&&a.set(null,s)}n=t.instance,i=n.getAttribute("data-precedence"),r=a.get(i)||s,r===s&&a.set(null,n),a.set(i,n),this.count++,s=nr.bind(this),n.addEventListener("load",s),n.addEventListener("error",s),r?r.parentNode.insertBefore(n,r.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(n,e.firstChild)),t.state.loading|=4}}var Bl={$$typeof:ea,Provider:null,Consumer:null,_currentValue:Za,_currentValue2:Za,_threadCount:0};function yx(e,t,a,s,n,r,i,o,c){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Hr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hr(0),this.hiddenUpdates=Hr(null),this.identifierPrefix=s,this.onUncaughtError=n,this.onCaughtError=r,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function W0(e,t,a,s,n,r,i,o,c,g,f,h){return e=new yx(e,t,a,i,c,g,f,h,o),t=1,r===!0&&(t|=24),r=gt(3,null,null,t),e.current=r,r.stateNode=e,t=Vo(),t.refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:s,isDehydrated:a,cache:t},Zo(r),e}function P0(e){return e?(e=ks,e):ks}function eg(e,t,a,s,n,r){n=P0(n),s.context===null?s.context=n:s.pendingContext=n,s=Ea(t),s.payload={element:a},r=r===void 0?null:r,r!==null&&(s.callback=r),a=Da(e,s,t),a!==null&&(ot(a,e,t),xl(a,e,t))}function Pu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function pc(e,t){Pu(e,t),(e=e.alternate)&&Pu(e,t)}function tg(e){if(e.tag===13||e.tag===31){var t=rs(e,67108864);t!==null&&ot(t,e,67108864),pc(e,67108864)}}function ed(e){if(e.tag===13||e.tag===31){var t=yt();t=Mo(t);var a=rs(e,t);a!==null&&ot(a,e,t),pc(e,t)}}var ir=!0;function px(e,t,a,s){var n=le.T;le.T=null;var r=pe.p;try{pe.p=2,vc(e,t,a,s)}finally{pe.p=r,le.T=n}}function vx(e,t,a,s){var n=le.T;le.T=null;var r=pe.p;try{pe.p=8,vc(e,t,a,s)}finally{pe.p=r,le.T=n}}function vc(e,t,a,s){if(ir){var n=jo(s);if(n===null)hi(e,t,s,or,a),td(e,s);else if(jx(n,e,t,a,s))s.stopPropagation();else if(td(e,s),t&4&&-1<wx.indexOf(e)){for(;n!==null;){var r=Ks(n);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var i=Va(r.pendingLanes);if(i!==0){var o=r;for(o.pendingLanes|=2,o.entangledLanes|=2;i;){var c=1<<31-bt(i);o.entanglements[1]|=c,i&=~c}$t(r),!(ye&6)&&(In=ht()+500,Fl(0))}}break;case 31:case 13:o=rs(r,2),o!==null&&ot(o,r,2),Nr(),pc(r,2)}if(r=jo(s),r===null&&hi(e,t,s,or,a),r===n)break;n=r}n!==null&&s.stopPropagation()}else hi(e,t,s,null,a)}}function jo(e){return e=Ro(e),wc(e)}var or=null;function wc(e){if(or=null,e=ys(e),e!==null){var t=Gl(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=wd(t),e!==null)return e;e=null}else if(a===31){if(e=jd(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return or=e,null}function ag(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(nf()){case _d:return 2;case Ed:return 8;case Un:case rf:return 32;case Dd:return 268435456;default:return 32}default:return 32}}var No=!1,Aa=null,Ta=null,za=null,Ll=new Map,Hl=new Map,ya=[],wx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function td(e,t){switch(e){case"focusin":case"focusout":Aa=null;break;case"dragenter":case"dragleave":Ta=null;break;case"mouseover":case"mouseout":za=null;break;case"pointerover":case"pointerout":Ll.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hl.delete(t.pointerId)}}function rl(e,t,a,s,n,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:a,eventSystemFlags:s,nativeEvent:r,targetContainers:[n]},t!==null&&(t=Ks(t),t!==null&&tg(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function jx(e,t,a,s,n){switch(t){case"focusin":return Aa=rl(Aa,e,t,a,s,n),!0;case"dragenter":return Ta=rl(Ta,e,t,a,s,n),!0;case"mouseover":return za=rl(za,e,t,a,s,n),!0;case"pointerover":var r=n.pointerId;return Ll.set(r,rl(Ll.get(r)||null,e,t,a,s,n)),!0;case"gotpointercapture":return r=n.pointerId,Hl.set(r,rl(Hl.get(r)||null,e,t,a,s,n)),!0}return!1}function sg(e){var t=ys(e.target);if(t!==null){var a=Gl(t);if(a!==null){if(t=a.tag,t===13){if(t=wd(a),t!==null){e.blockedOn=t,Lc(e.priority,function(){ed(a)});return}}else if(t===31){if(t=jd(a),t!==null){e.blockedOn=t,Lc(e.priority,function(){ed(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Mn(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=jo(e.nativeEvent);if(a===null){a=e.nativeEvent;var s=new a.constructor(a.type,a);Hi=s,a.target.dispatchEvent(s),Hi=null}else return t=Ks(a),t!==null&&tg(t),e.blockedOn=a,!1;t.shift()}return!0}function ad(e,t,a){Mn(e)&&a.delete(t)}function Nx(){No=!1,Aa!==null&&Mn(Aa)&&(Aa=null),Ta!==null&&Mn(Ta)&&(Ta=null),za!==null&&Mn(za)&&(za=null),Ll.forEach(ad),Hl.forEach(ad)}function mn(e,t){e.blockedOn===t&&(e.blockedOn=null,No||(No=!0,Qe.unstable_scheduleCallback(Qe.unstable_NormalPriority,Nx)))}var gn=null;function sd(e){gn!==e&&(gn=e,Qe.unstable_scheduleCallback(Qe.unstable_NormalPriority,function(){gn===e&&(gn=null);for(var t=0;t<e.length;t+=3){var a=e[t],s=e[t+1],n=e[t+2];if(typeof s!="function"){if(wc(s||a)===null)continue;break}var r=Ks(a);r!==null&&(e.splice(t,3),t-=3,ao(r,{pending:!0,data:n,method:a.method,action:s},s,n))}}))}function Xs(e){function t(c){return mn(c,e)}Aa!==null&&mn(Aa,e),Ta!==null&&mn(Ta,e),za!==null&&mn(za,e),Ll.forEach(t),Hl.forEach(t);for(var a=0;a<ya.length;a++){var s=ya[a];s.blockedOn===e&&(s.blockedOn=null)}for(;0<ya.length&&(a=ya[0],a.blockedOn===null);)sg(a),a.blockedOn===null&&ya.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(s=0;s<a.length;s+=3){var n=a[s],r=a[s+1],i=n[ct]||null;if(typeof r=="function")i||sd(a);else if(i){var o=null;if(r&&r.hasAttribute("formAction")){if(n=r,i=r[ct]||null)o=i.formAction;else if(wc(n)!==null)continue}else o=i.action;typeof o=="function"?a[s+1]=o:(a.splice(s,3),s-=3),sd(a)}}}function lg(){function e(r){r.canIntercept&&r.info==="react-transition"&&r.intercept({handler:function(){return new Promise(function(i){return n=i})},focusReset:"manual",scroll:"manual"})}function t(){n!==null&&(n(),n=null),s||setTimeout(a,20)}function a(){if(!s&&!navigation.transition){var r=navigation.currentEntry;r&&r.url!=null&&navigation.navigate(r.url,{state:r.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,n=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){s=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),n!==null&&(n(),n=null)}}}function jc(e){this._internalRoot=e}_r.prototype.render=jc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(O(409));var a=t.current,s=yt();eg(a,s,e,t,null,null)};_r.prototype.unmount=jc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;eg(e.current,2,null,e,null,null),Nr(),t[Zs]=null}};function _r(e){this._internalRoot=e}_r.prototype.unstable_scheduleHydration=function(e){if(e){var t=zd();e={blockedOn:null,target:e,priority:t};for(var a=0;a<ya.length&&t!==0&&t<ya[a].priority;a++);ya.splice(a,0,e),a===0&&sg(e)}};var ld=pd.version;if(ld!=="19.2.0")throw Error(O(527,ld,"19.2.0"));pe.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(O(188)):(e=Object.keys(e).join(","),Error(O(268,e)));return e=Wg(t),e=e!==null?Nd(e):null,e=e===null?null:e.stateNode,e};var kx={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:le,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fn=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fn.isDisabled&&fn.supportsFiber)try{$l=fn.inject(kx),xt=fn}catch{}}ur.createRoot=function(e,t){if(!vd(e))throw Error(O(299));var a=!1,s="",n=Jm,r=Fm,i=Im;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(n=t.onUncaughtError),t.onCaughtError!==void 0&&(r=t.onCaughtError),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=W0(e,1,!1,null,null,a,s,null,n,r,i,lg),e[Zs]=t.current,xc(e),new jc(t)};ur.hydrateRoot=function(e,t,a){if(!vd(e))throw Error(O(299));var s=!1,n="",r=Jm,i=Fm,o=Im,c=null;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(n=a.identifierPrefix),a.onUncaughtError!==void 0&&(r=a.onUncaughtError),a.onCaughtError!==void 0&&(i=a.onCaughtError),a.onRecoverableError!==void 0&&(o=a.onRecoverableError),a.formState!==void 0&&(c=a.formState)),t=W0(e,1,!0,t,a??null,s,n,c,r,i,o,lg),t.context=P0(null),a=t.current,s=yt(),s=Mo(s),n=Ea(s),n.callback=null,Da(a,n,s),a=s,t.current.lanes=a,Vl(t,a),$t(t),e[Zs]=t.current,xc(e),new _r(t)};ur.version="19.2.0";function ng(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ng)}catch(e){console.error(e)}}ng(),xd.exports=ur;var Sx=xd.exports;const _x=Kg(Sx);var he=(e=>(e.ADMIN="admin",e.MANAGEMENT="management",e.CUSTOMER="customer",e))(he||{}),ce=(e=>(e.SLOT="slot",e.FULL_DAY="full_day",e))(ce||{}),Ve=(e=>(e.PAID="Paid",e.UNPAID="Unpaid",e))(Ve||{}),I=(e=>(e.PENDING="pending",e.APPROVED="approved",e.REJECTED="rejected",e.CONFIRMED="confirmed",e))(I||{});function nd(e,t){const[a,s]=S.useState(()=>{try{const r=window.localStorage.getItem(e);return r?JSON.parse(r):t}catch(r){return console.error(r),t}}),n=r=>{try{const i=r instanceof Function?r(a):r;s(i),window.localStorage.setItem(e,JSON.stringify(i))}catch(i){console.error(i)}};return S.useEffect(()=>{if(e==="theme"){const r=window.document.documentElement;a==="dark"?r.classList.add("dark"):r.classList.remove("dark")}},[e,a]),S.useEffect(()=>{const r=i=>{if(i.key===e)try{s(i.newValue?JSON.parse(i.newValue):t)}catch(o){console.error(o),s(t)}};return window.addEventListener("storage",r),()=>{window.removeEventListener("storage",r)}},[e,t]),[a,n]}const Ex="https://ghqczwgnycewbcrwtiaz.supabase.co",Dx="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdocWN6d2dueWNld2Jjcnd0aWF6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg1MTk5NTAsImV4cCI6MjA3NDA5NTk1MH0.X6WqnEfHGWgASB2B0nvbHsGzBsyEkCZAYPCGCJKYcvU",re=Jg(Ex,Dx),Yt=S.createContext({user:null,theme:"light",bookings:{ground:[],net:[]},bookingRequests:{ground:[],net:[]},specialDates:[],pendingRequestCount:0,isLoading:!0,login:()=>{},logout:()=>{},toggleTheme:()=>{},addBooking:async()=>{},updateBooking:async()=>{},deleteBooking:async()=>{},addBookingRequest:async()=>{},approveBookingRequest:async()=>{},rejectBookingRequest:async()=>{},deleteBookingRequest:async()=>{},addSpecialDate:async()=>{},removeSpecialDate:async()=>{},cleanupDuplicateRequests:async()=>({deletedCount:0}),recalculatePendingCount:()=>{},refreshData:async()=>{},refreshDataSilent:async()=>{}}),Cx=({children:e})=>{const[t,a]=nd("user",null),[s,n]=nd("theme","light"),[r,i]=S.useState({ground:[],net:[]}),[o,c]=S.useState({ground:[],net:[]}),[g,f]=S.useState([]),[h,m]=S.useState(0),[d,p]=S.useState(!0),D=S.useRef(!1),T=S.useRef({});S.useCallback((N,A,x=100)=>{const j=Date.now(),E=T.current[N]||0;j-E<x||(T.current[N]=j,A())},[]),S.useEffect(()=>{if(!t){p(!1),i({ground:[],net:[]});return}let N,A,x;const j=()=>{N=re.channel("realtime-bookings"),N.on("postgres_changes",{event:"*",schema:"public",table:"bookings"},w=>{if(!D.current)try{D.current=!0,i(v=>{const C={ground:[...v.ground],net:[...v.net]};if(w.eventType==="INSERT"||w.eventType==="UPDATE"){const R=w.new;if(!R||!R.id||!R.system)return console.log(" Invalid booking data:",R),v;if(C[R.system].find(Z=>Z.id===R.id))return console.log(" Booking already exists, skipping:",R.id),v;C[R.system]=C[R.system].filter(Z=>Z.id!==R.id),C[R.system].push(R),console.log(` Added/updated booking ${R.id} in ${R.system} system`)}else if(w.eventType==="DELETE"){const R=w.old;if(R&&R.id){const B=C.ground.length,Z=C.net.length;C.ground=C.ground.filter(be=>be.id!==R.id),C.net=C.net.filter(be=>be.id!==R.id);const P=C.ground.length,ne=C.net.length;console.log(B!==P||Z!==ne?` Removed booking ${R.id} from systems (ground: ${B}${P}, net: ${Z}${ne})`:` Booking ${R.id} was not found in either system state`)}else console.log(" Invalid delete data for booking:",R)}return C.ground.sort((R,B)=>R.date.localeCompare(B.date)||R.created_at.localeCompare(B.created_at)),C.net.sort((R,B)=>R.date.localeCompare(B.date)||R.created_at.localeCompare(B.created_at)),console.log(` Updated bookings state: ground=${C.ground.length}, net=${C.net.length}`),C})}catch(v){console.error(" Error processing real-time booking update:",v),console.error("Real-time booking update error context:",{eventType:w?.eventType,table:w?.table,userRole:t?.role,timestamp:new Date().toISOString()}),D.current=!1}finally{setTimeout(()=>{D.current=!1},100)}}).subscribe(w=>{}),A=re.channel("realtime-requests"),A.on("postgres_changes",{event:"*",schema:"public",table:"booking_requests"},w=>{if(console.log(" Real-time booking request change:",w),D.current){console.log(" Already processing, skipping...");return}try{if(D.current=!0,!w||!w.eventType){console.log(" Invalid real-time payload:",w);return}if(w.eventType==="INSERT"){const v=w.new;if(!v||!v.id||!v.system){console.log(" Invalid request data:",v);return}c(C=>{if([...C.ground,...C.net].find(Z=>Z.id===v.id))return console.log(" Request already exists, skipping:",v.id),C;const B={ground:[...C.ground],net:[...C.net]};if(t.role===he.CUSTOMER){let Z=!1;if(t.email&&v.customer_email?Z=v.customer_email.toLowerCase().trim()===t.email.toLowerCase().trim():t.name&&v.customer_name&&(Z=v.customer_name.toLowerCase().trim()===t.name.toLowerCase().trim()),!Z)return console.log(" Request not for current customer, skipping"),C}if(B[v.system]=[...B[v.system],v],console.log(` Added new request ${v.id} to ${v.system} system`),t.role===he.ADMIN||t.role===he.MANAGEMENT){const Z=[...B.ground,...B.net].filter(P=>P.status===I.PENDING).length;m(Z),console.log(" Updated pending request count:",Z),console.log(` SMS notification will be sent for new booking request: ${v.request_number||v.id}`)}return B})}else if(w.eventType==="DELETE"){const v=w.old;if(!v||!v.id){console.log(" Invalid delete data:",v);return}if(!v.system||v.system!=="ground"&&v.system!=="net"){console.log(" Invalid or missing system in delete data:",v);return}console.log(` Real-time delete event for request ${v.id} in ${v.system} system`),c(C=>{try{const R={ground:[...C.ground],net:[...C.net]};if(R[v.system]){const B=R[v.system].length;R[v.system]=R[v.system].filter(P=>P.id!==v.id);const Z=R[v.system].length;console.log(B!==Z?` Removed request ${v.id} from ${v.system} system (${B}  ${Z})`:` Request ${v.id} was not found in ${v.system} system state`)}else return console.log(` Invalid system ${v.system} in delete operation`),C;if(t.role===he.ADMIN||t.role===he.MANAGEMENT){const B=[...R.ground,...R.net].filter(Z=>Z.status===I.PENDING).length;m(B),console.log(" Updated pending request count after delete:",B)}return R}catch(R){return console.error(" Error processing real-time delete event:",R),C}})}else if(w.eventType==="UPDATE"){const v=w.new,C=w.old;if(!v||!v.id||!C){console.log(" Invalid update data:",{updatedRequest:v,oldRequest:C});return}const R=C.status===I.PENDING&&(v.status===I.APPROVED||v.status===I.REJECTED);console.log(` Processing ${R?"status transition":"status update"} for request ${v.id}: ${C.status} -> ${v.status}`),c(R?B=>{const Z={ground:[...B.ground],net:[...B.net]};if(Z[v.system]=Z[v.system].filter(P=>P.id!==v.id),console.log(` Removed transitioned request ${v.id} from booking requests`),t?.role==="admin"||t?.role==="management"){const P=[...Z.ground,...Z.net].filter(ne=>ne.status===I.PENDING).length;m(P),console.log(` Updated pending request count after transition: ${P}`)}return Z}:B=>{const Z={ground:[...B.ground],net:[...B.net]},P=Z[v.system],ne=P.findIndex(be=>be.id===v.id);if(ne!==-1&&(P[ne]=v,console.log(` Updated request ${v.id} status to ${v.status}`)),t?.role==="admin"||t?.role==="management"){const be=[...Z.ground,...Z.net].filter(ie=>ie.status===I.PENDING).length;m(be),console.log(` Updated pending request count after update: ${be}`)}return Z})}}catch(v){console.error(" Error processing real-time request update:",v),console.error("Real-time update error context:",{eventType:w?.eventType,table:w?.table,userRole:t?.role,timestamp:new Date().toISOString()})}finally{setTimeout(()=>{D.current=!1},100)}}).subscribe(w=>{console.log(" Booking requests subscription status:",w)}),x=re.channel("realtime-special-dates"),x.on("postgres_changes",{event:"*",schema:"public",table:"special_dates"},w=>{if(console.log(" Real-time special dates change:",w),w.eventType==="INSERT"||w.eventType==="UPDATE"){const v=w.new;v&&v.is_active&&f(C=>{const R=C.findIndex(B=>B.id===v.id);if(R!==-1){const B=[...C];return B[R]=v,console.log(` Updated special date ${v.id}: ${v.date}`),B}else{const B=[...C,v];return B.sort((Z,P)=>Z.date.localeCompare(P.date)),console.log(` Added new special date ${v.id}: ${v.date}`),B}})}else if(w.eventType==="DELETE"){const v=w.old;v&&v.id&&f(C=>{const R=C.filter(B=>B.id!==v.id);return console.log(` Removed special date ${v.id}`),R})}}).subscribe(w=>{console.log(" Special dates subscription status:",w)})},E=async()=>{try{const w=new Date;w.setDate(w.getDate()-30);const v=w.toISOString(),{error:C}=await re.from("booking_requests").delete().lt("created_at",v);C&&console.error("Error cleaning up old requests:",C);const{data:R,error:B}=await re.from("booking_requests").select("*").order("created_at",{ascending:!1});if(B)return;const Z={};R.forEach(P=>{const ne=P.customer_email||P.customer_name;Z[ne]||(Z[ne]=[]),Z[ne].push(P)});for(const[P,ne]of Object.entries(Z))if(ne.length>10){const ie=ne.slice(10).map(Te=>Te.id),{error:Ue}=await re.from("booking_requests").delete().in("id",ie);Ue&&console.error(`Error deleting excess requests for customer ${P}:`,Ue)}}catch(w){console.error("Exception during cleanup:",w)}};return(async()=>{p(!0);try{await E();const{data:w,error:v}=await re.from("bookings").select("*").order("date",{ascending:!0});if(v)throw v;const C=w.filter(Te=>Te.system==="ground"),R=w.filter(Te=>Te.system==="net");i({ground:C,net:R});const{data:B,error:Z}=await re.from("special_dates").select("*").eq("is_active",!0).order("date",{ascending:!0}).limit(100);Z?(console.error(" Error loading special dates:",Z),f([])):(f(B),console.log(` Loaded ${B.length} special dates successfully`));let P=re.from("booking_requests").select("*").order("created_at",{ascending:!0});if(t.role===he.CUSTOMER){const Te=t.email?.toLowerCase().trim(),jt=t.name?.toLowerCase().trim();if(Te||jt){const q=[];Te&&q.push(`customer_email.ilike.${Te}`),jt&&q.push(`customer_name.ilike.${jt}`),P=P.or(q.join(","))}else{c({ground:[],net:[]});return}}const{data:ne,error:be}=await P;if(be)throw be;console.log(" Loaded booking requests:",{total:ne?.length||0,requests:ne,user:t.role===he.CUSTOMER?{name:t.name,email:t.email}:"Admin"});const ie=ne.filter(Te=>Te.system==="ground"),Ue=ne.filter(Te=>Te.system==="net");if(console.log(" Filtered requests by system:",{ground:ie.length,net:Ue.length,groundRequests:ie,netRequests:Ue}),c({ground:ie,net:Ue}),t.role===he.ADMIN||t.role===he.MANAGEMENT){const Te=[...ie,...Ue].filter(jt=>jt.status===I.PENDING).length;m(Te)}else m(0)}catch(w){console.error("Failed to fetch data:",w)}finally{p(!1)}})(),j(),()=>{N&&re.removeChannel(N),A&&re.removeChannel(A),x&&re.removeChannel(x)}},[t]),S.useEffect(()=>{const N=async _=>{try{console.log(` Sending admin notification for new booking request: ${_.request_number||_.id}`);const{twilioNotificationService:w}=await qr(async()=>{const{twilioNotificationService:C}=await Promise.resolve().then(()=>vi);return{twilioNotificationService:C}},void 0),v=await w.sendNotificationToAdmins({title:" New Booking Request",body:`${_.customer_name} requested ${_.system} booking on ${_.date}`,type:"booking_request",data:{requestNumber:_.request_number||`REQ-${_.id}`,customerName:_.customer_name,customerEmail:_.customer_email,date:_.date,system:_.system,bookingType:_.booking_type,eventType:_.event_type}});v.success?console.log(` SMS notification sent to ${v.sentCount} admins for new booking request: ${_.request_number||_.id}`):(console.log(` Email notification failed for new booking request: ${_.request_number||_.id}`),console.log("Errors:",v.errors))}catch(w){console.error(" Failed to send admin notification for new booking request:",w)}},A=async _=>{try{console.log(` Sending customer notification for approved booking: ${_.request_number||_.id}`);const{twilioNotificationService:w}=await qr(async()=>{const{twilioNotificationService:C}=await Promise.resolve().then(()=>vi);return{twilioNotificationService:C}},void 0),v=await w.sendNotification({title:" Booking Approved!",body:`Your ${_.system} booking for ${_.date} has been approved!`,type:"booking_approval",recipientPhone:_.customer_contact,data:{requestNumber:_.request_number||`REQ-${_.id}`,customerName:_.customer_name,date:_.date,system:_.system,bookingType:_.booking_type}});v.success?console.log(` SMS notification sent to customer for approved booking: ${_.request_number||_.id}`):(console.log(` Customer notification failed for approved booking: ${_.request_number||_.id}`),console.log("Error:",v.error))}catch(w){console.error(" Failed to send customer notification for approved booking:",w)}},x=async _=>{try{console.log(` Sending customer notification for rejected booking: ${_.request_number||_.id}`);const{twilioNotificationService:w}=await qr(async()=>{const{twilioNotificationService:C}=await Promise.resolve().then(()=>vi);return{twilioNotificationService:C}},void 0),v=await w.sendNotification({title:" Booking Request Not Approved",body:`Your ${_.system} booking request for ${_.date} was not approved. Please contact management for more details.`,type:"booking_rejection",recipientPhone:_.customer_contact,data:{requestNumber:_.request_number||`REQ-${_.id}`,customerName:_.customer_name,date:_.date,system:_.system}});v.success?console.log(` SMS notification sent to customer for rejected booking: ${_.request_number||_.id}`):(console.log(` Customer notification failed for rejected booking: ${_.request_number||_.id}`),console.log("Error:",v.error))}catch(w){console.error(" Failed to send customer notification for rejected booking:",w)}};[...o.ground,...o.net].forEach(_=>{const w=new Date(_.created_at).getTime(),C=Date.now()-w;C<3e4&&C>0&&N(_)}),[...o.ground,...o.net].forEach(_=>{const w=new Date(_.created_at).getTime(),C=Date.now()-w;C<3e4&&C>0&&(_.status===I.APPROVED?A(_):_.status===I.REJECTED&&x(_))})},[o,r]),S.useEffect(()=>{if(t?.role==="admin"||t?.role==="management"){const N=setInterval(()=>{const A=[...o.ground,...o.net].filter(x=>x.status===I.PENDING).length;A!==h&&(console.log(` Pending count mismatch detected. Current: ${h}, Actual: ${A}. Recalculating...`),m(A))},1e4);return()=>clearInterval(N)}},[t?.role,o,h]),S.useEffect(()=>{if(t?.role==="admin"||t?.role==="management"&&!d){const N=setInterval(()=>{[...o.ground,...o.net].length===0&&console.log(" No booking requests found in state, this might indicate a data issue")},3e4);return()=>clearInterval(N)}},[t?.role,o,d]);const b=S.useCallback((N,A,x)=>{a({id:Date.now().toString(),name:N,role:A,email:x})},[a]),u=S.useCallback(()=>{a(null),localStorage.removeItem("customerName"),localStorage.removeItem("customerEmail"),localStorage.removeItem("customerRememberMe")},[a]),y=S.useCallback(()=>{n(N=>N==="light"?"dark":"light")},[n]),k=S.useCallback(async(N,A)=>{const x=t&&t.email&&t.name?(()=>{const _=t.name+"-"+t.email,w=new TextEncoder().encode(_);let v=0;for(let C=0;C<w.length;C++)v=(v<<5)-v+w[C],v=v&v;return btoa(String.fromCharCode(...w)).replace(/[^a-zA-Z0-9]/g,"").substring(0,16)})():`session-${Date.now()}`,{data:j,error:E}=await re.from("bookings").insert([{...N,system:A,customer_session_id:x}]).select().single();if(E)throw console.error(" Error adding booking:",E),E;return console.log(" Booking added successfully:",j.id),console.log(` SMS notification will be sent for new booking: ${j.customer_name}`),j},[t]),M=S.useCallback(async(N,A)=>{const{id:x,...j}=N,E=D.current;D.current=!0;try{const{data:_,error:w}=await re.from("bookings").select("*").eq("id",x).single();if(w)throw new Error(`Booking not found: ${w.message}`);let v={...j};j.payment_status==="Paid"&&_.status!==I.CONFIRMED&&(v={...v,status:I.CONFIRMED});const{data:C,error:R}=await re.from("bookings").update(v).eq("id",x).select().single();if(R)throw R;return C}catch(_){throw _}finally{D.current=E}},[]),L=S.useCallback(async(N,A)=>{const{error:x}=await re.from("bookings").delete().eq("id",N);if(x)throw x},[]),z=S.useCallback(async N=>{if(D.current)throw new Error("Request submission already in progress, please wait");if(!t||t.role!=="admin"&&t.role!=="customer")throw new Error("Access denied: Only registered users can create booking requests");try{D.current=!0,console.log(` Starting booking request creation for ${N.customer_name}`);const A=t.email&&t.name?(()=>{const ne=t.name+"-"+t.email,be=new TextEncoder().encode(ne);let ie=0;for(let Ue=0;Ue<be.length;Ue++)ie=(ie<<5)-ie+be[Ue],ie=ie&ie;return btoa(String.fromCharCode(...be)).replace(/[^a-zA-Z0-9]/g,"").substring(0,16)})():`session-${Date.now()}`,x=new Date,j=`REQ-${x.getFullYear()}${(x.getMonth()+1).toString().padStart(2,"0")}${x.getDate().toString().padStart(2,"0")}-${x.getHours().toString().padStart(2,"0")}${x.getMinutes().toString().padStart(2,"0")}${x.getSeconds().toString().padStart(2,"0")}-${x.getMilliseconds().toString().padStart(3,"0")}-${Math.random().toString(36).substr(2,4)}`;console.log(` Generated unique request number: ${j}`),console.log(" Debugging form data:",{customer_name:N.customer_name,customer_email:N.customer_email,customer_contact:N.customer_contact,date:N.date,system:N.system,booking_type:N.booking_type,event_type:N.event_type,payment_status:N.payment_status});const E=new Date(x.getTime()-10*60*1e3);console.log(` Checking for duplicates for customer: ${N.customer_name} (${N.customer_email})`),console.log(" Request details:",{date:N.date,system:N.system,bookingType:N.booking_type,eventType:N.event_type,slots:N.slots});const{data:_,error:w}=await re.from("booking_requests").select("id, created_at, request_number, status, booking_type, slots, customer_name, customer_email, date, system, event_type").or(`customer_email.ilike.${N.customer_email},customer_name.ilike.${N.customer_name}`).eq("date",N.date).eq("system",N.system).in("status",[I.PENDING,I.APPROVED]).gte("created_at",E.toISOString()).order("created_at",{ascending:!1}).limit(20);if(w)throw console.error(" Error checking for duplicates:",w),new Error(`Database error while checking for duplicates: ${w.message}`);if(_&&_.length>0){console.log(` Found ${_.length} existing requests, analyzing for duplicates...`);const ne=_.filter(ie=>{const Ue=ie.customer_email?.toLowerCase()===N.customer_email?.toLowerCase()||ie.customer_name?.toLowerCase()===N.customer_name?.toLowerCase(),Te=ie.date===N.date,jt=ie.system===N.system,q=ie.booking_type===N.booking_type,J=ie.event_type?.toLowerCase()===N.event_type?.toLowerCase();let F=!0;if(N.booking_type===ce.SLOT&&ie.booking_type===ce.SLOT){const ue=ie.slots||[];F=(N.slots||[]).some(Xe=>ue.includes(Xe))}const se=Ue&&Te&&jt&&q&&J&&F;if(se){const ue=x.getTime()-new Date(ie.created_at).getTime();console.log(` Time difference for potential duplicate: ${ue}ms`)}return se&&x.getTime()-new Date(ie.created_at).getTime()<3e5});if(ne.length>0)return console.log(" Found exact duplicate request(s):",ne.map(ie=>({requestNumber:ie.request_number,createdAt:ie.created_at,customer:ie.customer_name,status:ie.status}))),[ne[0]];const be=_.filter(ie=>ie.status===I.APPROVED&&ie.customer_email?.toLowerCase()===N.customer_email?.toLowerCase()&&(N.booking_type===ce.FULL_DAY||ie.booking_type===ce.FULL_DAY||N.slots&&ie.slots&&N.slots.some(Ue=>ie.slots?.includes(Ue))));be.length>0&&console.warn(" Potential booking conflict detected:",{newRequest:{date:N.date,system:N.system,slots:N.slots,customer:N.customer_name},existingBooking:{requestNumber:be[0].request_number,status:be[0].status,slots:be[0].slots,customer:be[0].customer_name}})}console.log(" No duplicates found, proceeding with request creation");const v={...N,request_number:j,customer_session_id:A,status:I.PENDING,submitted_at:x.toISOString()};console.log(" Preparing to insert request with data:",{requestNumber:j,customer:N.customer_name,email:N.customer_email,date:N.date,system:N.system,bookingType:N.booking_type,eventType:N.event_type}),console.log(" Attempting to insert request into database...");const{data:C,error:R}=await re.from("booking_requests").insert([v]).select();if(R)if(console.error(" Error inserting request:",R),console.error(" Request data that failed to insert:",{requestNumber:v.request_number,customer:v.customer_name,email:v.customer_email,date:v.date,system:v.system,bookingType:v.booking_type,eventType:v.event_type,status:v.status,paymentStatus:v.payment_status}),R.code==="23505"){console.log(" Unique constraint violation detected, attempting recovery...");const{data:ne,error:be}=await re.from("booking_requests").select("*").eq("customer_email",N.customer_email).eq("customer_name",N.customer_name).eq("date",N.date).eq("system",N.system).eq("booking_type",N.booking_type).eq("event_type",N.event_type).in("status",[I.PENDING,I.APPROVED]).order("created_at",{ascending:!1}).limit(1);if(be)throw console.error(" Error fetching existing request during recovery:",be),new Error(`Duplicate request detected but failed to retrieve: ${be.message}`);if(ne&&ne.length>0)return console.log(` Recovered existing request: ${ne[0].request_number}`),ne;throw new Error("Duplicate request detected but no existing request found")}else throw R.code==="23514"?(console.error(" Check constraint violation:",R),new Error("Invalid request data: Please check all required fields are filled correctly")):R.code==="23502"?(console.error(" Not-null constraint violation:",R),new Error("Missing required information: Please fill in all mandatory fields")):(console.error(" Unexpected database error:",R),new Error(`Database error: ${R.message||"Unknown error occurred"}`));if(!C||C.length===0)throw console.error(" No data returned after insert operation"),new Error("Request was not created successfully - no data returned");const B=C[0];if(console.log(" Successfully created request:",{id:B.id,requestNumber:B.request_number,status:B.status,customer:B.customer_name,fullRequest:B}),B.request_number!==j)throw console.warn(` Request number mismatch! Generated: ${j}, Stored: ${B.request_number}`),new Error("Request created but request number verification failed");console.log(` Request number verification successful: ${B.request_number}`),console.log(` SMS notification will be sent for new booking request: ${B.request_number}`),t.role===he.CUSTOMER&&console.log(" Customer request created successfully:",{id:B.id,requestNumber:B.request_number,customerName:B.customer_name,customerEmail:B.customer_email,date:B.date,system:B.system,status:B.status});const P=["customer_name","customer_contact","date","system","booking_type","event_type"].filter(ne=>!B[ne]);if(P.length>0)throw console.error(" Request created but missing required fields:",P),new Error(`Request created but missing required information: ${P.join(", ")}`);return console.log(" Request validation completed successfully"),t.role===he.CUSTOMER&&console.log(` Customer request created successfully: ${C[0].request_number}`),C}catch(A){throw console.error(" Error in addBookingRequest:",A),A}finally{setTimeout(()=>{D.current=!1},2e3)}},[t]),G=S.useCallback(async(N,A)=>{if(D.current)throw new Error("Approval already in progress, please wait");if(!N||N<=0)throw new Error("Invalid request ID provided");try{D.current=!0,console.log(` Starting approval process for request ${N}`);const{data:x,error:j}=await re.from("booking_requests").select("*").eq("id",N).single();if(j)throw j.code==="PGRST116"?(console.warn(` Request ${N} not found`),new Error("Request not found")):(console.error(` Error fetching request ${N}:`,j),new Error(`Failed to verify request: ${j.message}`));if(!x)throw console.warn(` Request ${N} not found`),new Error("Request not found");if(x.system!==A)throw console.warn(` System mismatch for request ${N}: expected ${A}, got ${x.system}`),new Error(`System mismatch: Request belongs to ${x.system} system`);if(x.status===I.APPROVED)throw console.log(` Request ${N} is already approved`),new Error("Request has already been approved");if(x.status===I.REJECTED)throw new Error("Cannot approve a rejected request");console.log(` Converting request ${N} to booking:`,{requestNumber:x.request_number,customer:x.customer_name,date:x.date,system:x.system});const E={customer_name:x.customer_name,customer_contact:x.customer_contact,customer_email:x.customer_email,customer_session_id:x.customer_session_id,date:x.date,system:x.system,booking_type:x.booking_type,slots:x.slots,event_type:x.event_type,net_number:x.net_number||[],payment_status:x.payment_status,payment_amount:x.payment_amount,notes:x.notes,status:I.APPROVED,created_at:new Date().toISOString()},{data:_,error:w}=await re.from("bookings").insert([E]).select().single();if(w)throw console.error(" Error creating booking:",w),w;console.log(` Successfully created booking ${_.id} from request ${N}`);const{error:v}=await re.from("booking_requests").delete().eq("id",N);if(v)throw console.error(` Error deleting request ${N}:`,v),v;console.log(` Successfully deleted request ${N} after approval`),c(C=>{const R={ground:C.ground.filter(B=>B.id!==N),net:C.net.filter(B=>B.id!==N)};return console.log(` Updated booking requests state, removed request ${N}`),R}),i(C=>{const R={ground:[...C.ground],net:[...C.net]};return R[A]=[...R[A],_],R[A].sort((B,Z)=>B.date.localeCompare(Z.date)||B.created_at.localeCompare(Z.created_at)),console.log(` Updated bookings state, added booking ${_.id}`),R}),console.log(` Approval process completed successfully for request ${N}`),console.log(` SMS notifications will be sent for approved booking: ${x.customer_name}`)}catch(x){throw console.error(` Error in approveBookingRequest for request ${N}:`,x),x.message&&!x.message.includes("Access denied")&&!x.message.includes("Invalid request")&&!x.message.includes("not found")&&!x.message.includes("already")?new Error(`Failed to approve booking request: ${x.message}`):x}finally{setTimeout(()=>{D.current=!1},1e3)}},[t?.role,h]),V=S.useCallback(async(N,A)=>{if(D.current)throw new Error("Rejection already in progress, please wait");if(!N||N<=0)throw new Error("Invalid request ID provided");try{D.current=!0,console.log(` Starting rejection process for request ${N}`);const{data:x,error:j}=await re.from("booking_requests").select("*").eq("id",N).single();if(j)throw j.code==="PGRST116"?(console.warn(` Request ${N} not found`),new Error("Request not found")):(console.error(` Error fetching request ${N}:`,j),new Error(`Failed to verify request: ${j.message}`));if(!x)throw console.warn(` Request ${N} not found`),new Error("Request not found");if(x.system!==A)throw console.warn(` System mismatch for request ${N}: expected ${A}, got ${x.system}`),new Error(`System mismatch: Request belongs to ${x.system} system`);if(x.status===I.REJECTED)throw console.log(` Request ${N} is already rejected`),new Error("Request has already been rejected");if(x.status===I.APPROVED)throw new Error("Cannot reject an approved request");console.log(` Rejecting request ${N}:`,{requestNumber:x.request_number,customer:x.customer_name,date:x.date,system:x.system});const{error:E}=await re.from("booking_requests").update({status:I.REJECTED}).eq("id",N);if(E)throw console.error(` Error rejecting request ${N}:`,E),E;console.log(` Successfully rejected request ${N}`),c(_=>{const w={ground:[..._.ground],net:[..._.net]},v=w[A],C=v.findIndex(R=>R.id===N);return C!==-1&&(v[C]={...v[C],status:I.REJECTED},console.log(` Updated request ${N} status to REJECTED in state`)),w}),console.log(` Rejection process completed successfully for request ${N}`),console.log(` SMS notification will be sent for rejected booking: ${x.customer_name}`)}catch(x){throw console.error(` Error in rejectBookingRequest for request ${N}:`,x),x.message&&!x.message.includes("Access denied")&&!x.message.includes("Invalid request")&&!x.message.includes("not found")&&!x.message.includes("already")?new Error(`Failed to reject booking request: ${x.message}`):x}finally{setTimeout(()=>{D.current=!1},1e3)}},[t?.role,h]),$=S.useCallback(async(N,A)=>{if(t?.role!=="admin")throw new Error("Access denied: Only admin users can delete booking requests");if(!N||N<=0)throw new Error("Invalid request ID provided");console.log(` Starting deletion process for request ${N} in ${A} system`);try{const{data:x,error:j}=await re.from("booking_requests").select("id, request_number, customer_name, status, system").eq("id",N).single();if(j)throw j.code==="PGRST116"?(console.warn(` Request ${N} not found`),new Error("Request not found")):(console.error(` Error fetching request ${N}:`,j),new Error(`Failed to verify request: ${j.message}`));if(!x)throw console.warn(` Request ${N} not found`),new Error("Request not found");if(x.system!==A)throw console.warn(` System mismatch for request ${N}: expected ${A}, got ${x.system}`),new Error(`System mismatch: Request belongs to ${x.system} system`);console.log(` Found request ${N}: ${x.request_number} (${x.customer_name})`);const{error:E}=await re.from("booking_requests").delete().eq("id",N);if(E)throw console.error(` Error deleting request ${N}:`,E),E.code==="23503"?new Error("Cannot delete request: It may be referenced by other records"):E.code==="23505"?new Error("Database constraint error occurred"):E.code==="42501"?new Error("Permission denied: Cannot delete this request"):new Error(`Failed to delete request: ${E.message}`);console.log(` Successfully deleted request ${N}: ${x.request_number}`)}catch(x){throw console.error(` Error in deleteBookingRequest for request ${N}:`,x),x.message&&!x.message.includes("Access denied")&&!x.message.includes("Invalid request")?new Error(`Failed to delete booking request: ${x.message}`):x}},[t?.role]),te=S.useCallback(()=>{if(t?.role==="admin"||t?.role==="management"){const N=[...o.ground,...o.net].filter(A=>A.status===I.PENDING).length;m(N),console.log(` Recalculated pending request count: ${N}`)}},[t?.role,o]),X=S.useCallback(async()=>{if(t){console.log(" Silent data refresh triggered");try{const N=new Date;N.setDate(N.getDate()-30);const A=N.toISOString(),{error:x}=await re.from("booking_requests").delete().lt("created_at",A);x&&console.error("Error cleaning up old requests:",x);const{data:j,error:E}=await re.from("bookings").select("*").order("date",{ascending:!0});if(E)throw E;const _=j.filter(P=>P.system==="ground"),w=j.filter(P=>P.system==="net");i({ground:_,net:w});let v=re.from("booking_requests").select("*").order("created_at",{ascending:!0});if(t.role===he.CUSTOMER){const P=t.email?.toLowerCase().trim(),ne=t.name?.toLowerCase().trim();if(P||ne){const be=[];P&&be.push(`customer_email.ilike.${P}`),ne&&be.push(`customer_name.ilike.${ne}`),v=v.or(be.join(","))}else{c({ground:[],net:[]});return}}const{data:C,error:R}=await v;if(R)throw R;const B=C.filter(P=>P.system==="ground"),Z=C.filter(P=>P.system==="net");if(c({ground:B,net:Z}),t.role===he.ADMIN||t.role===he.MANAGEMENT){const P=[...B,...Z].filter(ne=>ne.status===I.PENDING).length;m(P)}else m(0);console.log(" Silent data refresh completed")}catch(N){console.error(" Error during silent data refresh:",N)}}},[t]),Q=S.useCallback(async()=>{if(t){console.log(" Manual data refresh triggered"),p(!0);try{await X(),console.log(" Manual data refresh completed")}catch(N){console.error(" Error during manual data refresh:",N)}finally{p(!1)}}},[t,X]),Y=S.useCallback(async(N,A,x)=>{if(!t||t.role!=="admin"&&t.role!=="management")throw new Error("Access denied: Only admin and management users can manage special dates");const j=/^\d{4}-\d{2}-\d{2}$/;if(!j.test(N))throw new Error("Invalid date format. Please use YYYY-MM-DD format");let E,_,w;if(x&&A){if(E=N,_=A,!j.test(_))throw new Error("Invalid end date format. Please use YYYY-MM-DD format");if(new Date(_)<new Date(E))throw new Error("End date cannot be before start date");const R=new Date(E),B=new Date(_),Z=Math.abs(B.getTime()-R.getTime());if(Math.ceil(Z/(1e3*60*60*24))>365)throw new Error("Date range cannot exceed 365 days");w=void 0}else E=N,_=void 0,w=A;const v=new Date;if(v.setHours(0,0,0,0),new Date(E)<v)throw new Error("Cannot add past dates as special dates");if(_&&new Date(_)<v)throw new Error("Cannot add past end dates as special dates");let C=3;for(;C>0;)try{const R={created_by:t.id};x&&_?(R.start_date=E,R.end_date=_,R.date=null):(R.date=E,R.start_date=null,R.end_date=null),w&&(R.description=w);const{data:B,error:Z}=await re.from("special_dates").insert([R]).select().single();if(Z){if(Z.code==="23505"&&C>1){console.log(" Date already exists, retrying..."),C--,await new Promise(P=>setTimeout(P,1e3));continue}throw Z}return console.log(" Special date added successfully:",B.id),B}catch(R){if(C<=1)throw console.error(" Error adding special date after retries:",R),R.code==="23505"?new Error("This date or date range is already marked as special"):new Error(`Failed to add special date: ${R.message||"Unknown error"}`);C--,await new Promise(B=>setTimeout(B,1e3))}},[t]),W=S.useCallback(async(N,A)=>{if(!t||t.role!=="admin"&&t.role!=="management")throw new Error("Access denied: Only admin and management users can manage special dates");let x=2;for(;x>0;)try{let j=re.from("special_dates").delete();A?j=j.eq("start_date",N).eq("end_date",A):j=j.or(`date.eq.${N},and(start_date.eq.${N},end_date.eq.${N})`);const{error:E}=await j;if(E)throw E;console.log(" Special date removed successfully:",A?`${N} to ${A}`:N);return}catch(j){if(x<=1)throw console.error(" Error removing special date after retries:",j),new Error(`Failed to remove special date: ${j.message||"Unknown error"}`);x--,await new Promise(E=>setTimeout(E,500))}},[t]),U=S.useCallback(async()=>{try{const{data:N,error:A}=await re.from("booking_requests").select("*").order("created_at",{ascending:!1});if(A)throw A;const x={};N.forEach(w=>{const v=`${w.customer_email}-${w.customer_name}-${w.date}-${w.system}-${w.booking_type}-${w.event_type}`;x[v]||(x[v]=[]),x[v].push(w)});let j=0;for(const[w,v]of Object.entries(x))if(v.length>1){v.sort((Z,P)=>new Date(P.created_at).getTime()-new Date(Z.created_at).getTime());const C=v.slice(1),R=C.map(Z=>Z.id),{error:B}=await re.from("booking_requests").delete().in("id",R);if(B)throw B;j+=C.length}const{data:E,error:_}=await re.from("booking_requests").select("*").order("created_at",{ascending:!0});if(!_){const w=E.filter(C=>C.system==="ground"),v=E.filter(C=>C.system==="net");if(c({ground:w,net:v}),t?.role==="admin"||t?.role==="management"){const C=[...w,...v].filter(R=>R.status===I.PENDING).length;m(C),console.log(` Updated pending request count after cleanup: ${C}`)}}return{deletedCount:j}}catch(N){throw N}},[t?.role]),K={user:t,theme:s,bookings:r,bookingRequests:o,specialDates:g,pendingRequestCount:h,isLoading:d,login:b,logout:u,toggleTheme:y,addBooking:k,updateBooking:M,deleteBooking:L,addBookingRequest:z,approveBookingRequest:G,rejectBookingRequest:V,deleteBookingRequest:$,addSpecialDate:Y,removeSpecialDate:W,cleanupDuplicateRequests:U,recalculatePendingCount:te,refreshData:Q,refreshDataSilent:X};return l.jsx(Yt.Provider,{value:K,children:e})},Mx=({isManagementPortal:e=!1})=>{const{login:t}=S.useContext(Yt),[a,s]=S.useState(""),[n,r]=S.useState(""),[i,o]=S.useState(""),[c,g]=S.useState(""),[f,h]=S.useState(!1),m=d=>{d.preventDefault(),g(""),e?a==="admin@hhs.in"&&n==="HHS@admin"?(h(!0),setTimeout(()=>{t(a,he.ADMIN)},150)):a==="view@hhs.in"&&n==="HHS"?(h(!0),setTimeout(()=>{t(a,he.MANAGEMENT)},150)):g("Invalid username or password."):a==="HHS"&&n==="HHS"?(h(!0),setTimeout(()=>{t(a,he.CUSTOMER,i)},150)):g("Invalid username or password.")};return l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center p-3 sm:p-4 relative overflow-hidden",children:[l.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[l.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-blue-500/20 to-purple-600/20 rounded-full blur-3xl animate-pulse"}),l.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-br from-orange-500/20 to-red-600/20 rounded-full blur-3xl animate-pulse delay-1000"})]}),l.jsxs("div",{className:`w-full max-w-sm sm:max-w-md bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm rounded-3xl shadow-2xl p-6 sm:p-8 space-y-4 sm:space-y-6 border border-white/20 ${f?"animate-fadeOut":"animate-slideInUp"}`,children:[l.jsxs("div",{className:"flex flex-col items-center space-y-3 sm:space-y-4",children:[l.jsx("div",{className:"relative",children:l.jsx("img",{src:"logo.png",alt:"Harvard House Sports Logo",className:"h-32 w-32 sm:h-36 sm:w-36"})}),l.jsx("h1",{className:"text-2xl sm:text-3xl font-display font-bold text-gray-800 dark:text-white text-center",children:"Harvard House Sports"}),l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm sm:text-base font-medium",children:e?"Management Portal":"Customer Portal"}),l.jsx("div",{className:"w-16 h-0.5 bg-gradient-to-r from-orange-400 to-blue-400 mx-auto mt-2 rounded-full"})]})]}),l.jsxs("form",{onSubmit:m,className:"space-y-4 sm:space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"username",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Username"}),l.jsx("input",{id:"username",type:"text",value:a,onChange:d=>s(d.target.value),className:"w-full px-4 py-3 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl shadow-sm placeholder-gray-400 dark:placeholder-gray-500 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 text-sm sm:text-base",placeholder:e?"e.g., admin@hhs.in or view@hhs.in":"HHS"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),l.jsx("input",{id:"password",type:"password",value:n,onChange:d=>r(d.target.value),className:"w-full px-4 py-3 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl shadow-sm placeholder-gray-400 dark:placeholder-gray-500 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 text-sm sm:text-base",placeholder:e?"Enter your password":"HHS"})]}),!e&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),l.jsx("input",{id:"email",type:"email",value:i,onChange:d=>o(d.target.value),className:"w-full px-4 py-3 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl shadow-sm placeholder-gray-400 dark:placeholder-gray-500 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 text-sm sm:text-base",placeholder:"your.email@example.com",required:!0})]}),c&&l.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-3 animate-fadeIn",children:l.jsx("p",{className:"text-red-800 dark:text-red-300 text-sm text-center font-medium",children:c})}),l.jsx("div",{children:l.jsx("button",{type:"submit",disabled:f,className:"group w-full flex justify-center py-3 sm:py-4 px-4 border border-transparent rounded-xl shadow-lg text-sm sm:text-base font-bold text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-4 focus:ring-blue-300/50 transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:scale-100 touch-manipulation",children:f?l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent mr-2"}),"Signing in..."]}):l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{children:"Sign In"}),l.jsx("svg",{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})})]})]})]})},rd=({onCustomerLogin:e,onAdminLogin:t})=>{const[a,s]=S.useState(null),[n,r]=S.useState(0),[i,o]=S.useState(null),[c,g]=S.useState(null),f=()=>{s("customer"),setTimeout(()=>{e()},500)},h=()=>{s("admin"),setTimeout(()=>{t()},500)},m=()=>{window.open("https://www.harvardhousesports.com","_blank")},d=()=>{window.open("https://maps.app.goo.gl/ZrrNhGJAeecU1xrK9","_blank")},p=()=>{window.location.href="mailto:harvardhousesports@gmail.com"},D=()=>{const V="+919062008888",$=encodeURIComponent("Hi, help me to add a booking"),te=`https://wa.me/${V.replace(/[^0-9]/g,"")}?text=${$}`;/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||confirm("Open WhatsApp Web? Click Cancel to make a phone call instead.")?window.open(te,"_blank"):window.open(`tel:${V}`,"_self")},T=()=>{const V="+919062008888",$=encodeURIComponent("Hi, help me to add a booking"),te=`https://wa.me/${V.replace(/[^0-9]/g,"")}?text=${$}`;window.open(te,"_blank")},b=()=>{window.open("tel:+919062008888","_self")},u=()=>{window.open("https://www.facebook.com/pavlionkolkata","_blank")},y=()=>{window.open("https://www.instagram.com/harvardhousesports/","_blank")},k=50,M=V=>{g(null),o(V.targetTouches[0].clientX)},L=V=>{g(V.targetTouches[0].clientX)},z=()=>{if(!i||!c)return;const V=i-c,$=V>k,te=V<-k;$&&n<1&&r(1),te&&n>0&&r(0)},G=V=>{r(V)};return l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4 relative overflow-hidden",children:[l.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[l.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-blue-500/20 to-purple-600/20 rounded-full blur-3xl animate-pulse"}),l.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-br from-orange-500/20 to-red-600/20 rounded-full blur-3xl animate-pulse delay-1000"}),l.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-br from-cyan-500/10 to-blue-600/10 rounded-full blur-3xl animate-pulse delay-500"})]}),l.jsxs("div",{className:"w-full max-w-7xl relative z-10 px-3 md:px-6 lg:px-8",children:[l.jsxs("div",{className:"text-center mb-1 md:mb-3 animate-fadeInUp max-w-sm mx-auto md:max-w-4xl md:mx-auto px-4",children:[l.jsx("div",{className:"inline-block mb-0.5 md:mb-1",children:l.jsx("img",{src:"logo.png",alt:"Harvard House Sports Logo",className:"h-[140px] w-[140px] md:h-[160px] md:w-[160px] mx-auto drop-shadow-lg"})}),l.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-display font-bold text-white mb-0.5 md:mb-1 bg-gradient-to-r from-white via-blue-100 to-white bg-clip-text text-transparent animate-slideInUp leading-tight whitespace-nowrap text-center overflow-hidden",children:"Harvard House Sports"}),l.jsx("p",{className:"text-blue-200 text-xs md:text-sm font-medium mb-2 md:mb-3 animate-fadeIn",children:"53, Matheswartola Road, Kolkata- 700 046"}),l.jsx("div",{className:"w-8 md:w-12 h-1 bg-gradient-to-r from-orange-400 to-blue-400 mx-auto mb-2 md:mb-3 rounded-full animate-scaleIn"}),l.jsxs("div",{className:"animate-fadeIn delay-300 mb-4 md:mb-6",children:[l.jsxs("div",{className:"hidden md:flex flex-wrap justify-center items-center gap-2 md:gap-3 max-w-2xl mx-auto mt-1",children:[l.jsxs("button",{onClick:m,className:"flex items-center justify-center space-x-2 px-3 py-2 bg-white/5 rounded-full border border-white/10 hover:bg-white/10 transition-colors duration-200 group",children:[l.jsx(Tc,{className:"w-4 h-4 text-blue-300 group-hover:text-white flex-shrink-0"}),l.jsx("span",{className:"text-xs text-blue-200 group-hover:text-white font-medium",children:"Website"})]}),l.jsxs("button",{onClick:d,className:"flex items-center justify-center space-x-2 px-3 py-2 bg-white/5 rounded-full border border-white/10 hover:bg-white/10 transition-colors duration-200 group",children:[l.jsx(zc,{className:"w-4 h-4 text-blue-300 group-hover:text-white flex-shrink-0"}),l.jsx("span",{className:"text-xs text-blue-200 group-hover:text-white font-medium",children:"Location"})]}),l.jsxs("button",{onClick:p,className:"flex items-center justify-center space-x-2 px-3 py-2 bg-white/5 rounded-full border border-white/10 hover:bg-white/10 transition-colors duration-200 group",children:[l.jsx(ji,{className:"w-4 h-4 text-blue-300 group-hover:text-white flex-shrink-0"}),l.jsx("span",{className:"text-xs text-blue-200 group-hover:text-white font-medium",children:"Email"})]}),l.jsxs("button",{onClick:D,className:"flex items-center justify-center space-x-2 px-3 py-2 bg-white/5 rounded-full border border-white/10 hover:bg-white/10 transition-colors duration-200 group",children:[l.jsx(Ni,{className:"w-4 h-4 text-blue-300 group-hover:text-white flex-shrink-0"}),l.jsx("span",{className:"text-xs text-blue-200 group-hover:text-white font-medium",children:"Call"})]})]}),l.jsxs("div",{className:"mobile-contact-buttons md:hidden",children:[l.jsxs("button",{onClick:m,className:"flex items-center justify-center space-x-1.5 xs:space-x-2 px-2 xs:px-2.5 sm:px-3 py-1.5 bg-white/5 rounded-full border border-white/10 hover:bg-white/10 transition-colors duration-200 group min-w-0 flex-1 xs:flex-none",children:[l.jsx(Tc,{className:"w-3 h-3 xs:w-3.5 xs:h-3.5 text-blue-300 group-hover:text-white flex-shrink-0"}),l.jsx("span",{className:"text-xs text-blue-200 group-hover:text-white font-medium truncate",children:"Web"})]}),l.jsxs("button",{onClick:d,className:"flex items-center justify-center space-x-1.5 xs:space-x-2 px-2 xs:px-2.5 sm:px-3 py-1.5 bg-white/5 rounded-full border border-white/10 hover:bg-white/10 transition-colors duration-200 group min-w-0 flex-1 xs:flex-none",children:[l.jsx(zc,{className:"w-3 h-3 xs:w-3.5 xs:h-3.5 text-blue-300 group-hover:text-white flex-shrink-0"}),l.jsx("span",{className:"text-xs text-blue-200 group-hover:text-white font-medium truncate",children:"Map"})]}),l.jsxs("button",{onClick:p,className:"flex items-center justify-center space-x-1.5 xs:space-x-2 px-2 xs:px-2.5 sm:px-3 py-1.5 bg-white/5 rounded-full border border-white/10 hover:bg-white/10 transition-colors duration-200 group min-w-0 flex-1 xs:flex-none",children:[l.jsx(ji,{className:"w-3 h-3 xs:w-3.5 xs:h-3.5 text-blue-300 group-hover:text-white flex-shrink-0"}),l.jsx("span",{className:"text-xs text-blue-200 group-hover:text-white font-medium truncate",children:"Mail"})]}),l.jsxs("button",{onClick:T,className:"flex items-center justify-center space-x-1.5 xs:space-x-2 px-2 xs:px-2.5 sm:px-3 py-1.5 bg-white/5 rounded-full border border-white/10 hover:bg-white/10 transition-colors duration-200 group min-w-0 flex-1 xs:flex-none",children:[l.jsx(Sg,{className:"w-3 h-3 xs:w-3.5 xs:h-3.5 text-green-400 group-hover:text-green-300 flex-shrink-0"}),l.jsx("span",{className:"text-xs text-blue-200 group-hover:text-white font-medium truncate",children:"WA"})]}),l.jsxs("button",{onClick:b,className:"flex items-center justify-center space-x-1.5 xs:space-x-2 px-2 xs:px-2.5 sm:px-3 py-1.5 bg-white/5 rounded-full border border-white/10 hover:bg-white/10 transition-colors duration-200 group min-w-0 flex-1 xs:flex-none",children:[l.jsx(Ni,{className:"w-3 h-3 xs:w-3.5 xs:h-3.5 text-blue-300 group-hover:text-white flex-shrink-0"}),l.jsx("span",{className:"text-xs text-blue-200 group-hover:text-white font-medium truncate",children:"Call"})]})]})]})]}),l.jsxs("div",{className:"hidden md:grid md:grid-cols-2 gap-4 lg:gap-6 max-w-4xl mx-auto",children:[l.jsx("div",{className:"group bg-white/95 backdrop-blur-sm rounded-3xl shadow-2xl p-3 hover:shadow-3xl transition-all duration-500 transform hover:-translate-y-2 hover:scale-105 border border-white/20 animate-slideInLeft delay-200",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"relative mb-2.5",children:l.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-orange-400 to-red-500 rounded-2xl flex items-center justify-center mx-auto shadow-xl group-hover:shadow-2xl transition-all duration-300 transform group-hover:rotate-6",children:l.jsx(ki,{className:"w-10 h-10 text-white"})})}),l.jsx("h2",{className:"text-lg font-bold text-gray-800 mb-1.5 group-hover:text-orange-600 transition-colors duration-300",children:"Customer Portal"}),l.jsx("p",{className:"text-gray-600 mb-3 text-sm leading-relaxed",children:"Book sports facilities instantly with real-time availability, manage your reservations, track booking history, and receive instant confirmations for all your sporting needs"}),l.jsxs("div",{className:"space-y-1.5 mb-3",children:[l.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-600",children:[l.jsx("div",{className:"w-1.5 h-1.5 bg-orange-400 rounded-full animate-pulse"}),l.jsx("span",{className:"text-xs font-medium",children:"Real-time availability"})]}),l.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-600",children:[l.jsx("div",{className:"w-1.5 h-1.5 bg-orange-400 rounded-full animate-pulse delay-100"}),l.jsx("span",{className:"text-xs font-medium",children:"Instant booking requests"})]}),l.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-600",children:[l.jsx("div",{className:"w-1.5 h-1.5 bg-orange-400 rounded-full animate-pulse delay-200"}),l.jsx("span",{className:"text-xs font-medium",children:"Live status updates"})]})]}),l.jsx("button",{onClick:f,disabled:a!==null,className:"group/btn w-full bg-gradient-to-r from-orange-500 to-red-500 text-white py-2.5 px-3 rounded-2xl font-bold text-sm hover:from-orange-600 hover:to-red-600 focus:outline-none focus:ring-4 focus:ring-orange-300/50 transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:scale-100 shadow-lg hover:shadow-xl",children:a==="customer"?l.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),l.jsx("span",{children:"Accessing Portal..."})]}):l.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[l.jsx("span",{children:"Enter Customer Portal"}),l.jsx(hs,{className:"w-5 h-5 group-hover/btn:translate-x-1 transition-transform duration-200 flex-shrink-0"})]})})]})}),l.jsx("div",{className:"group bg-white/95 backdrop-blur-sm rounded-3xl shadow-2xl p-3 hover:shadow-3xl transition-all duration-500 transform hover:-translate-y-2 hover:scale-105 border border-white/20 animate-slideInRight delay-400",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"relative mb-2.5",children:l.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center mx-auto shadow-xl group-hover:shadow-2xl transition-all duration-300 transform group-hover:-rotate-6",children:l.jsx(Si,{className:"w-10 h-10 text-white"})})}),l.jsx("h2",{className:"text-lg font-bold text-gray-800 mb-1.5 group-hover:text-blue-600 transition-colors duration-300",children:"Management Portal"}),l.jsx("p",{className:"text-gray-600 mb-3 text-sm leading-relaxed",children:"Oversee all facility bookings, manage customer requests, generate detailed reports, handle payments, and optimize resource allocation with advanced analytics"}),l.jsxs("div",{className:"space-y-1.5 mb-3",children:[l.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-600",children:[l.jsx("div",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full animate-pulse delay-200"}),l.jsx("span",{className:"text-xs font-medium",children:"Request management"})]}),l.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-600",children:[l.jsx("div",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full animate-pulse delay-300"}),l.jsx("span",{className:"text-xs font-medium",children:"Advanced analytics"})]}),l.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-600",children:[l.jsx("div",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full animate-pulse delay-400"}),l.jsx("span",{className:"text-xs font-medium",children:"Data export tools"})]})]}),l.jsx("button",{onClick:h,disabled:a!==null,className:"group/btn w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-2.5 px-3 rounded-2xl font-bold text-sm hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-4 focus:ring-blue-300/50 transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:scale-100 shadow-lg hover:shadow-xl",children:a==="admin"?l.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),l.jsx("span",{children:"Accessing Portal..."})]}):l.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[l.jsx("span",{children:"Enter Management Portal"}),l.jsx(hs,{className:"w-5 h-5 group-hover/btn:translate-x-1 transition-transform duration-200 flex-shrink-0"})]})})]})})]}),l.jsx("div",{className:"md:hidden",children:l.jsxs("div",{className:"relative max-w-sm mx-auto",children:[l.jsx("div",{className:"overflow-hidden rounded-3xl",onTouchStart:M,onTouchMove:L,onTouchEnd:z,children:l.jsxs("div",{className:"flex transition-transform duration-300 ease-in-out",style:{transform:`translateX(-${n*100}%)`},children:[l.jsx("div",{className:"w-full flex-shrink-0",children:l.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-3xl shadow-2xl p-3 border border-white/20 mx-2",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"relative mb-2",children:l.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-orange-400 to-red-500 rounded-xl flex items-center justify-center mx-auto shadow-xl",children:l.jsx(ki,{className:"w-7 h-7 text-white"})})}),l.jsx("h2",{className:"text-base font-bold text-gray-800 mb-1.5",children:"Customer Portal"}),l.jsx("p",{className:"text-gray-600 mb-2.5 text-sm leading-relaxed",children:"Book facilities instantly with real-time availability and track your reservations"}),l.jsxs("div",{className:"space-y-1 mb-2.5",children:[l.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-600",children:[l.jsx("div",{className:"w-1.5 h-1.5 bg-orange-400 rounded-full animate-pulse"}),l.jsx("span",{className:"text-xs font-medium",children:"Real-time availability"})]}),l.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-600",children:[l.jsx("div",{className:"w-1.5 h-1.5 bg-orange-400 rounded-full animate-pulse delay-100"}),l.jsx("span",{className:"text-xs font-medium",children:"Instant bookings"})]})]}),l.jsx("button",{onClick:f,disabled:a!==null,className:"group/btn w-full bg-gradient-to-r from-orange-500 to-red-500 text-white py-2 px-3 rounded-2xl font-bold text-sm hover:from-orange-600 hover:to-red-600 focus:outline-none focus:ring-4 focus:ring-orange-300/50 transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:scale-100 shadow-lg hover:shadow-xl",children:a==="customer"?l.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),l.jsx("span",{className:"text-xs",children:"Accessing Portal..."})]}):l.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[l.jsx("span",{className:"text-xs",children:"Enter Portal"}),l.jsx(hs,{className:"w-3 h-3 group-hover/btn:translate-x-1 transition-transform duration-200 flex-shrink-0"})]})})]})})}),l.jsx("div",{className:"w-full flex-shrink-0",children:l.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-3xl shadow-2xl p-3 border border-white/20 mx-2",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"relative mb-2",children:l.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center mx-auto shadow-xl",children:l.jsx(Si,{className:"w-7 h-7 text-white"})})}),l.jsx("h2",{className:"text-base font-bold text-gray-800 mb-1.5",children:"Management Portal"}),l.jsx("p",{className:"text-gray-600 mb-2.5 text-sm leading-relaxed",children:"Manage bookings, handle requests, and access advanced analytics tools"}),l.jsxs("div",{className:"space-y-1 mb-2.5",children:[l.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-600",children:[l.jsx("div",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full animate-pulse delay-200"}),l.jsx("span",{className:"text-xs font-medium",children:"Request management"})]}),l.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-600",children:[l.jsx("div",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full animate-pulse delay-300"}),l.jsx("span",{className:"text-xs font-medium",children:"Advanced analytics"})]})]}),l.jsx("button",{onClick:h,disabled:a!==null,className:"group/btn w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-2 px-3 rounded-2xl font-bold text-sm hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-4 focus:ring-blue-300/50 transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:scale-100 shadow-lg hover:shadow-xl",children:a==="admin"?l.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),l.jsx("span",{className:"text-xs",children:"Accessing Portal..."})]}):l.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[l.jsx("span",{className:"text-xs",children:"Enter Portal"}),l.jsx(hs,{className:"w-3 h-3 group-hover/btn:translate-x-1 transition-transform duration-200 flex-shrink-0"})]})})]})})})]})}),l.jsx("div",{className:"flex justify-center mt-4",children:l.jsxs("div",{className:"relative bg-gray-200/50 rounded-full p-1 w-32 h-3 backdrop-blur-sm",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-100/50 to-gray-200/50 rounded-full"}),l.jsx("div",{className:`absolute top-1 h-1 rounded-full transition-all duration-500 ease-in-out ${n===0?"w-12 bg-gradient-to-r from-orange-400 to-red-500 left-1":"w-12 bg-gradient-to-r from-blue-500 to-indigo-600 right-1"} shadow-sm`,children:l.jsx("div",{className:`absolute inset-0 rounded-full animate-pulse ${n===0?"bg-orange-300":"bg-blue-300"} opacity-30`})}),l.jsx("button",{onClick:()=>G(0),className:"absolute left-0 top-0 w-1/2 h-full rounded-l-full hover:bg-white/10 transition-colors duration-200","aria-label":"Customer Portal Slide"}),l.jsx("button",{onClick:()=>G(1),className:"absolute right-0 top-0 w-1/2 h-full rounded-r-full hover:bg-white/10 transition-colors duration-200","aria-label":"Management Portal Slide"})]})})]})}),l.jsx("div",{className:"text-center mt-4 md:mt-6 animate-fadeInUp delay-700",children:l.jsxs("div",{className:"inline-flex items-center space-x-2 bg-white/10 backdrop-blur-sm rounded-full px-3 py-1 border border-white/20",children:[l.jsxs("div",{className:"flex space-x-1",children:[l.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-pulse"}),l.jsx("div",{className:"w-2 h-2 bg-orange-400 rounded-full animate-pulse delay-200"}),l.jsx("div",{className:"w-2 h-2 bg-indigo-400 rounded-full animate-pulse delay-400"})]}),l.jsx("span",{className:"text-blue-100 text-xs font-medium",children:"Choose your portal to continue"})]})}),l.jsx("div",{className:"text-center mt-3 md:mt-4 animate-fadeInUp delay-1000",children:l.jsxs("div",{className:"flex justify-center items-center space-x-4",children:[l.jsx("button",{onClick:u,className:"flex items-center justify-center w-10 h-10 bg-white/10 backdrop-blur-sm rounded-full border border-white/20 hover:bg-white/20 transition-all duration-300 group transform hover:scale-110","aria-label":"Follow us on Facebook",children:l.jsx(_g,{className:"w-5 h-5 text-blue-300 group-hover:text-blue-400 transition-colors duration-300"})}),l.jsx("button",{onClick:y,className:"flex items-center justify-center w-10 h-10 bg-white/10 backdrop-blur-sm rounded-full border border-white/20 hover:bg-white/20 transition-all duration-300 group transform hover:scale-110","aria-label":"Follow us on Instagram",children:l.jsx(Eg,{className:"w-5 h-5 text-pink-300 group-hover:text-pink-400 transition-colors duration-300"})})]})})]})]})},Ne={CUSTOMER_NAME:"customerName",CUSTOMER_EMAIL:"customerEmail",CUSTOMER_REMEMBER_ME:"customerRememberMe",CUSTOMER_LAST_LOGIN_TIME:"customerLastLoginTime",CUSTOMER_LOGOUT:"customerLogout"},rg=7,Ax=rg*24*60*60*1e3,Tx=500,zx=3e3,Rx=({onBack:e})=>{const{login:t}=S.useContext(Yt),[a,s]=S.useState({name:"",email:""}),[n,r]=S.useState(""),[i,o]=S.useState(!1),[c,g]=S.useState(!1),[f,h]=S.useState(!1),m=S.useCallback(u=>{try{return localStorage.getItem(u)}catch(y){return console.warn(`Failed to read from localStorage (${u}):`,y),null}},[]),d=S.useCallback((u,y)=>{try{localStorage.setItem(u,y)}catch(k){console.warn(`Failed to write to localStorage (${u}):`,k)}},[]),p=S.useCallback(u=>{try{localStorage.removeItem(u)}catch(y){console.warn(`Failed to remove from localStorage (${u}):`,y)}},[]);S.useEffect(()=>{const u=y=>{if(f&&y.key==="Enter"&&!i){y.preventDefault();const k=document.querySelector("form");if(k){const M=new Event("submit",{bubbles:!0,cancelable:!0});k.dispatchEvent(M)}}};if(f)return document.addEventListener("keydown",u),()=>document.removeEventListener("keydown",u)},[f,i]),S.useEffect(()=>{const u=m(Ne.CUSTOMER_NAME),y=m(Ne.CUSTOMER_EMAIL),k=m(Ne.CUSTOMER_REMEMBER_ME)==="true",M=m(Ne.CUSTOMER_LAST_LOGIN_TIME),L=Date.now()-Ax;if(k&&u&&y&&M){const z=parseInt(M,10);if(!isNaN(z)&&z>L){s({name:u,email:y}),g(!0),h(!0),console.log(" Auto-populated customer login form from saved data"),setTimeout(()=>{const G=document.querySelector('button[type="submit"]');G&&G.focus()},Tx);return}}if(M){const z=parseInt(M,10);(isNaN(z)||z<=L)&&(p(Ne.CUSTOMER_NAME),p(Ne.CUSTOMER_EMAIL),p(Ne.CUSTOMER_REMEMBER_ME),p(Ne.CUSTOMER_LAST_LOGIN_TIME),console.log(` Cleared expired customer login data (older than ${rg} days)`))}},[m,p]);const D=S.useCallback(u=>{const{name:y,value:k}=u.target;s(M=>({...M,[y]:k})),n&&r("")},[n]),T=S.useCallback(u=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u),[]),b=S.useCallback(u=>{u.preventDefault(),r("");const y=a.name.trim(),k=a.email.trim();if(!y){r("Please enter your name"),document.getElementById("name")?.focus();return}if(!k){r("Please enter your email address"),document.getElementById("email")?.focus();return}if(!T(k)){r("Please enter a valid email address"),document.getElementById("email")?.focus();return}const M=y.replace(/\s+/g," "),L=k.toLowerCase();console.log(" Customer Login Debug:",{originalName:a.name,originalEmail:a.email,normalizedName:M,normalizedEmail:L}),o(!0),setTimeout(()=>{try{if(c?(d(Ne.CUSTOMER_NAME,M),d(Ne.CUSTOMER_EMAIL,L),d(Ne.CUSTOMER_REMEMBER_ME,"true"),d(Ne.CUSTOMER_LAST_LOGIN_TIME,Date.now().toString()),console.log(" Saved customer login data to localStorage")):(p(Ne.CUSTOMER_NAME),p(Ne.CUSTOMER_EMAIL),p(Ne.CUSTOMER_REMEMBER_ME),p(Ne.CUSTOMER_LAST_LOGIN_TIME),console.log(" Cleared customer login data from localStorage")),!c){const z=G=>{G.key===Ne.CUSTOMER_LOGOUT&&G.newValue==="true"&&(p(Ne.CUSTOMER_NAME),p(Ne.CUSTOMER_EMAIL),p(Ne.CUSTOMER_REMEMBER_ME),p(Ne.CUSTOMER_LAST_LOGIN_TIME),p(Ne.CUSTOMER_LOGOUT),console.log(" Auto-cleared customer data on logout"))};window.addEventListener("storage",z),setTimeout(()=>{window.removeEventListener("storage",z)},6e4)}t(M,he.CUSTOMER,L)}catch(z){console.error(" Error during login process:",z),r("An error occurred during login. Please try again."),o(!1)}},500)},[a,c,t,d,p,T]);return l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center p-3 sm:p-4 relative overflow-hidden",children:[l.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[l.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-orange-500/20 to-red-600/20 rounded-full blur-3xl animate-pulse"}),l.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-br from-blue-500/20 to-purple-600/20 rounded-full blur-3xl animate-pulse delay-1000"})]}),l.jsxs("div",{className:`w-full max-w-sm sm:max-w-md bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm rounded-3xl shadow-2xl p-6 sm:p-8 space-y-4 sm:space-y-6 border border-white/20 ${i?"animate-fadeOut":"animate-slideInUp"}`,children:[l.jsxs("div",{className:"flex flex-col items-center space-y-3 sm:space-y-4",children:[l.jsx("div",{className:"relative",children:l.jsx("img",{src:"logo.png",alt:"Harvard House Sports Logo",className:"h-32 w-32 sm:h-36 sm:w-36"})}),l.jsx("h1",{className:"text-2xl sm:text-3xl font-display font-bold text-gray-800 dark:text-white text-center",children:"Harvard House Sports"}),l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm sm:text-base font-medium",children:"Customer Portal"}),l.jsx("div",{className:"w-16 h-0.5 bg-gradient-to-r from-orange-400 to-red-400 mx-auto mt-2 rounded-full"})]})]}),l.jsxs("form",{onSubmit:b,className:"space-y-4 sm:space-y-6",noValidate:!0,children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"name",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Full Name *"}),l.jsx("input",{id:"name",name:"name",type:"text",value:a.name,onChange:D,className:`w-full px-4 py-3 bg-white dark:bg-gray-700 border rounded-xl shadow-sm placeholder-gray-400 dark:placeholder-gray-500 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-300 text-sm sm:text-base ${n&&!a.name.trim()?"border-red-300 dark:border-red-600":"border-gray-200 dark:border-gray-600"}`,placeholder:"Enter your full name",required:!0,"aria-invalid":n&&!a.name.trim()?"true":"false","aria-describedby":n&&!a.name.trim()?"name-error":void 0,autoComplete:"name"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Email Address *"}),l.jsx("input",{id:"email",name:"email",type:"email",value:a.email,onChange:D,className:`w-full px-4 py-3 bg-white dark:bg-gray-700 border rounded-xl shadow-sm placeholder-gray-400 dark:placeholder-gray-500 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-300 text-sm sm:text-base ${n&&(!a.email.trim()||!T(a.email.trim()))?"border-red-300 dark:border-red-600":"border-gray-200 dark:border-gray-600"}`,placeholder:"your.email@example.com",required:!0,"aria-invalid":n&&(!a.email.trim()||!T(a.email.trim()))?"true":"false","aria-describedby":n&&(!a.email.trim()||!T(a.email.trim()))?"email-error":void 0,autoComplete:"email"})]}),n&&l.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-3 animate-fadeIn",role:"alert","aria-live":"polite",children:l.jsx("p",{className:"text-red-800 dark:text-red-300 text-sm text-center font-medium",id:"form-error",children:n})}),f&&l.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl p-3 animate-fadeIn",role:"status","aria-live":"polite",children:l.jsxs("p",{className:"text-green-800 dark:text-green-300 text-sm text-center font-medium flex items-center justify-center space-x-2",children:[l.jsx("span",{children:" Login details restored from previous session"}),l.jsx("span",{className:"text-xs bg-green-100 dark:bg-green-900/50 px-2 py-1 rounded-full",children:"Press Enter to login"})]})}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("input",{id:"rememberMe",name:"rememberMe",type:"checkbox",checked:c,onChange:u=>g(u.target.checked),className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded","aria-describedby":"rememberMe-description"}),l.jsx("label",{htmlFor:"rememberMe",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Remember me"})]}),(m(Ne.CUSTOMER_NAME)||m(Ne.CUSTOMER_EMAIL))&&l.jsx("button",{type:"button",onClick:()=>{try{p(Ne.CUSTOMER_NAME),p(Ne.CUSTOMER_EMAIL),p(Ne.CUSTOMER_REMEMBER_ME),p(Ne.CUSTOMER_LAST_LOGIN_TIME),s({name:"",email:""}),g(!1),console.log(" User manually cleared customer login data");const u=document.createElement("div");u.className="fixed top-4 right-4 bg-green-100 dark:bg-green-900/50 border border-green-200 dark:border-green-800 text-green-800 dark:text-green-300 px-4 py-2 rounded-lg shadow-lg z-50 animate-fadeIn",u.textContent=" Saved login data cleared",u.setAttribute("role","status"),u.setAttribute("aria-live","polite"),document.body.appendChild(u),setTimeout(()=>{document.body.contains(u)&&document.body.removeChild(u)},zx)}catch(u){console.error(" Error clearing saved data:",u),r("Failed to clear saved data. Please try again.")}},className:"text-xs text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 underline focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 rounded","aria-label":"Clear saved login data",children:"Clear saved data"})]}),l.jsx("div",{children:l.jsx("button",{type:"submit",disabled:i||!a.name.trim()||!a.email.trim(),className:"group w-full flex justify-center py-3 sm:py-4 px-4 border border-transparent rounded-xl shadow-lg text-sm sm:text-base font-bold text-white bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 focus:outline-none focus:ring-4 focus:ring-orange-300/50 transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:scale-100 disabled:cursor-not-allowed touch-manipulation","aria-describedby":i?"submit-status":void 0,children:i?l.jsxs("div",{className:"flex items-center justify-center space-x-3",id:"submit-status",children:[l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent","aria-hidden":"true"}),l.jsx("span",{children:"Signing in..."})]}):l.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[l.jsx("span",{children:"Sign In / Sign Up"}),l.jsx("svg",{className:"w-4 h-4 group-hover:translate-x-1 transition-transform duration-200 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})})]})]})]})},qx=[{date:"2024-01-26",name:"Republic Day"},{date:"2024-03-25",name:"Holi"},{date:"2024-08-15",name:"Independence Day"},{date:"2024-10-02",name:"Gandhi Jayanti"},{date:"2024-11-01",name:"Diwali"}],Ox=["07:00 AM - 08:00 AM","08:00 AM - 09:00 AM","09:00 AM - 10:00 AM","10:00 AM - 11:00 AM","11:00 AM - 12:00 PM","12:00 PM - 01:00 PM","01:00 PM - 02:00 PM","02:00 PM - 03:00 PM","03:00 PM - 04:00 PM","04:00 PM - 05:00 PM","05:00 PM - 06:00 PM","06:00 PM - 07:00 PM","07:00 PM - 08:00 PM","08:00 PM - 09:00 PM","09:00 PM - 10:00 PM"],ig=["02:00 PM - 05:30 PM","06:00 PM - 09:30 PM"],og=["07:00 AM - 10:30 AM","10:45 AM - 02:15 PM","02:30 PM - 06:00 PM","06:15 PM - 09:45 PM"],Er=[...ig,...og],Ux=e=>{const t=e.getDay();return t===0||t===6},Bx=(e,t)=>{if(Ux(e))return!0;if(t&&t.length>0){const a=Lx(e);return t.some(s=>{if(!s.is_active)return!1;if(s.date===a)return!0;if(s.start_date&&s.end_date){const n=new Date(s.start_date),r=new Date(s.end_date),i=new Date(a);return i>=n&&i<=r}return!1})}return!1},Dr=(e,t)=>Bx(e,t)?og:ig,Cr=Ox,Lx=e=>{const t=e.getFullYear(),a=(e.getMonth()+1).toString().padStart(2,"0"),s=e.getDate().toString().padStart(2,"0");return`${t}-${a}-${s}`},yi=e=>{const t=e.getFullYear(),a=(e.getMonth()+1).toString().padStart(2,"0"),s=e.getDate().toString().padStart(2,"0");return`${t}-${a}-${s}`},Hx=({bookings:e,bookingRequests:t,openModal:a,system:s,onApproveRequest:n,onRejectRequest:r,onManageSpecialDates:i})=>{const{user:o,specialDates:c}=S.useContext(Yt),[g,f]=S.useState(new Date),[h,m]=S.useState("grid");S.useEffect(()=>{const X=()=>{window.innerWidth<768,m("grid")};return X(),window.addEventListener("resize",X),()=>window.removeEventListener("resize",X)},[]);const d=S.useMemo(()=>{const X=new Map;return qx.forEach(Q=>X.set(Q.date,Q)),X},[]),p=X=>{const Q=yi(X);return c.some(Y=>{if(!Y.is_active)return!1;if(Y.date===Q)return!0;if(Y.start_date&&Y.end_date){const W=new Date(Y.start_date),U=new Date(Y.end_date),K=new Date(Q);return K>=W&&K<=U}return!1})},D=S.useMemo(()=>{const X=new Map;return e.forEach(Q=>{const Y=Q.date;X.has(Y)||X.set(Y,[]),X.get(Y).push({...Q,isRequest:!1})}),t.forEach(Q=>{const Y=Q.date;X.has(Y)||X.set(Y,[]),X.get(Y).push({...Q,isRequest:!0})}),X},[e,t]),T=new Date(g.getFullYear(),g.getMonth(),1),b=new Date(g.getFullYear(),g.getMonth()+1,0),u=T.getDay(),y=b.getDate(),k=Array.from({length:u+y},(X,Q)=>Q<u?null:new Date(g.getFullYear(),g.getMonth(),Q-u+1)),M=()=>f(new Date(g.getFullYear(),g.getMonth()-1,1)),L=()=>f(new Date(g.getFullYear(),g.getMonth()+1,1)),z=()=>f(new Date),G=()=>l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"grid grid-cols-7 text-center font-semibold text-gray-500 dark:text-gray-400 border-b dark:border-gray-700 pb-1 sm:pb-2 text-xs sm:text-base",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(X=>l.jsx("div",{className:"py-1 sm:py-2 text-xs sm:text-base",children:X},X))}),l.jsx("div",{className:"grid grid-cols-7 flex-grow",children:k.map((X,Q)=>{if(!X)return l.jsx("div",{className:"border-r border-b dark:border-gray-700"},`empty-${Q}`);const Y=yi(X),W=X.getDay(),U=W===0||W===6,K=d.has(Y),N=p(X),A=X.toDateString()===new Date().toDateString(),x=D.get(Y)||[];return l.jsxs("div",{className:`group border-r border-b dark:border-gray-700 p-0.5 sm:p-0.5 md:p-1 flex flex-col relative min-h-[3.5rem] sm:min-h-[4rem] md:min-h-[4rem] lg:min-h-[5rem] transition-colors ${A?"bg-brand-gold/20":""}`,children:[l.jsx("span",{className:`text-sm sm:text-sm md:text-sm font-bold ${U||K||N?"text-brand-orange":"text-gray-700 dark:text-gray-300"}`,children:X.getDate()}),K&&l.jsx("span",{className:"text-xs text-red-500 truncate leading-tight",children:d.get(Y)?.name}),l.jsxs("div",{className:"flex-grow flex flex-wrap gap-0.5 sm:gap-1 md:gap-1 justify-center",children:[x.slice(0,3).map(j=>l.jsx("div",{className:`h-2 w-2 sm:h-2 sm:w-2 md:h-2 md:w-2 rounded-full ${j.isRequest&&j.status===I.PENDING?"bg-yellow-400":"bg-brand-blue"}`,title:`${j.customer_name} - ${j.slots?.join(", ")||"Full Day"}${j.isRequest?" (REQUEST)":""}`},j.id)),x.length>3&&l.jsx("div",{className:"h-2 w-2 sm:h-2 sm:w-2 md:h-2 md:w-2 rounded-full bg-gray-400 text-xs flex items-center justify-center",title:`${x.length-3} more...`})]}),o?.role===he.ADMIN&&l.jsx("button",{onClick:()=>a(X),className:"absolute top-0.5 right-0.5 sm:top-1 sm:right-1 md:top-1 md:right-1 h-2 w-2 sm:h-6 sm:w-6 md:h-7 md:w-7 flex items-center justify-center opacity-60 text-brand-orange hover:text-brand-orange/80 sm:opacity-0 sm:group-hover:opacity-100 transition-all transform hover:scale-110 active:scale-95 touch-manipulation z-10",children:l.jsx("div",{className:"flex items-center justify-center",children:l.jsx(ka,{size:6,className:"sm:w-[12px] sm:h-[12px] md:w-[16px] md:h-[16px]"})})}),x.length>0&&l.jsx("div",{className:"absolute top-6 sm:top-8 left-0 w-full p-0.5 sm:p-2 opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto transition-opacity duration-300 z-20",children:l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-1.5 sm:p-3 max-w-xs w-full border dark:border-gray-700",children:[l.jsx("h4",{className:"font-bold text-xs sm:text-sm mb-1 sm:mb-2 text-gray-800 dark:text-gray-200",children:X.toLocaleDateString("en-GB",{weekday:"short",day:"numeric"})}),l.jsx("div",{className:"space-y-0.5 sm:space-y-1 max-h-32 sm:max-h-40 overflow-y-auto",children:x.map(j=>l.jsx("div",{onClick:()=>a(X,j),className:`p-1 sm:p-1.5 rounded cursor-pointer text-xs sm:text-xs ${j.isRequest&&j.status===I.PENDING?"bg-yellow-50 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-300 border border-yellow-200 dark:border-yellow-800":"bg-brand-blue/10 dark:bg-brand-blue-light/20 text-brand-dark dark:text-gray-300 hover:bg-brand-blue/20 dark:hover:bg-brand-blue-light/40"}`,children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("p",{className:"font-semibold truncate text-xs sm:text-sm",children:[j.customer_name," ",j.isRequest&&"(REQUEST)"]}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-xs mt-0.5",children:j.booking_type===ce.FULL_DAY?"Full Day":j.slots?.join(", ")})]}),j.isRequest&&j.status===I.PENDING&&n&&r&&o?.role===he.ADMIN&&l.jsxs("div",{className:"flex gap-0.5 sm:gap-0.5 ml-1 sm:ml-1 flex-shrink-0",children:[l.jsx("button",{onClick:E=>{E.stopPropagation(),n(j.id,s)},className:"p-1 sm:p-1 rounded bg-green-100 text-green-700 hover:bg-green-200 dark:bg-green-900/50 dark:text-green-300 dark:hover:bg-green-900/70 flex items-center justify-center min-w-[24px] min-h-[24px] sm:min-w-[24px] sm:min-h-[24px]",title:"Approve Request",children:l.jsx(zn,{size:10,className:"sm:w-[10px] sm:h-[10px]"})}),l.jsx("button",{onClick:E=>{E.stopPropagation(),r(j.id,s)},className:"p-1 sm:p-1 rounded bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900/50 dark:text-red-300 dark:hover:bg-red-900/70 flex items-center justify-center min-w-[24px] min-h-[24px] sm:min-w-[24px] sm:min-h-[24px]",title:"Reject Request",children:l.jsx(pt,{size:10,className:"sm:w-[10px] sm:h-[10px]"})})]})]})},j.id))})]})})]},Y)})})]}),V=()=>l.jsx("div",{className:"space-y-2 sm:space-y-3",children:k.filter(X=>X).map(X=>{if(!X)return null;const Q=yi(X),Y=D.get(Q)||[],W=X.toDateString()===new Date().toDateString(),U=X.getDay()===0||X.getDay()===6,K=d.get(Q),N=p(X);return l.jsxs("div",{className:`p-3 sm:p-4 rounded-lg ${W?"bg-brand-gold/20":"bg-gray-50 dark:bg-gray-700/50"}`,children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:`font-bold text-sm sm:text-base text-gray-800 dark:text-gray-200 ${U||K||N?"text-brand-orange":""}`,children:X.toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short"})}),K&&l.jsx("p",{className:"text-xs text-red-500",children:K.name})]}),o?.role===he.ADMIN&&l.jsx("button",{onClick:()=>a(X),className:"h-3 w-3 sm:h-7 sm:w-7 flex items-center justify-center text-brand-orange hover:text-brand-orange/80 transition-all transform hover:scale-110",children:l.jsx("div",{className:"flex items-center justify-center",children:l.jsx(ka,{size:8,className:"sm:w-[18px] sm:h-[18px]"})})})]}),l.jsx("div",{className:"mt-2 space-y-1.5 sm:space-y-2",children:Y.length>0?Y.map(A=>l.jsx("div",{onClick:()=>a(X,A),className:`p-2 sm:p-2.5 rounded shadow-sm cursor-pointer ${A.isRequest&&A.status===I.PENDING?"bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-400":"bg-white dark:bg-gray-800 border-l-4 border-brand-blue"}`,children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("p",{className:"font-semibold text-xs sm:text-sm text-gray-800 dark:text-gray-200 truncate",children:[A.customer_name," ",A.isRequest&&"(REQUEST)"]}),l.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:[A.booking_type===ce.FULL_DAY?"Full Day":A.slots?.join(", ")," - ",(()=>{const x=A.net_number&&(Array.isArray(A.net_number)?A.net_number.length:A.net_number)?Array.isArray(A.net_number)?A.net_number.map(j=>`Net ${j}`).join(", "):`Net ${A.net_number}`:"";return A.event_type?`${A.event_type}${x?` (${x})`:""}`:x||"No details"})()]})]}),A.isRequest&&A.status===I.PENDING&&n&&r&&o?.role===he.ADMIN&&l.jsxs("div",{className:"flex gap-0.5 sm:gap-1 ml-2 flex-shrink-0",children:[l.jsx("button",{onClick:x=>{x.stopPropagation(),n(A.id,s)},className:"p-0.5 sm:p-1 rounded bg-green-100 text-green-700 hover:bg-green-200 dark:bg-green-900/50 dark:text-green-300 dark:hover:bg-green-900/70 flex items-center justify-center",title:"Approve Request",children:l.jsx(zn,{size:10,className:"sm:w-[12px] sm:h-[12px]"})}),l.jsx("button",{onClick:x=>{x.stopPropagation(),r(A.id,s)},className:"p-0.5 sm:p-1 rounded bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900/50 dark:text-red-300 dark:hover:bg-red-900/70 flex items-center justify-center",title:"Reject Request",children:l.jsx(pt,{size:10,className:"sm:w-[12px] sm:h-[12px]"})})]})]})},A.id)):l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"No bookings."})})]},Q)})}),$=()=>l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-2 sm:mb-3 gap-2 sm:gap-3",children:[l.jsx("div",{className:"text-lg sm:text-xl lg:text-2xl font-display font-bold text-brand-dark dark:text-white text-center sm:text-left",children:g.toLocaleString("default",{month:"long",year:"numeric"})}),l.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2 text-gray-700 dark:text-gray-300 w-full sm:w-auto justify-center sm:justify-end",children:[o?.role===he.ADMIN&&i&&l.jsx("button",{onClick:i,className:"p-2 sm:p-2.5 rounded-full bg-gradient-to-r from-orange-100 to-orange-200 dark:from-orange-900/30 dark:to-orange-800/30 hover:from-orange-200 hover:to-orange-300 dark:hover:from-orange-800/40 dark:hover:to-orange-700/40 transition-all transform hover:scale-110 active:scale-95 shadow-sm hover:shadow-md flex items-center justify-center min-w-[40px] min-h-[40px] sm:min-w-[40px] sm:min-h-[40px]",title:"Manage Special Dates",children:l.jsx(it,{size:16,className:"sm:w-4 sm:h-4 text-brand-orange"})}),l.jsx("button",{onClick:M,className:"p-1.5 sm:p-1.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors flex items-center justify-center min-w-[36px] min-h-[36px] sm:min-w-[32px] sm:min-h-[32px]",children:l.jsx(_i,{size:16,className:"sm:w-4 sm:h-4"})}),l.jsx("button",{onClick:z,className:"px-3 py-1.5 text-xs sm:text-xs font-semibold rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors min-w-[50px]",children:"Today"}),l.jsx("button",{onClick:L,className:"p-1.5 sm:p-1.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors flex items-center justify-center min-w-[36px] min-h-[36px] sm:min-w-[32px] sm:min-h-[32px]",children:l.jsx(Ei,{size:16,className:"sm:w-4 sm:h-4"})}),l.jsxs("div",{className:"ml-1 sm:ml-2 border-l dark:border-gray-600 pl-1 sm:pl-2 flex space-x-0.5 sm:space-x-1",children:[l.jsx("button",{onClick:()=>m("grid"),className:`p-1.5 sm:p-1.5 rounded-lg flex items-center justify-center min-w-[32px] min-h-[32px] sm:min-w-[32px] sm:min-h-[32px] ${h==="grid"?"bg-brand-blue/10 text-brand-blue dark:bg-brand-blue-light/20 dark:text-white":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:l.jsx(An,{size:14,className:"sm:w-4 sm:h-4"})}),l.jsx("button",{onClick:()=>m("list"),className:`p-1.5 sm:p-1.5 rounded-lg flex items-center justify-center min-w-[32px] min-h-[32px] sm:min-w-[32px] sm:min-h-[32px] ${h==="list"?"bg-brand-blue/10 text-brand-blue dark:bg-brand-blue-light/20 dark:text-white":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:l.jsx(Tn,{size:14,className:"sm:w-4 sm:h-4"})})]})]})]}),te=()=>l.jsxs("div",{className:"flex items-center justify-center space-x-1 text-gray-700 dark:text-gray-300 mt-2 sm:mt-3",children:[l.jsx("button",{onClick:M,className:"p-1 sm:p-1.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors flex items-center justify-center",children:l.jsx(_i,{size:16,className:"sm:w-4 sm:h-4"})}),l.jsx("button",{onClick:z,className:"px-2 py-1 text-xs font-semibold rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Today"}),l.jsx("button",{onClick:L,className:"p-1 sm:p-1.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors flex items-center justify-center",children:l.jsx(Ei,{size:16,className:"sm:w-4 sm:h-4"})}),l.jsxs("div",{className:"ml-1 border-l dark:border-gray-600 pl-1 flex space-x-0.5",children:[l.jsx("button",{onClick:()=>m("grid"),className:`p-1 sm:p-1.5 rounded-lg flex items-center justify-center ${h==="grid"?"bg-brand-blue/10 text-brand-blue dark:bg-brand-blue-light/20 dark:text-white":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:l.jsx(An,{size:14,className:"sm:w-4 sm:h-4"})}),l.jsx("button",{onClick:()=>m("list"),className:`p-1 sm:p-1.5 rounded-lg flex items-center justify-center ${h==="list"?"bg-brand-blue/10 text-brand-blue dark:bg-brand-blue-light/20 dark:text-white":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:l.jsx(Tn,{size:14,className:"sm:w-4 sm:h-4"})})]})]});return l.jsx("div",{className:"p-1 sm:p-3 bg-white dark:bg-gray-800 rounded-xl shadow-lg h-full flex flex-col",children:h==="grid"?l.jsxs(l.Fragment,{children:[$(),l.jsx("div",{className:"flex-grow",children:G()}),window.innerWidth<768&&te()]}):l.jsxs(l.Fragment,{children:[$(),l.jsx("div",{className:"flex-grow overflow-y-auto",children:V()}),te()]})})},Gx=({bookings:e,bookingRequests:t,system:a,onBookingRequest:s})=>{const{user:n,specialDates:r}=S.useContext(Yt),[i,o]=S.useState(new Date),[c,g]=S.useState(null),[f,h]=S.useState(!1),[m,d]=S.useState("grid"),[p,D]=S.useState(!1),[T,b]=S.useState(null),[u,y]=S.useState({customer_name:"",customer_contact:"",customer_email:"",event_type:"",net_number:[],booking_type:ce.SLOT,slots:[],notes:"",payment_status:"Unpaid",payment_amount:0}),[k,M]=S.useState(0),[L,z]=S.useState({}),[G,V]=S.useState(""),$=S.useMemo(()=>a==="ground"?Er:Cr,[a]),te=q=>{const J=q.getDay();return J===0||J===6},X=q=>{const J=j(q);return r.some(F=>{if(!F.is_active)return!1;if(F.date===J)return!0;if(F.start_date&&F.end_date){const se=new Date(F.start_date),ue=new Date(F.end_date),$e=new Date(J);return $e>=se&&$e<=ue}return!1})},Q=q=>{if(a==="ground")return Dr(q,r);if(te(q)||X(q))return $;{const J=[];return $.forEach(F=>{if(F.split(" - ")[0]==="02:00 PM"){const ue=$.indexOf(F);J.push(...$.slice(ue))}}),J}},Y=q=>R(q).some(F=>F.booking_type===ce.SLOT&&F.status===I.CONFIRMED),W=q=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(q),U=q=>q.trim().split(/\s+/).filter(F=>F.length>0).length>5?"Name should not exceed 5 words":null,K=q=>q.replace(/\D/g,"").length>10?"Contact number should not exceed 10 digits":null,N=q=>q.trim().split(/\s+/).filter(F=>F.length>0).length>1?"Event type should be one word only":null,A=q=>{y(J=>{const F=J.net_number.includes(q)?J.net_number.filter(se=>se!==q):[...J.net_number,q];return{...J,net_number:F}})},x=()=>{const q={};if(u.customer_name){const F=U(u.customer_name);F&&(q.customer_name=F)}if(u.customer_contact){const F=K(u.customer_contact);F&&(q.customer_contact=F)}if(u.customer_email){const F=W(u.customer_email)?null:"Please enter a valid email address";F&&(q.customer_email=F)}if(u.event_type){const F=N(u.event_type);F&&(q.event_type=F)}a==="net"&&u.net_number.length===0&&(q.net_selection="Please select at least one net"),z(q);const J=Object.keys(q).length>0;return V(J?"Please fix the errors above before submitting.":""),!J},j=q=>{const J=q.getFullYear(),F=(q.getMonth()+1).toString().padStart(2,"0"),se=q.getDate().toString().padStart(2,"0");return`${J}-${F}-${se}`},E=q=>{const J=q.getFullYear(),F=q.getMonth(),se=new Date(J,F,1),ue=new Date(se);ue.setDate(ue.getDate()-se.getDay());const $e=[];for(let Xe=0;Xe<42;Xe++)$e.push(new Date(ue)),ue.setDate(ue.getDate()+1);return $e},_=()=>{o(new Date(i.getFullYear(),i.getMonth()-1,1))},w=()=>{o(new Date(i.getFullYear(),i.getMonth()+1,1))},v=()=>{o(new Date)},C=q=>{const J=new Date;return J.setHours(0,0,0,0),q<J},R=q=>{const J=j(q);return e.filter(se=>se.date===J)},B=(q,J)=>{if(!Q(q).includes(J))return!1;const ue=R(q);return!(ue.find(Vt=>Vt.booking_type===ce.FULL_DAY&&Vt.status==="confirmed")||ue.find(Vt=>Vt.booking_type===ce.SLOT&&Vt.slots?.includes(J)&&Vt.status==="confirmed"))},Z=q=>R(q).find(ue=>ue.booking_type===ce.FULL_DAY&&ue.status==="confirmed")?!0:Q(q).filter(ue=>B(q,ue)).length===0,P=q=>C(q)?"past":Z(q)?"booked":"available",ne=q=>{P(q)==="available"&&!C(q)&&(g(q),h(!0))},be=async q=>{if(console.log(" Starting booking submission process..."),!x()){console.log(" Form validation failed");return}if(console.log(" Form validation passed"),s&&c)try{const J={...q,date:j(c),system:a,status:"pending",submitted_at:new Date().toISOString(),created_at:new Date().toISOString()},F=a==="net"?{...J,event_type:"Indoor Net Practice"}:J;console.log(" Submitting booking request:",F);const se=await s(F);console.log(" Received response:",se);const ue=se&&Array.isArray(se)&&se[0]?se[0].request_number:null;if(console.log(" Extracted request number:",ue),ue)console.log(" Request submitted successfully, showing success message"),h(!1),g(null),setTimeout(()=>{b(ue),D(!0),console.log(" Success message displayed with request number:",ue)},100);else throw console.error(" No request number received in response:",se),new Error("Request submitted but no tracking number was generated")}catch(J){console.error(" Booking submission error:",J),V(`Failed to submit booking request: ${J instanceof Error?J.message:"Unknown error"}`)}else console.error(" Booking request handler not available"),V("Booking request handler not available. Please try again.")},ie=E(i),Ue=new Date,Te=()=>l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border dark:border-gray-700",children:[l.jsx("div",{className:"grid grid-cols-7 text-center font-semibold text-gray-500 dark:text-gray-400 border-b dark:border-gray-700 pb-1 text-xs",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(q=>l.jsx("div",{className:"py-0.5",children:q},q))}),l.jsx("div",{className:"grid grid-cols-7",children:ie.map((q,J)=>{j(q);const F=q.getMonth()===i.getMonth(),se=q.toDateString()===Ue.toDateString(),ue=q.getDay()===0||q.getDay()===6,$e=P(q);return R(q),l.jsxs("div",{onClick:()=>ne(q),className:`group border-r border-b dark:border-gray-700 p-0.5 flex flex-col relative min-h-[3rem] sm:min-h-[4rem] transition-all duration-200 ${se?"bg-brand-gold/20":""} ${$e==="available"&&F?"hover:bg-brand-blue/10 cursor-pointer hover:scale-[1.02]":$e==="booked"&&F?"cursor-not-allowed":""}`,children:[l.jsxs("div",{className:"flex items-center justify-between w-full mb-0.5",children:[l.jsx("span",{className:`text-xs font-bold ${F?ue||X(q)?"text-brand-orange":"text-gray-700 dark:text-gray-300":"text-gray-400 dark:text-gray-500"} ${$e==="available"?"text-brand-orange":""}`,children:q.getDate()}),$e==="available"&&F&&l.jsx(ka,{size:8,className:"text-brand-orange opacity-60"})]}),$e==="available"&&F&&l.jsxs("div",{className:"mt-auto text-xs text-green-600 dark:text-green-400 font-medium",children:[l.jsx("span",{className:"sm:hidden",children:""}),l.jsx("span",{className:"hidden sm:inline",children:"Available"})]}),$e==="booked"&&F&&l.jsx("div",{className:"mt-auto",children:l.jsxs("div",{className:"text-xs text-red-500 font-medium",children:[l.jsx("span",{className:"sm:hidden",children:""}),l.jsx("span",{className:"hidden sm:inline",children:"Booked"})]})}),$e==="past"&&l.jsxs("div",{className:"mt-auto text-xs text-gray-400",children:[l.jsx("span",{className:"sm:hidden",children:""}),l.jsx("span",{className:"hidden sm:inline",children:"Past"})]})]},J)})})]}),jt=()=>l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border dark:border-gray-700",children:[l.jsxs("div",{className:"p-2 sm:p-3 border-b dark:border-gray-700",children:[l.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-200 text-sm",children:"Available Dates"}),l.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-0.5",children:"Click on any available date to make a booking"})]}),l.jsx("div",{className:"max-h-96 overflow-y-auto",children:ie.filter(q=>q&&q.getMonth()===i.getMonth()).map((q,J)=>{const F=j(q),se=q.getMonth()===i.getMonth(),ue=q.toDateString()===Ue.toDateString(),$e=q.getDay()===0||q.getDay()===6,Xe=P(q);return R(q),se?l.jsx("div",{onClick:()=>ne(q),className:`group border-b dark:border-gray-700 p-3 sm:p-4 transition-all duration-300 hover:shadow-sm ${ue?"bg-brand-gold/10":""} ${Xe==="available"?"hover:bg-brand-blue/5 cursor-pointer bg-green-50/30 dark:bg-green-900/10 hover:scale-[1.01]":Xe==="booked"?"cursor-not-allowed bg-red-50/30 dark:bg-red-900/10":"bg-gray-50/30 dark:bg-gray-800/50"}`,style:{animationDelay:`${J*50}ms`},children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("span",{className:`font-bold text-sm sm:text-base ${ue||$e||X(q)?"text-brand-orange":"text-gray-800 dark:text-gray-200"}`,children:q.toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"short"})}),ue&&l.jsx("span",{className:"px-2 py-0.5 bg-brand-orange text-white text-xs rounded-full font-medium animate-pulse",children:"Today"})]}),l.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm",children:[l.jsx("span",{className:`px-2 py-1 rounded-full font-medium transition-all ${Xe==="available"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300":Xe==="booked"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"}`,children:Xe==="available"?" Available":Xe==="booked"?" Booked":" Past"}),Xe==="available"&&l.jsxs("span",{className:"text-green-600 dark:text-green-400 font-medium flex items-center gap-1",children:[l.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"}),"Click to book slots"]}),Xe==="booked"&&l.jsx("span",{className:"text-red-600 dark:text-red-400 font-medium",children:"No slots available"}),Xe==="past"&&l.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Not available for booking"})]})]}),l.jsx("div",{className:"flex items-center gap-2",children:Xe==="available"&&l.jsx("div",{className:"h-7 w-7 bg-brand-orange text-white rounded-full flex items-center justify-center shadow-sm hover:shadow-md transition-all transform hover:scale-110",children:l.jsx(ka,{size:14})})})]})},F):null})})]});return l.jsxs("div",{className:"space-y-2 sm:space-y-3 animate-slideInUp",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-1 sm:mb-2 gap-1 sm:gap-2",children:[l.jsx("div",{className:"text-base sm:text-lg lg:text-xl font-display font-bold text-brand-dark dark:text-white text-center sm:text-left",children:i.toLocaleString("default",{month:"long",year:"numeric"})}),l.jsxs("div",{className:"flex items-center space-x-0.5",children:[l.jsx("button",{onClick:_,className:"p-0.5 sm:p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:l.jsx(_i,{size:14,className:"sm:w-3 sm:h-3"})}),l.jsx("button",{onClick:v,className:"px-1.5 py-0.5 text-xs font-semibold rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Today"}),l.jsx("button",{onClick:w,className:"p-0.5 sm:p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:l.jsx(Ei,{size:14,className:"sm:w-3 sm:h-3"})}),l.jsxs("div",{className:"ml-1 border-l dark:border-gray-600 pl-1 flex space-x-0.5",children:[l.jsx("button",{onClick:()=>d("grid"),className:`p-0.5 sm:p-1 rounded-lg transition-all ${m==="grid"?"bg-brand-blue/10 text-brand-blue dark:bg-brand-blue-light/20 dark:text-white":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:l.jsx(An,{size:12,className:"sm:w-3 sm:h-3"})}),l.jsx("button",{onClick:()=>d("list"),className:`p-0.5 sm:p-1 rounded-lg transition-all ${m==="list"?"bg-brand-blue/10 text-brand-blue dark:bg-brand-blue-light/20 dark:text-white":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:l.jsx(Tn,{size:12,className:"sm:w-3 sm:h-3"})})]})]})]}),m==="grid"?Te():jt(),l.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-2 sm:p-3",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("div",{className:"h-2 w-2 bg-blue-500 rounded-full"}),l.jsx("h3",{className:"font-semibold text-blue-800 dark:text-blue-300 text-xs sm:text-sm",children:"How to Book"})]}),l.jsxs("ul",{className:"text-xs text-blue-700 dark:text-blue-300 space-y-1",children:[l.jsxs("li",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-green-600",children:""}),l.jsx("span",{children:"Available dates are highlighted in green"})]}),l.jsxs("li",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-red-600",children:""}),l.jsx("span",{children:"Fully booked dates are marked in red"})]}),l.jsxs("li",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-gray-500",children:""}),l.jsx("span",{children:"Past dates are not available for booking"})]}),l.jsxs("li",{className:"flex items-center gap-2",children:[l.jsx(ka,{size:12,className:"text-brand-orange"}),l.jsx("span",{children:"Click available dates to make a booking request"})]}),l.jsxs("li",{className:"flex items-center gap-2",children:[l.jsx(An,{size:12,className:"text-blue-600"}),l.jsx("span",{children:"Use Grid view for traditional calendar layout"})]}),l.jsxs("li",{className:"flex items-center gap-2",children:[l.jsx(Tn,{size:12,className:"text-blue-600"}),l.jsx("span",{children:"Use List view for easier mobile browsing"})]})]})]}),p&&T&&l.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-2 animate-fadeIn",children:l.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full max-w-xs mx-2",children:l.jsxs("div",{className:"p-3 text-center",children:[l.jsx("div",{className:"w-8 h-8 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center mx-auto mb-2 animate-pulse",children:l.jsx("svg",{className:"w-4 h-4 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),l.jsx("h2",{className:"text-sm font-bold text-green-800 dark:text-green-300 mb-2",children:"Submitted Successfully!"}),l.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-2 mb-2",children:[l.jsx("p",{className:"text-green-800 dark:text-green-300 text-xs font-semibold mb-1",children:"Booking request submitted successfully!"}),l.jsx("p",{className:"text-green-700 dark:text-green-400 text-xs",children:"Our team will review and respond soon."})]}),l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-2 mb-2",children:[l.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-1.5 mb-1 border border-blue-200 dark:border-blue-700",children:l.jsx("p",{className:"font-mono text-xs text-blue-600 dark:text-blue-400 font-bold tracking-wider",children:T})}),l.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:" Save this tracking number"})]}),l.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-2 mb-2",children:l.jsxs("div",{className:"text-xs text-amber-700 dark:text-amber-400 space-y-0.5",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"w-1 h-1 bg-amber-500 rounded-full mr-1 flex-shrink-0"}),"Review within 24 hours"]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"w-1 h-1 bg-amber-500 rounded-full mr-1 flex-shrink-0"}),"Notification on approval/rejection"]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"w-1 h-1 bg-amber-500 rounded-full mr-1 flex-shrink-0"}),'Track in "Track Bookings"']})]})}),l.jsx("button",{onClick:()=>{console.log(" Closing success message and resetting state"),D(!1),b(null),h(!1),g(null),y({customer_name:"",customer_contact:"",customer_email:"",event_type:"",net_number:[],booking_type:ce.SLOT,slots:[],notes:"",payment_status:"Unpaid",payment_amount:0}),M(0),z({}),V(""),console.log(" All states reset successfully")},className:"w-full bg-green-600 hover:bg-green-700 text-white px-3 py-1.5 rounded-lg font-semibold text-sm transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl",children:" Done"})]})})}),f&&c&&l.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-1 sm:p-2 animate-fadeIn",children:l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full max-w-md md:max-w-2xl max-h-[90vh] flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-center p-2 sm:p-3 border-b dark:border-gray-700",children:[l.jsxs("h2",{className:"text-base sm:text-lg font-bold text-brand-dark dark:text-white",children:["Request Booking - ",c.toLocaleDateString("en-GB",{weekday:"short",month:"short",day:"numeric"})]}),l.jsx("button",{onClick:()=>h(!1),className:"p-0.5 sm:p-1 rounded-full text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700",children:l.jsx(pt,{size:16,className:"sm:w-[18px] sm:h-[18px]"})})]}),l.jsxs("form",{onSubmit:q=>{q.preventDefault(),be(u)},className:"p-2 sm:p-3 space-y-2 sm:space-y-3 overflow-y-auto",children:[G&&l.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-2",children:l.jsx("p",{className:"text-red-700 dark:text-red-300 text-xs sm:text-sm",children:G})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold mb-1.5 sm:mb-2 text-gray-800 dark:text-gray-200 text-sm",children:"Booking Type"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[a==="ground"&&l.jsxs("button",{type:"button",onClick:()=>y(q=>({...q,booking_type:ce.FULL_DAY,slots:[]})),disabled:c?Y(c)||!te(c)&&!X(c):!1,className:`p-2 rounded text-center transition-all text-xs sm:text-sm ${u.booking_type===ce.FULL_DAY?"bg-brand-blue text-white ring-2 ring-brand-orange":"bg-gray-100 dark:bg-gray-700 dark:text-gray-300"} ${c&&(Y(c)||!te(c)&&!X(c))?"opacity-50 cursor-not-allowed":"hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:["Full Day Booking",c&&Y(c)&&l.jsx("span",{className:"block text-xs",children:"Unavailable"}),c&&!Y(c)&&!te(c)&&!X(c)&&l.jsx("span",{className:"block text-xs",children:"Weekends & special dates only"})]}),l.jsxs("div",{className:`col-span-full ${a==="ground"?"":"md:col-span-2"}`,children:[l.jsx("p",{className:"mb-1 text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400",children:"Available Slots"}),l.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-1",children:[c&&Q(c).map(q=>{const J=!B(c,q);return l.jsxs("button",{type:"button",onClick:()=>{if(J)return;const F=u.slots?.includes(q)?u.slots.filter(se=>se!==q):[...u.slots||[],q];y(se=>({...se,slots:F,booking_type:F.length>0?ce.SLOT:ce.FULL_DAY}))},disabled:J,className:`p-1 rounded text-xs transition-all flex items-center justify-center ${u.slots?.includes(q)?"bg-brand-blue text-white ring-1 ring-brand-orange":"bg-gray-100 dark:bg-gray-700 dark:text-gray-300"} ${J?"opacity-50 cursor-not-allowed":"hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[l.jsx("span",{children:q}),J&&l.jsx("span",{className:"block text-xs",children:"(Booked)"})]},q)}),c&&Q(c).length===0&&l.jsx("div",{className:"col-span-full text-center text-gray-500 dark:text-gray-400 text-xs py-2",children:"No slots available for this date"})]})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 sm:gap-3 pt-2 sm:pt-3 border-t dark:border-gray-700",children:[l.jsxs("div",{children:[l.jsx("input",{name:"customer_name",value:u.customer_name,onChange:q=>{const J=q.target.value,F=U(J);z(se=>({...se,customer_name:F||""})),y(se=>({...se,customer_name:J}))},type:"text",placeholder:"Customer Name",className:`p-1.5 sm:p-2 border rounded bg-white dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-1 focus:ring-brand-orange focus:border-transparent transition text-sm ${L.customer_name?"border-red-500":""}`,required:!0}),L.customer_name&&l.jsx("p",{className:"text-red-500 text-xs mt-0.5",children:L.customer_name})]}),l.jsxs("div",{children:[l.jsx("input",{name:"customer_contact",value:u.customer_contact,onChange:q=>{const J=q.target.value,F=K(J);z(se=>({...se,customer_contact:F||""})),y(se=>({...se,customer_contact:J}))},type:"tel",placeholder:"Contact Number",className:`p-1.5 sm:p-2 border rounded bg-white dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-1 focus:ring-brand-orange focus:border-transparent transition text-sm ${L.customer_contact?"border-red-500":""}`,required:!0}),L.customer_contact&&l.jsx("p",{className:"text-red-500 text-xs mt-0.5",children:L.customer_contact})]}),l.jsxs("div",{children:[l.jsx("input",{name:"customer_email",value:u.customer_email,onChange:q=>{const J=q.target.value,F=W(J)?null:"Please enter a valid email address";z(se=>({...se,customer_email:F||""})),y(se=>({...se,customer_email:J}))},type:"email",placeholder:"Email Address",className:`p-1.5 sm:p-2 border rounded bg-white dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-1 focus:ring-brand-orange focus:border-transparent transition text-sm ${L.customer_email?"border-red-500":""}`}),L.customer_email&&l.jsx("p",{className:"text-red-500 text-xs mt-0.5",children:L.customer_email})]}),a==="ground"?l.jsxs("div",{children:[l.jsx("input",{name:"event_type",value:u.event_type,onChange:q=>{const J=q.target.value,F=N(J);z(se=>({...se,event_type:F||""})),y(se=>({...se,event_type:J}))},type:"text",placeholder:"Sport / Event Type",className:`p-1.5 sm:p-2 border rounded bg-white dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-1 focus:ring-brand-orange focus:border-transparent transition text-sm ${L.event_type?"border-red-500":""}`,required:!0}),L.event_type&&l.jsx("p",{className:"text-red-500 text-xs mt-0.5",children:L.event_type})]}):l.jsxs("div",{children:[l.jsx("p",{className:"mb-1.5 text-sm font-medium text-gray-600 dark:text-gray-400",children:"Select Nets"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsx("button",{type:"button",onClick:()=>A("1"),className:`p-2.5 rounded text-center transition-all text-sm ${u.net_number.includes("1")?"bg-brand-blue text-white ring-2 ring-brand-orange":"bg-gray-100 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Concrete Net 1"}),l.jsx("button",{type:"button",onClick:()=>A("2"),className:`p-2.5 rounded text-center transition-all text-sm ${u.net_number.includes("2")?"bg-brand-blue text-white ring-2 ring-brand-orange":"bg-gray-100 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Concrete Net 2"}),l.jsx("button",{type:"button",onClick:()=>A("3"),className:`p-2.5 rounded text-center transition-all text-sm ${u.net_number.includes("3")?"bg-brand-blue text-white ring-2 ring-brand-orange":"bg-gray-100 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Astro Net 1"}),l.jsx("button",{type:"button",onClick:()=>A("4"),className:`p-2.5 rounded text-center transition-all text-sm ${u.net_number.includes("4")?"bg-brand-blue text-white ring-2 ring-brand-orange":"bg-gray-100 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Astro Net 2"})]}),L.net_selection&&l.jsx("p",{className:"text-red-500 text-xs mt-1",children:L.net_selection})]})]}),l.jsxs("div",{className:"pt-2 sm:pt-3",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Notes"}),l.jsxs("span",{className:`text-xs ${k>100?"text-red-500":"text-gray-500 dark:text-gray-400"}`,children:[k,"/100"]})]}),l.jsx("textarea",{name:"notes",value:u.notes||"",onChange:q=>{const J=q.target.value.length;M(J),y(F=>({...F,notes:q.target.value}))},placeholder:"Notes...",maxLength:k>100?void 0:100,className:`p-1.5 sm:p-2 border rounded w-full h-16 sm:h-20 bg-white dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-1 focus:ring-brand-orange focus:border-transparent transition text-xs sm:text-sm ${k>100?"border-red-500":""}`}),k>100&&l.jsx("p",{className:"text-red-500 text-xs mt-0.5",children:"Letter limit exceeded"})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between items-center gap-1.5 sm:gap-2 pt-2 sm:pt-3 border-t dark:border-gray-700",children:[l.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Your booking request will be sent to management for approval."}),l.jsxs("div",{className:"flex flex-col-reverse sm:flex-row w-full sm:w-auto gap-1.5 sm:gap-2",children:[l.jsx("button",{type:"button",onClick:()=>h(!1),className:"w-full sm:w-auto bg-gray-200 text-gray-800 dark:bg-gray-600 dark:text-gray-200 px-2.5 sm:px-3 py-1 sm:py-1.5 rounded text-xs sm:text-sm hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors",children:"Cancel"}),l.jsx("button",{type:"submit",className:"w-full sm:w-auto bg-brand-orange text-white px-2.5 sm:px-3 py-1 sm:py-1.5 rounded text-xs sm:text-sm hover:bg-orange-600 transition-colors",children:"Submit Request"})]})]})]})]})})]})},$x=e=>{const t=e.getFullYear(),a=(e.getMonth()+1).toString().padStart(2,"0"),s=e.getDate().toString().padStart(2,"0");return`${t}-${a}-${s}`},Sl=e=>{const[t,a,s]=e.split("-").map(Number);return new Date(t,a-1,s)},id=({title:e,value:t,icon:a,color:s,onClick:n})=>l.jsxs("div",{onClick:n,className:`bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-lg shadow-sm flex items-center justify-between transition-all duration-300 hover:shadow-lg hover:-translate-y-1 transform ${n?"cursor-pointer":""}`,children:[l.jsxs("div",{className:"min-w-0 flex-1",children:[l.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:e}),l.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-brand-dark dark:text-white mt-1 break-all",children:t})]}),l.jsx("div",{className:`text-white p-2 sm:p-3 rounded-full flex-shrink-0 ${s}`,children:l.jsx(a,{className:"h-5 w-5 sm:h-6 sm:w-6"})})]}),Yx=({booking:e,onClick:t})=>{const a=e.payment_status===Ve.PAID;return l.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer transition-colors duration-200",onClick:t,children:[l.jsx("td",{className:"py-3 px-3 sm:px-4 text-sm text-gray-800 dark:text-gray-300",children:Sl(e.date).toLocaleDateString("en-GB")}),l.jsx("td",{className:"py-3 px-3 sm:px-4 text-sm text-gray-600 dark:text-gray-400",children:e.booking_type==="full_day"?"Full Day":e.slots?.join(", ")}),l.jsx("td",{className:"py-3 px-3 sm:px-4 text-sm font-semibold text-gray-800 dark:text-gray-200",children:e.customer_name}),l.jsx("td",{className:"py-3 px-3 sm:px-4 text-sm text-gray-600 dark:text-gray-400",children:(()=>{const s=e.net_number&&(Array.isArray(e.net_number)?e.net_number.length:e.net_number)?Array.isArray(e.net_number)?e.net_number.map(n=>`Net ${n}`).join(", "):`Net ${e.net_number}`:"";return e.event_type?`${e.event_type}${s?` (${s})`:""}`:s||"No details"})()}),l.jsx("td",{className:"py-3 px-3 sm:px-4 text-sm text-gray-800 dark:text-gray-300",children:e.payment_amount.toLocaleString("en-IN",{style:"currency",currency:"INR"})}),l.jsx("td",{className:"py-3 px-3 sm:px-4 text-sm",children:l.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${a?"bg-green-100 text-green-700 dark:bg-green-900/50 dark:text-green-300":"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/50 dark:text-yellow-300"}`,children:e.payment_status})})]})},Vx=({booking:e,onClick:t})=>{const a=e.payment_status===Ve.PAID;return l.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 sm:p-4 rounded-lg shadow-sm border-l-4 border-brand-blue transition-all duration-300 hover:shadow-md transform hover:scale-[1.02] cursor-pointer",onClick:t,children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("div",{className:"min-w-0 flex-1",children:[l.jsx("p",{className:"font-bold text-gray-800 dark:text-gray-200 truncate",children:e.customer_name}),l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:(()=>{const s=e.net_number&&(Array.isArray(e.net_number)?e.net_number.length:e.net_number)?Array.isArray(e.net_number)?e.net_number.map(n=>`Net ${n}`).join(", "):`Net ${e.net_number}`:"";return e.event_type?`${e.event_type}${s?` (${s})`:""}`:s||"No details"})()})]}),l.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full flex-shrink-0 ml-2 ${a?"bg-green-100 text-green-700 dark:bg-green-900/50 dark:text-green-300":"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/50 dark:text-yellow-300"}`,children:e.payment_status})]}),l.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 my-2"}),l.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300 space-y-1",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Date:"})," ",Sl(e.date).toLocaleDateString("en-GB")]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Time:"})," ",e.booking_type==="full_day"?"Full Day":e.slots?.join(", ")]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Amount:"})," ",e.payment_amount.toLocaleString("en-IN",{style:"currency",currency:"INR"})]})]})]})},od=({bookings:e,openModal:t,onBookingsCardClick:a,onRevenueCardClick:s})=>{const n=S.useMemo(()=>{const i=new Date,o=new Date(i.getFullYear(),i.getMonth(),1),c=new Date(i.getFullYear(),i.getMonth()+1,0),f=e.filter(h=>h.status==="confirmed").filter(h=>{const m=Sl(h.date);return m>=o&&m<=c});return{bookingsThisMonth:f.length,revenueThisMonth:f.reduce((h,m)=>h+m.payment_amount,0)}},[e]),r=S.useMemo(()=>{const o=$x(new Date);return e.filter(c=>c.status==="confirmed"&&c.date>=o).sort((c,g)=>c.date.localeCompare(g.date))},[e]);return l.jsxs("div",{className:"space-y-8 animate-slideInUp",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-200",children:"Dashboard Overview"}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[l.jsx(id,{title:"Total Bookings This Month",value:n.bookingsThisMonth,icon:it,color:"bg-blue-500",onClick:a}),l.jsx(id,{title:"Revenue This Month",value:n.revenueThisMonth.toLocaleString("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}),icon:Dg,color:"bg-green-500",onClick:s})]}),l.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 sm:p-4 lg:p-6 rounded-lg shadow-sm",children:[l.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-800 dark:text-gray-200 mb-3 sm:mb-4",children:"Upcoming Bookings"}),l.jsx("div",{className:"hidden lg:block overflow-x-auto",children:l.jsxs("table",{className:"w-full min-w-[600px]",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-700/50 text-left text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[l.jsx("th",{className:"py-3 px-3 sm:px-4 font-semibold",children:"Date"}),l.jsx("th",{className:"py-3 px-3 sm:px-4 font-semibold",children:"Time"}),l.jsx("th",{className:"py-3 px-3 sm:px-4 font-semibold",children:"Customer"}),l.jsx("th",{className:"py-3 px-3 sm:px-4 font-semibold",children:"Details"}),l.jsx("th",{className:"py-3 px-3 sm:px-4 font-semibold",children:"Payment"}),l.jsx("th",{className:"py-3 px-3 sm:px-4 font-semibold",children:"Status"})]})}),l.jsx("tbody",{children:r.length>0?r.map(i=>l.jsx(Yx,{booking:i,onClick:()=>t(Sl(i.date),i)},i.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"text-center py-10 text-gray-500 dark:text-gray-400",children:"No upcoming bookings"})})})]})}),l.jsx("div",{className:"lg:hidden space-y-3 sm:space-y-4",children:r.length>0?r.map(i=>l.jsx(Vx,{booking:i,onClick:()=>t(Sl(i.date),i)},i.id)):l.jsx("p",{className:"text-center py-8 sm:py-10 text-gray-500 dark:text-gray-400",children:"No upcoming bookings"})})]})]})},fa=e=>{const[t,a,s]=e.split("-").map(Number);return new Date(t,a-1,s)},$a=({label:e,value:t,activeValue:a,onClick:s})=>l.jsx("button",{onClick:()=>s(t),className:`px-2 py-1 text-xs font-semibold rounded transition-colors ${a===t?"bg-brand-blue text-white shadow-sm":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:e}),Qx=({booking:e,onClick:t,onApprove:a,onReject:s,onDelete:n,onEdit:r,userRole:i,isApproving:o,isRejecting:c,isDeleting:g})=>{const f=e.payment_status===Ve.PAID,h=e.status===I.PENDING,m=e.isRequest;return l.jsxs("div",{className:`p-2.5 rounded-lg shadow-sm cursor-pointer ${m?"bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-400":"bg-white dark:bg-gray-800 border-l-4 border-brand-orange"}`,onClick:t,children:[l.jsxs("div",{className:"flex justify-between items-start mb-1.5",children:[l.jsxs("div",{className:"min-w-0 flex-1",children:[l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("p",{className:"font-bold text-gray-800 dark:text-gray-200 truncate text-sm",children:e.customer_name}),m&&l.jsx("span",{className:"px-1.5 py-0.5 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-700 dark:bg-yellow-900/50 dark:text-yellow-300",children:"REQ"})]}),l.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:l.jsx("span",{className:"truncate block",children:(()=>{const d=e.net_number&&(Array.isArray(e.net_number)?e.net_number.length:e.net_number)?Array.isArray(e.net_number)?e.net_number.map(p=>`Net ${p}`).join(", "):`Net ${e.net_number}`:"";return e.event_type?`${e.event_type}${d?` (${d})`:""}`:d||"No details"})()})})]}),l.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0 ml-2",children:[l.jsx("span",{className:`px-1.5 py-0.5 text-xs font-semibold rounded-full ${f?"bg-green-100 text-green-700 dark:bg-green-900/50 dark:text-green-300":"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/50 dark:text-yellow-300"}`,children:f?"PAID":"UNPAID"}),m&&i==="admin"&&l.jsxs("div",{className:"flex gap-0.5",children:[h&&a&&s&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:d=>{d.stopPropagation(),a()},disabled:o,className:`p-0.5 rounded bg-green-100 text-green-700 hover:bg-green-200 dark:bg-green-900/50 dark:text-green-300 dark:hover:bg-green-900/70 disabled:opacity-50 disabled:cursor-not-allowed ${o?"cursor-wait":""}`,title:"Approve Request",children:o?l.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border border-green-700 border-t-transparent"}):l.jsx(zn,{size:14})}),l.jsx("button",{onClick:d=>{d.stopPropagation(),s()},disabled:c,className:`p-0.5 rounded bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900/50 dark:text-red-300 dark:hover:bg-red-900/70 disabled:opacity-50 disabled:cursor-not-allowed ${c?"cursor-wait":""}`,title:"Reject Request",children:c?l.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border border-red-700 border-t-transparent"}):l.jsx(pt,{size:14})})]}),r&&l.jsx("button",{onClick:d=>{d.stopPropagation(),r()},className:"p-0.5 rounded bg-blue-100 text-blue-700 hover:bg-blue-200 dark:bg-blue-900/50 dark:text-blue-300 dark:hover:bg-blue-900/70",title:"Edit Request",children:l.jsx(So,{size:14})}),l.jsx("button",{onClick:d=>{d.stopPropagation(),n&&window.confirm(` PERMANENT DELETION WARNING 

Are you sure you want to delete this booking request?

This will:
 Permanently delete the request from the database
 Remove all associated data and records
 Cannot be undone or recovered

Customer: ${e.customer_name}
Date: ${fa(e.date).toLocaleDateString("en-GB")}
Time: ${e.booking_type==="full_day"?"Full Day":e.slots?.join(", ")}

Click "OK" to permanently delete this request, or "Cancel" to keep it.`)&&n()},disabled:g,className:`p-0.5 rounded bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-900/50 dark:text-gray-300 dark:hover:bg-gray-900/70 disabled:opacity-50 disabled:cursor-not-allowed ${g?"cursor-wait":""}`,title:"Delete Request",children:g?l.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border border-gray-700 border-t-transparent"}):l.jsx(cr,{size:14})})]})]})]}),l.jsx("div",{className:"border-t dark:border-gray-700 my-1.5"}),l.jsxs("div",{className:"text-xs text-gray-700 dark:text-gray-300 space-y-0.5",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("span",{children:[l.jsx("strong",{children:"Date:"})," ",fa(e.date).toLocaleDateString("en-GB")]}),l.jsxs("span",{children:[l.jsx("strong",{children:"Amount:"})," ",e.payment_amount]})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("span",{children:[l.jsx("strong",{children:"Time:"})," ",e.booking_type==="full_day"?"Full Day":e.slots?.join(", ")]}),e.status&&l.jsx("span",{className:`px-1.5 py-0.5 text-xs font-semibold rounded-full ${e.status===I.PENDING?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/50 dark:text-yellow-300":e.status===I.APPROVED?"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300":e.status===I.CONFIRMED?"bg-green-100 text-green-700 dark:bg-green-900/50 dark:text-green-300":"bg-gray-100 text-gray-700 dark:bg-gray-900/50 dark:text-gray-300"}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1).toLowerCase()})]}),e.notes&&l.jsxs("div",{className:"mt-2 p-2 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded",children:[l.jsx("span",{className:"text-xs font-medium text-blue-800 dark:text-blue-300",children:l.jsx("strong",{children:"Notes:"})}),l.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-400 mt-1 leading-relaxed",children:e.notes})]})]})]})},Xx=({bookings:e,bookingRequests:t,openModal:a,initialDateFilter:s,clearInitialFilter:n,onApproveRequest:r,onRejectRequest:i,onDeleteRequest:o,onEditRequest:c,onDataRefresh:g,system:f="ground"})=>{const{user:h,deleteBookingRequest:m}=S.useContext(Yt),[d,p]=S.useState(null),[D,T]=S.useState(null),[b,u]=S.useState(null),y=async(x,j)=>{if(!D){T(x);try{await r?.(x,j),console.log(` Request ${x} approved successfully`),setTimeout(()=>{g?.()},500)}catch(E){console.error(" Error approving request:",E);let _="Error approving request. Please try again.";E.message&&(E.message.includes("Access denied")?_="Access denied: Insufficient permissions to approve requests.":E.message.includes("not found")?_="Request not found. It may have already been processed.":E.message.includes("already approved")?_="Request has already been approved.":E.message.includes("Failed to approve")?_=`Failed to approve request: ${E.message.replace("Failed to approve booking request: ","")}`:_=`Error: ${E.message}`),alert(_),console.error("Approve operation context:",{requestId:x,system:j,userRole:h?.role,timestamp:new Date().toISOString()})}finally{T(null)}}},k=async(x,j)=>{if(!b){u(x);try{await i?.(x,j),console.log(` Request ${x} rejected successfully`),setTimeout(()=>{g?.()},500)}catch(E){console.error(" Error rejecting request:",E);let _="Error rejecting request. Please try again.";E.message&&(E.message.includes("Access denied")?_="Access denied: Insufficient permissions to reject requests.":E.message.includes("not found")?_="Request not found. It may have already been processed.":E.message.includes("already rejected")?_="Request has already been rejected.":E.message.includes("Failed to reject")?_=`Failed to reject request: ${E.message.replace("Failed to reject booking request: ","")}`:_=`Error: ${E.message}`),alert(_),console.error("Reject operation context:",{requestId:x,system:j,userRole:h?.role,timestamp:new Date().toISOString()})}finally{u(null)}}},M=async(x,j)=>{if(!d){p(x);try{await o?.(x,j),console.log(` Request ${x} deleted successfully`),setTimeout(()=>{g?.()},500)}catch(E){console.error(" Error deleting request:",E);let _="Error deleting request. Please try again.";E.message&&(E.message.includes("Access denied")?_="Access denied: Only administrators can delete booking requests.":E.message.includes("not found")?_="Request not found. It may have already been deleted.":E.message.includes("System mismatch")?_="System mismatch error. Please refresh and try again.":E.message.includes("Cannot delete request")?_="Cannot delete this request as it may be referenced by other records.":E.message.includes("Permission denied")?_="Permission denied. You may not have sufficient privileges to delete this request.":E.message.includes("Failed to delete")?_=`Failed to delete request: ${E.message.replace("Failed to delete booking request: ","")}`:E.message.includes("Invalid request")?_=E.message:_=`Error: ${E.message}`),alert(_),console.error("Delete operation context:",{requestId:x,system:j,userRole:h?.role,timestamp:new Date().toISOString()})}finally{p(null)}}},[L,z]=S.useState(""),[G,V]=S.useState("all"),[$,te]=S.useState("all"),[X,Q]=S.useState(s||{start:"",end:""}),[Y,W]=S.useState({key:"date",direction:"desc"});S.useEffect(()=>{s&&(Q(s),n())},[s,n]);const U=S.useMemo(()=>{let x=[...e.map(j=>({...j,isRequest:!1})),...t.map(j=>({...j,isRequest:!0}))];if(X.start&&X.end&&(x=x.filter(j=>j.date>=X.start&&j.date<=X.end)),$==="pending"?x=x.filter(j=>j.status===I.PENDING):$==="approved"?x=x.filter(j=>j.status===I.APPROVED):$==="confirmed"?x=x.filter(j=>j.status===I.CONFIRMED):$==="requests"?x=x.filter(j=>j.isRequest):$==="bookings"&&(x=x.filter(j=>!j.isRequest)),G==="paid"?x=x.filter(j=>j.payment_status===Ve.PAID):G==="unpaid"&&(x=x.filter(j=>j.payment_status===Ve.UNPAID)),L){const j=L.toLowerCase();x=x.filter(E=>{const _=E.net_number?Array.isArray(E.net_number)?E.net_number.join(", "):String(E.net_number):"";return E.customer_name.toLowerCase().includes(j)||E.customer_contact.toLowerCase().includes(j)||E.customer_email&&E.customer_email.toLowerCase().includes(j)||E.event_type&&E.event_type.toLowerCase().includes(j)||_.toLowerCase().includes(j)})}return Y&&x.sort((j,E)=>{const _=j[Y.key],w=E[Y.key];return Y.key==="date"||Y.key==="created_at"?Y.direction==="asc"?new Date(_.toString()).getTime()-new Date(w.toString()).getTime():new Date(w.toString()).getTime()-new Date(_.toString()).getTime():_<w?Y.direction==="asc"?-1:1:_>w?Y.direction==="asc"?1:-1:0}),x},[e,t,L,Y,G,$,X]),K=x=>{let j="asc";Y&&Y.key===x&&Y.direction==="asc"&&(j="desc"),W({key:x,direction:j})},N=()=>{if(U.length===0){alert("No bookings to export with the current filters.");return}const x=U,j=["S.No","Date","System","Type","Slots","Customer Name","Contact","Email","Event/Indoor Net No.","Payment Status","Amount","Notes"],E=x.map((C,R)=>[R+1,C.date,f?.charAt(0).toUpperCase()+f?.slice(1)||"Ground",C.booking_type,C.slots?.join("; ")||"N/A",`"${C.customer_name.replace(/"/g,'""')}"`,C.customer_contact,C.customer_email,`"${(()=>{const B=C.net_number&&(Array.isArray(C.net_number)?C.net_number.length:C.net_number)?Array.isArray(C.net_number)?C.net_number.map(Z=>`Net ${Z}`).join(", "):`Net ${C.net_number}`:"";return C.event_type?`${C.event_type}${B?` (${B})`:""}`:B||"No details"})().replace(/"/g,'""')}"`,C.payment_status,C.payment_amount,`"${(C.notes||"").replace(/"/g,'""')}"`].join(",")),_="data:text/csv;charset=utf-8,"+[j.join(","),...E].join(`
`),w=encodeURI(_),v=document.createElement("a");v.setAttribute("href",w),v.setAttribute("download",`harvard_house_${f||"ground"}_bookings_filtered.csv`),document.body.appendChild(v),v.click(),document.body.removeChild(v)},A=({sortKey:x,children:j})=>l.jsx("th",{className:"py-2 px-2 font-semibold text-xs text-left",children:l.jsxs("button",{onClick:()=>K(x),className:"flex items-center gap-1 hover:text-brand-blue dark:hover:text-brand-orange",children:[l.jsx("span",{children:j}),l.jsx(md,{size:12})]})});return l.jsxs("div",{className:"space-y-3 animate-slideInUp",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-lg font-bold text-gray-800 dark:text-gray-200",children:h?.role==="customer"?"My Bookings & Requests":"All Bookings & Requests"}),h?.role==="admin"&&l.jsxs("button",{onClick:N,className:"bg-brand-blue text-white font-semibold px-4 py-2 rounded-lg shadow-md hover:bg-brand-dark transition-all transform hover:scale-105 flex items-center space-x-2",children:[l.jsx(ko,{size:16}),l.jsx("span",{children:"Export CSV"})]})]}),l.jsxs("div",{className:"bg-white dark:bg-gray-800 p-2 rounded-lg shadow-sm space-y-2",children:[l.jsx("div",{className:"flex flex-col sm:flex-row gap-2 items-start sm:items-center",children:l.jsxs("div",{className:"relative w-full sm:w-64",children:[l.jsx(dd,{className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-400",size:14}),l.jsx("input",{type:"text",placeholder:"Search...",value:L,onChange:x=>z(x.target.value),className:"w-full pl-7 pr-2 py-1 text-sm border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg shadow-sm focus:outline-none focus:ring-1 focus:ring-brand-orange"})]})}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Payment:"}),l.jsxs("div",{className:"flex gap-0.5",children:[l.jsx($a,{label:"All",value:"all",activeValue:G,onClick:V}),l.jsx($a,{label:"Paid",value:"paid",activeValue:G,onClick:V}),l.jsx($a,{label:"Unpaid",value:"unpaid",activeValue:G,onClick:V})]})]}),h?.role!=="customer"&&l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Status:"}),l.jsxs("div",{className:"flex gap-0.5",children:[l.jsx($a,{label:"All",value:"all",activeValue:$,onClick:te}),l.jsx($a,{label:"Pending",value:"pending",activeValue:$,onClick:te}),l.jsx($a,{label:"Approved",value:"approved",activeValue:$,onClick:te}),l.jsx($a,{label:"Confirmed",value:"confirmed",activeValue:$,onClick:te})]})]}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Date:"}),l.jsxs("div",{className:"flex items-center gap-0.5",children:[l.jsx("input",{type:"date",value:X.start,onChange:x=>Q(j=>({...j,start:x.target.value})),className:"p-0.5 text-xs border rounded bg-white dark:bg-gray-700 dark:border-gray-600 w-24"}),l.jsx("span",{className:"text-xs text-gray-500",children:"to"}),l.jsx("input",{type:"date",value:X.end,onChange:x=>Q(j=>({...j,end:x.target.value})),className:"p-0.5 text-xs border rounded bg-white dark:bg-gray-700 dark:border-gray-600 w-24"})]})]})]})]}),l.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden hidden lg:block",children:l.jsxs("div",{className:"overflow-x-auto",children:[l.jsxs("table",{className:"w-full min-w-[600px]",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-700/50 text-left text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[l.jsx(A,{sortKey:"date",children:"Date"}),l.jsx(A,{sortKey:"customer_name",children:"Customer"}),l.jsx(A,{sortKey:"event_type",children:"Details"}),l.jsx("th",{className:"py-2 px-2 font-semibold text-xs text-left",children:"Notes"}),l.jsx(A,{sortKey:"payment_amount",children:"Amount"}),l.jsx(A,{sortKey:"payment_status",children:"Payment"}),l.jsx(A,{sortKey:"status",children:"Status"}),h?.role!=="customer"&&l.jsx("th",{className:"py-2 px-2 font-semibold text-xs text-center",children:"Actions"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:U.map(x=>l.jsxs("tr",{onClick:()=>a(fa(x.date),x),className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer",children:[l.jsx("td",{className:"py-2 px-2 text-sm text-gray-800 dark:text-gray-300 text-left",children:fa(x.date).toLocaleDateString("en-GB")}),l.jsx("td",{className:"py-2 px-2 text-sm font-semibold text-gray-800 dark:text-gray-200 text-left",children:l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("span",{className:"truncate max-w-[120px]",title:x.customer_name,children:x.customer_name}),x.isRequest&&l.jsx("span",{className:"px-1.5 py-0.5 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-700 dark:bg-yellow-900/50 dark:text-yellow-300",children:"REQ"})]})}),l.jsx("td",{className:"py-2 px-2 text-xs text-gray-600 dark:text-gray-400 max-w-[150px] text-left",children:l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"truncate",title:x.event_type||`Net ${x.net_number}`,children:(()=>{const j=x.net_number&&(Array.isArray(x.net_number)?x.net_number.length:x.net_number)?Array.isArray(x.net_number)?x.net_number.map(E=>`Net ${E}`).join(", "):`Net ${x.net_number}`:"";return x.event_type?`${x.event_type}${j?` (${j})`:""}`:j||"No details"})()}),l.jsxs("span",{className:"text-gray-500 dark:text-gray-500 text-xs",children:["(",x.booking_type==="full_day"?"Full":x.slots?.join(","),")"]})]})}),l.jsx("td",{className:"py-2 px-2 text-xs text-gray-600 dark:text-gray-400 max-w-[150px] text-left",children:l.jsx("div",{className:"truncate",title:x.notes||"No notes",children:x.notes||"No notes"})}),l.jsxs("td",{className:"py-2 px-2 text-sm text-gray-800 dark:text-gray-300 font-medium text-left",children:["",x.payment_amount]}),l.jsx("td",{className:"py-2 px-2 text-sm text-left",children:l.jsx("span",{className:`px-1.5 py-0.5 text-xs font-semibold rounded-full ${x.payment_status===Ve.PAID?"bg-green-100 text-green-700 dark:bg-green-900/50 dark:text-green-300":"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/50 dark:text-yellow-300"}`,children:x.payment_status===Ve.PAID?"PAID":"UNPAID"})}),l.jsx("td",{className:"py-2 px-2 text-sm text-left",children:l.jsx("span",{className:`px-1.5 py-0.5 text-xs font-semibold rounded-full ${x.status===I.PENDING?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/50 dark:text-yellow-300":x.status===I.APPROVED?"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300":x.status===I.CONFIRMED?"bg-green-100 text-green-700 dark:bg-green-900/50 dark:text-green-300":"bg-gray-100 text-gray-700 dark:bg-gray-900/50 dark:text-gray-300"}`,children:x.status?.charAt(0)+x.status?.slice(1).toLowerCase()})}),h?.role!=="customer"&&l.jsxs("td",{className:"py-2 px-2 text-sm text-center",children:[x.isRequest&&h?.role==="admin"&&l.jsxs("div",{className:"flex justify-center gap-0.5",children:[x.status===I.PENDING&&r&&i&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:j=>{j.stopPropagation(),y(x.id,x.system)},disabled:D===x.id,className:`p-1 rounded bg-green-100 text-green-700 hover:bg-green-200 dark:bg-green-900/50 dark:text-green-300 dark:hover:bg-green-900/70 disabled:opacity-50 disabled:cursor-not-allowed ${D===x.id?"cursor-wait":""}`,title:"Approve Request",children:D===x.id?l.jsx("div",{className:"animate-spin rounded-full h-2.5 w-2.5 border border-green-700 border-t-transparent"}):l.jsx(zn,{size:12})}),l.jsx("button",{onClick:j=>{j.stopPropagation(),k(x.id,x.system)},disabled:b===x.id,className:`p-1 rounded bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900/50 dark:text-red-300 dark:hover:bg-red-900/70 disabled:opacity-50 disabled:cursor-not-allowed ${b===x.id?"cursor-wait":""}`,title:"Reject Request",children:b===x.id?l.jsx("div",{className:"animate-spin rounded-full h-2.5 w-2.5 border border-red-700 border-t-transparent"}):l.jsx(pt,{size:12})})]}),c&&l.jsx("button",{onClick:j=>{j.stopPropagation(),c(fa(x.date),x,x.system)},className:"p-1 rounded bg-blue-100 text-blue-700 hover:bg-blue-200 dark:bg-blue-900/50 dark:text-blue-300 dark:hover:bg-blue-900/70",title:"Edit Request",children:l.jsx(So,{size:12})}),l.jsx("button",{onClick:j=>{j.stopPropagation(),window.confirm(` Delete ${x.customer_name} - ${fa(x.date).toLocaleDateString("en-GB")}?`)&&M(x.id,x.system)},disabled:d===x.id,className:`p-1 rounded bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-900/50 dark:text-gray-300 dark:hover:bg-gray-900/70 disabled:opacity-50 disabled:cursor-not-allowed ${d===x.id?"cursor-wait":""}`,title:"Delete Request",children:d===x.id?l.jsx("div",{className:"animate-spin rounded-full h-2.5 w-2.5 border border-gray-700 border-t-transparent"}):l.jsx(cr,{size:12})})]}),x.status===I.PENDING&&x.isRequest&&h?.role==="management"&&l.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:"Pending"})]})]},x.id))})]}),U.length===0&&l.jsx("div",{className:"text-center py-10",children:l.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No bookings found."})})]})}),l.jsx("div",{className:"md:hidden space-y-2",children:U.length>0?U.map(x=>l.jsx(Qx,{booking:x,onClick:()=>a(fa(x.date),x),onApprove:x.status===I.PENDING&&x.isRequest?()=>y(x.id,x.system):void 0,onReject:x.status===I.PENDING&&x.isRequest?()=>k(x.id,x.system):void 0,onDelete:x.isRequest?()=>M(x.id,x.system):void 0,onEdit:c?()=>c(fa(x.date),x,x.system):void 0,userRole:h?.role,isApproving:D===x.id,isRejecting:b===x.id,isDeleting:d===x.id},x.id)):l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No bookings found matching your filters."})})})]})},ms=e=>{const[t,a,s]=e.split("-").map(Number);return new Date(t,a-1,s)},Zx=({customer:e})=>l.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border-l-4 border-brand-blue",children:[l.jsxs("p",{className:"font-bold text-gray-800 dark:text-gray-200 flex items-center gap-2",children:[l.jsx(ki,{size:16})," ",e.name]}),l.jsx("div",{className:"border-t dark:border-gray-700 my-2"}),l.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300 space-y-2",children:[l.jsxs("p",{className:"flex items-center gap-2",children:[l.jsx(Ni,{size:14})," ",e.contact]}),l.jsxs("p",{className:"flex items-center gap-2 truncate",children:[l.jsx(ji,{size:14})," ",e.email]}),l.jsxs("p",{className:"flex items-center gap-2",children:[l.jsx(Cg,{size:14})," ",e.totalBookings," Bookings"]}),l.jsxs("p",{className:"flex items-center gap-2",children:[l.jsx(Mg,{size:14})," ",e.totalSpent.toLocaleString("en-IN",{style:"currency",currency:"INR"})," Total Spent"]}),l.jsxs("p",{className:"flex items-center gap-2",children:[l.jsx(it,{size:14})," Last Booking: ",e.lastBooking]})]})]}),Kx=({bookings:e})=>{const[t,a]=S.useState(""),[s,n]=S.useState({key:"totalSpent",direction:"desc"}),r=S.useMemo(()=>{const f=new Map;e.forEach(m=>{const d=m.customer_contact;f.has(d)||f.set(d,{name:m.customer_name,email:m.customer_email,bookings:[]}),f.get(d).bookings.push(m)});let h=Array.from(f.entries()).map(([m,d])=>{const p=d.bookings.sort((T,b)=>ms(b.date).getTime()-ms(T.date).getTime()),D=ms(p[0].date);return{contact:m,name:d.name,email:d.email,totalBookings:d.bookings.length,totalSpent:d.bookings.reduce((T,b)=>T+b.payment_amount,0),lastBookingDate:D,lastBooking:D.toLocaleDateString("en-GB")}});if(t){const m=t.toLowerCase();h=h.filter(d=>d.name.toLowerCase().includes(m)||d.contact.toLowerCase().includes(m)||d.email&&d.email.toLowerCase().includes(m))}return s&&h.sort((m,d)=>{const p=m[s.key],D=d[s.key];if(p instanceof Date&&D instanceof Date)return s.direction==="asc"?p.getTime()-D.getTime():D.getTime()-p.getTime();if(typeof p=="number"&&typeof D=="number")return s.direction==="asc"?p-D:D-p;const T=String(p).toLowerCase(),b=String(D).toLowerCase();return T<b?s.direction==="asc"?-1:1:T>b?s.direction==="asc"?1:-1:0}),h},[e,t,s]),i=S.useMemo(()=>{const f=new Map;return e.forEach(h=>{const m=h.customer_contact;f.has(m)||f.set(m,{name:h.customer_name,email:h.customer_email,bookings:[]}),f.get(m).bookings.push(h)}),Array.from(f.entries()).map(([h,m])=>{const d=m.bookings.sort((p,D)=>ms(D.date).getTime()-ms(p.date).getTime());return{contact:h,name:m.name,email:m.email,totalBookings:m.bookings.length,totalSpent:m.bookings.reduce((p,D)=>p+D.payment_amount,0),lastBooking:ms(d[0].date).toLocaleDateString("en-GB")}})},[e]),o=()=>{if(i.length===0){alert("No customer data to export.");return}const f=["Name","Contact","Email","Total Bookings","Total Spent","Last Booking Date"],h=i.map(D=>[`"${D.name.replace(/"/g,'""')}"`,D.contact,D.email,D.totalBookings,D.totalSpent,D.lastBooking].join(",")),m="data:text/csv;charset=utf-8,"+[f.join(","),...h].join(`
`),d=encodeURI(m),p=document.createElement("a");p.setAttribute("href",d),p.setAttribute("download","harvard_house_customers.csv"),document.body.appendChild(p),p.click(),document.body.removeChild(p)},c=f=>{let h="asc";s&&s.key===f&&s.direction==="asc"&&(h="desc"),n({key:f,direction:h})},g=({sortKey:f,children:h})=>l.jsx("th",{className:"py-3 px-4 font-semibold",children:l.jsxs("button",{onClick:()=>c(f),className:"flex items-center space-x-1 hover:text-brand-blue dark:hover:text-brand-orange",children:[l.jsx("span",{children:h}),l.jsx(md,{size:14})]})});return l.jsxs("div",{className:"space-y-6 animate-slideInUp",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-200",children:"Customer Management"}),l.jsxs("button",{onClick:o,disabled:i.length===0,className:"bg-brand-blue text-white font-semibold px-4 py-2 rounded-lg shadow-md hover:bg-brand-dark transition-all transform hover:scale-105 flex items-center space-x-2 disabled:bg-gray-400 disabled:cursor-not-allowed disabled:scale-100",children:[l.jsx(ko,{size:16}),l.jsx("span",{children:"Export Customers"})]})]}),l.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm",children:l.jsxs("div",{className:"relative w-full sm:w-72",children:[l.jsx(dd,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),l.jsx("input",{type:"text",placeholder:"Search by name, contact, email...",value:t,onChange:f=>a(f.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-brand-orange"})]})}),l.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden hidden md:block",children:l.jsxs("div",{className:"overflow-x-auto",children:[l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-700/50 text-left text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[l.jsx(g,{sortKey:"name",children:"Customer Name"}),l.jsx(g,{sortKey:"contact",children:"Contact"}),l.jsx(g,{sortKey:"email",children:"Email"}),l.jsx(g,{sortKey:"totalBookings",children:"Total Bookings"}),l.jsx(g,{sortKey:"totalSpent",children:"Total Spent"}),l.jsx(g,{sortKey:"lastBookingDate",children:"Last Booking Date"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:r.map(f=>l.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[l.jsx("td",{className:"py-3 px-4 text-sm font-semibold text-gray-800 dark:text-gray-200",children:f.name}),l.jsx("td",{className:"py-3 px-4 text-sm text-gray-600 dark:text-gray-400",children:f.contact}),l.jsx("td",{className:"py-3 px-4 text-sm text-gray-600 dark:text-gray-400 truncate max-w-xs",children:f.email}),l.jsx("td",{className:"py-3 px-4 text-sm text-center text-gray-800 dark:text-gray-300",children:f.totalBookings}),l.jsx("td",{className:"py-3 px-4 text-sm font-medium text-gray-800 dark:text-gray-200",children:f.totalSpent.toLocaleString("en-IN",{style:"currency",currency:"INR"})}),l.jsx("td",{className:"py-3 px-4 text-sm text-gray-600 dark:text-gray-400",children:f.lastBooking})]},f.contact))})]}),r.length===0&&l.jsx("p",{className:"text-center py-10 text-gray-500 dark:text-gray-400",children:"No customers found."})]})}),l.jsx("div",{className:"md:hidden space-y-4",children:r.length>0?r.map(f=>l.jsx(Zx,{customer:f},f.contact)):l.jsx("p",{className:"text-center py-10 text-gray-500 dark:text-gray-400",children:"No customers found."})})]})},pi=e=>{const t=e.getFullYear(),a=(e.getMonth()+1).toString().padStart(2,"0"),s=e.getDate().toString().padStart(2,"0");return`${t}-${a}-${s}`},Jx=({isOpen:e,onClose:t,date:a,booking:s,system:n,onBookingUpdate:r})=>{const{user:i,bookings:o,addBooking:c,updateBooking:g,deleteBooking:f,specialDates:h}=S.useContext(Yt),m={date:a?pi(a):"",booking_type:ce.SLOT,slots:[],customer_name:"",customer_contact:"",customer_email:"",event_type:"",notes:"",payment_status:Ve.UNPAID,payment_amount:void 0,net_number:[],system:n,status:I.CONFIRMED},[d,p]=S.useState(m),[D,T]=S.useState(!1),[b,u]=S.useState(!1),[y,k]=S.useState(0),[M,L]=S.useState({}),z=!!s;S.useEffect(()=>{e&&a&&p({date:pi(a),booking_type:s?.booking_type||ce.SLOT,slots:s?.slots||[],customer_name:s?.customer_name||"",customer_contact:s?.customer_contact||"",customer_email:s?.customer_email||"",event_type:s?.event_type||"",notes:s?.notes||"",payment_status:s?.payment_status||Ve.UNPAID,payment_amount:s?.payment_amount,net_number:s?.net_number||[],system:n,status:s?.status||I.CONFIRMED})},[e,a,s,n]);const G=S.useMemo(()=>o[n],[o,n]),V=S.useMemo(()=>n==="ground"&&a?Dr(a,h):n==="ground"?Er:Cr,[n,a,h]),$=S.useMemo(()=>{if(!a)return[];const w=pi(a);return G.filter(v=>v.date===w)},[a,G]),te=w=>$.some(v=>v.id!==s?.id&&v.booking_type===ce.SLOT&&v.status===I.CONFIRMED&&v.slots?.includes(w)),X=S.useMemo(()=>$.some(w=>w.id!==s?.id&&w.booking_type===ce.FULL_DAY),[$,s]);S.useMemo(()=>$.some(w=>w.id!==s?.id),[$,s]);const Q=S.useMemo(()=>$.some(w=>w.id!==s?.id&&w.booking_type===ce.SLOT&&w.status===I.CONFIRMED),[$,s]),Y=w=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(w),W=w=>w.trim().split(/\s+/).filter(C=>C.length>0).length>5?"Name should not exceed 5 words":null,U=w=>w.replace(/\D/g,"").length>10?"Contact number should not exceed 10 digits":null,K=w=>w.trim().split(/\s+/).filter(C=>C.length>0).length>1?"Event type should be one word only":null;if(!e||!a)return null;const N=w=>{const{name:v,value:C}=w.target;if(v==="notes"){const B=C.length;k(B)}let R=null;v==="customer_name"&&C?R=W(C):v==="customer_contact"&&C?R=U(C):v==="customer_email"&&C?R=Y(C)?null:"Please enter a valid email address":v==="event_type"&&C&&(R=K(C)),L(B=>({...B,[v]:R})),p(B=>({...B,[v]:v==="payment_amount"?C&&parseFloat(C)||void 0:C}))},A=w=>{p(v=>{const C=v.slots?.includes(w)?v.slots.filter(R=>R!==w):[...v.slots||[],w];return{...v,slots:C,booking_type:ce.SLOT}})},x=()=>{p(w=>({...w,slots:[],booking_type:ce.FULL_DAY}))},j=w=>{p(v=>{const C=Array.isArray(v.net_number)?v.net_number:[],R=C.includes(w)?C.filter(B=>B!==w):[...C,w];return{...v,net_number:R}})},E=async w=>{w.preventDefault(),T(!0);try{if(s){const v={...d,id:s.id,created_at:s.created_at};await g(v,n)}else await c(d,n);if(t(),r)try{await r()}catch(v){console.error(" Error refreshing data after booking update:",v)}}catch(v){console.error("Failed to save booking:",v),alert(`Failed to save booking: ${v.message}. Please try again.`)}finally{T(!1)}},_=async()=>{if(s&&window.confirm(` PERMANENT DELETION WARNING 

Are you sure you want to delete this booking?

This will:
 Permanently delete the booking from the database
 Remove all associated data and records
 Cannot be undone or recovered

Customer: ${s.customer_name}
Date: ${new Date(s.date).toLocaleDateString("en-GB")}
Time: ${s.booking_type==="full_day"?"Full Day":s.slots?.join(", ")}

Click "OK" to permanently delete this booking, or "Cancel" to keep it.`)){u(!0);try{await f(s.id,n),t()}catch(w){console.error("Failed to delete booking:",w)}finally{u(!1)}}};return l.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-2 sm:p-4 animate-fadeIn",children:l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full max-w-[95vw] sm:max-w-md md:max-w-2xl max-h-[90vh] flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-center p-2 sm:p-3 border-b dark:border-gray-700",children:[l.jsxs("h2",{className:"text-sm sm:text-lg font-bold text-brand-dark dark:text-white",children:[z?"Edit":"New"," - ",a.toLocaleDateString("en-GB",{weekday:"short",month:"short",day:"numeric"})]}),l.jsx("button",{onClick:t,className:"p-1 rounded-full text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700",children:l.jsx(pt,{size:16})})]}),l.jsxs("form",{onSubmit:E,className:"p-2 sm:p-4 space-y-2 sm:space-y-3 overflow-y-auto",children:[!z&&l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold mb-1.5 sm:mb-2 text-sm sm:text-base text-gray-800 dark:text-gray-200",children:"Booking Type"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 sm:gap-3",children:[n==="ground"&&l.jsxs("button",{type:"button",onClick:x,disabled:Q,className:`p-2.5 rounded text-center transition-all text-sm ${d.booking_type===ce.FULL_DAY?"bg-brand-blue text-white ring-2 ring-brand-orange":"bg-gray-100 dark:bg-gray-700 dark:text-gray-300"} ${Q?"opacity-50 cursor-not-allowed":"hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:["Full Day Booking",Q&&l.jsx("span",{className:"block text-xs",children:"Unavailable"})]}),l.jsxs("div",{className:`col-span-full ${n==="ground"?"":"md:col-span-2"}`,children:[l.jsx("p",{className:"mb-1 sm:mb-1.5 text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400",children:"Available Slots"}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-1 sm:gap-1.5",children:V.map(w=>{const v=te(w);return l.jsxs("button",{type:"button",onClick:()=>A(w),disabled:v||X,className:`p-1 sm:p-1.5 rounded text-xs transition-all flex flex-col items-center justify-center ${d.slots?.includes(w)?"bg-brand-blue text-white ring-1 ring-brand-orange":"bg-gray-100 dark:bg-gray-700 dark:text-gray-300"} ${v||X?"opacity-50 cursor-not-allowed":"hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[l.jsx("span",{className:"text-xs sm:text-sm",children:w}),v&&l.jsx("span",{className:"block text-xs leading-tight",children:"(Booked)"})]},w)})})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3 pt-2 sm:pt-3 border-t dark:border-gray-700",children:[l.jsxs("div",{children:[l.jsx("input",{name:"customer_name",value:d.customer_name,onChange:N,type:"text",placeholder:"Customer Name",className:`p-1.5 sm:p-2 text-sm border rounded bg-white dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-brand-orange focus:border-transparent transition ${M.customer_name?"border-red-500":""}`,required:!0}),M.customer_name&&l.jsx("p",{className:"text-red-500 text-xs mt-1",children:M.customer_name})]}),l.jsxs("div",{children:[l.jsx("input",{name:"customer_contact",value:d.customer_contact,onChange:N,type:"tel",placeholder:"Contact Number",className:`p-1.5 sm:p-2 text-sm border rounded bg-white dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-brand-orange focus:border-transparent transition ${M.customer_contact?"border-red-500":""}`,required:!0}),M.customer_contact&&l.jsx("p",{className:"text-red-500 text-xs mt-1",children:M.customer_contact})]}),l.jsxs("div",{children:[l.jsx("input",{name:"customer_email",value:d.customer_email,type:"email",onChange:N,placeholder:"Email Address",className:`p-1.5 sm:p-2 text-sm border rounded bg-white dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-brand-orange focus:border-transparent transition ${M.customer_email?"border-red-500":""}`}),M.customer_email&&l.jsx("p",{className:"text-red-500 text-xs mt-1",children:M.customer_email})]}),n==="ground"?l.jsxs("div",{children:[l.jsx("input",{name:"event_type",value:d.event_type,onChange:N,type:"text",placeholder:"Sport / Event Type",className:`p-1.5 sm:p-2 text-sm border rounded bg-white dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-brand-orange focus:border-transparent transition ${M.event_type?"border-red-500":""}`,required:!0}),M.event_type&&l.jsx("p",{className:"text-red-500 text-xs mt-1",children:M.event_type})]}):l.jsxs("div",{children:[l.jsx("p",{className:"mb-1.5 text-sm font-medium text-gray-600 dark:text-gray-400",children:"Select Nets"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsx("button",{type:"button",onClick:()=>j("1"),className:`p-2.5 rounded text-center transition-all text-sm ${(d.net_number||[]).includes("1")?"bg-brand-blue text-white ring-2 ring-brand-orange":"bg-gray-100 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Concrete Net 1"}),l.jsx("button",{type:"button",onClick:()=>j("2"),className:`p-2.5 rounded text-center transition-all text-sm ${(d.net_number||[]).includes("2")?"bg-brand-blue text-white ring-2 ring-brand-orange":"bg-gray-100 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Concrete Net 2"}),l.jsx("button",{type:"button",onClick:()=>j("3"),className:`p-2.5 rounded text-center transition-all text-sm ${(d.net_number||[]).includes("3")?"bg-brand-blue text-white ring-2 ring-brand-orange":"bg-gray-100 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Astro Net 1"}),l.jsx("button",{type:"button",onClick:()=>j("4"),className:`p-2.5 rounded text-center transition-all text-sm ${(d.net_number||[]).includes("4")?"bg-brand-blue text-white ring-2 ring-brand-orange":"bg-gray-100 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Astro Net 2"})]})]}),l.jsxs("select",{name:"payment_status",value:d.payment_status,onChange:N,className:"p-1.5 sm:p-2 text-sm border rounded bg-white dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-brand-orange focus:border-transparent transition",children:[l.jsx("option",{value:Ve.UNPAID,children:"Unpaid"}),l.jsx("option",{value:Ve.PAID,children:"Paid"})]}),l.jsx("input",{name:"payment_amount",value:d.payment_amount||"",onChange:N,type:"number",step:"0.01",min:"0",placeholder:"Payment Amount",className:"p-1.5 sm:p-2 text-sm border rounded bg-white dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-brand-orange focus:border-transparent transition",required:!0})]}),l.jsxs("div",{className:"pt-2 sm:pt-3",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1 sm:mb-1.5",children:[l.jsx("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Notes"}),l.jsxs("span",{className:`text-xs ${y>100?"text-red-500":"text-gray-500 dark:text-gray-400"}`,children:[y,"/100"]})]}),l.jsx("textarea",{name:"notes",value:d.notes||"",onChange:N,placeholder:"Notes...",maxLength:y>100?void 0:100,className:`p-1.5 sm:p-2 border rounded w-full h-16 sm:h-20 bg-white dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-brand-orange focus:border-transparent transition text-xs sm:text-sm ${y>100?"border-red-500":""}`}),y>100&&l.jsx("p",{className:"text-red-500 text-xs mt-1",children:"Letter limit exceeded"})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between items-center gap-2 pt-2 sm:pt-3 border-t dark:border-gray-700",children:[l.jsx("div",{children:z&&i?.role===he.ADMIN&&l.jsx("button",{type:"button",onClick:_,disabled:b||D,className:"w-full sm:w-auto bg-red-600 text-white px-2 sm:px-3 py-1 sm:py-1.5 rounded text-xs sm:text-sm hover:bg-red-700 transition-colors flex items-center justify-center space-x-1 sm:space-x-1.5 disabled:opacity-50",children:b?l.jsxs(l.Fragment,{children:[l.jsx(_l,{size:12,className:"animate-spin flex-shrink-0"}),l.jsx("span",{children:"Deleting..."})]}):l.jsxs(l.Fragment,{children:[l.jsx(cr,{size:12,className:"flex-shrink-0"}),l.jsx("span",{children:"Delete"})]})})}),l.jsxs("div",{className:"flex flex-col-reverse sm:flex-row w-full sm:w-auto gap-2",children:[l.jsx("button",{type:"button",onClick:t,className:"w-full sm:w-auto bg-gray-200 text-gray-800 dark:bg-gray-600 dark:text-gray-200 px-2 sm:px-3 py-1 sm:py-1.5 rounded text-xs sm:text-sm hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors",children:"Cancel"}),(i?.role===he.ADMIN||i?.role===he.CUSTOMER&&z&&s?.customer_email===i.email)&&l.jsx("button",{type:"submit",disabled:D||b,className:"w-full sm:w-auto bg-brand-orange text-white px-2 sm:px-3 py-1 sm:py-1.5 rounded text-xs sm:text-sm hover:bg-orange-600 transition-colors flex items-center justify-center space-x-1 sm:space-x-1.5 disabled:opacity-50",children:D?l.jsxs(l.Fragment,{children:[l.jsx(_l,{size:12,className:"animate-spin flex-shrink-0"}),l.jsx("span",{children:"Saving..."})]}):z?l.jsxs(l.Fragment,{children:[l.jsx(So,{size:12,className:"flex-shrink-0"}),l.jsx("span",{children:"Update"})]}):l.jsxs(l.Fragment,{children:[l.jsx(ka,{size:12,className:"flex-shrink-0"}),l.jsx("span",{children:"Create"})]})})]})]})]})]})})},Fx=({isOpen:e,onClose:t,date:a,system:s,onSubmitRequest:n,userRole:r,onBookingUpdate:i,booking:o})=>{const[c,g]=S.useState({customer_name:"",customer_contact:"",customer_email:"",event_type:"",notes:"",booking_type:ce.SLOT,slots:[],net_number:[],payment_status:Ve.UNPAID,payment_amount:void 0}),[f,h]=S.useState(!1),[m,d]=S.useState(0),[p,D]=S.useState({}),[T,b]=S.useState(""),u=hd.useMemo(()=>s==="ground"&&a?Dr(a):s==="ground"?Er:Cr,[s,a]),y=Q=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Q),k=Q=>Q.trim().split(/\s+/).filter(W=>W.length>0).length>5?"Name should not exceed 5 words":null,M=Q=>{const Y=Q.replace(/\D/g,"");return Q.trim()===""?"Contact number is required":Y.length===0?"Contact number must contain only numbers":Y.length<10?"Contact number must be at least 10 digits":Y.length>10?"Contact number should not exceed 10 digits":null},L=Q=>Q.trim().split(/\s+/).filter(W=>W.length>0).length>1?"Event type should be one word only":null,z=()=>{const Q={};if(c.customer_name){const W=k(c.customer_name);W&&(Q.customer_name=W)}if(c.customer_contact){const W=M(c.customer_contact);W&&(Q.customer_contact=W)}if(c.customer_email){const W=y(c.customer_email)?null:"Please enter a valid email address";W&&(Q.customer_email=W)}if(c.event_type){const W=L(c.event_type);W&&(Q.event_type=W)}c.booking_type===ce.SLOT&&c.slots.length===0&&(Q.booking_timing="Please select at least one time slot"),s==="net"&&c.net_number.length===0&&(Q.net_selection="Please select at least one net"),D(Q);const Y=Object.keys(Q).length>0;return b(Y?"Please fix the errors above before submitting.":""),!Y};if(S.useEffect(()=>{e&&a&&(o?(console.log(" BookingRequestModal: Loading existing booking request for editing:",o),g({customer_name:o.customer_name||"",customer_contact:o.customer_contact||"",customer_email:o.customer_email||"",event_type:o.event_type||"",notes:o.notes||"",booking_type:o.booking_type||ce.SLOT,slots:o.slots||[],net_number:Array.isArray(o.net_number)?o.net_number:o.net_number?[o.net_number]:[],payment_status:o.payment_status||Ve.UNPAID,payment_amount:o.payment_amount}),d(o.notes?o.notes.length:0)):(g({customer_name:"",customer_contact:"",customer_email:"",event_type:"",notes:"",booking_type:ce.SLOT,slots:[],net_number:[],payment_status:Ve.UNPAID,payment_amount:void 0}),d(0)))},[e,a,s,o]),r!==he.ADMIN)return l.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fadeIn",children:l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full max-w-md max-h-[90vh] flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-brand-dark dark:text-white flex items-center space-x-2",children:[l.jsx(Ag,{className:"text-red-500",size:24}),l.jsx("span",{children:"Access Denied"})]}),l.jsx("button",{onClick:t,className:"p-1 rounded-full text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700",children:l.jsx(pt,{})})]}),l.jsxs("div",{className:"p-6",children:[l.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:l.jsxs("p",{className:"text-sm text-red-800 dark:text-red-300",children:[l.jsx("strong",{children:"Access Restricted:"})," This feature is only available to administrators. Please contact your administrator if you need assistance."]})}),l.jsx("div",{className:"flex justify-end mt-4",children:l.jsx("button",{onClick:t,className:"bg-gray-200 text-gray-800 dark:bg-gray-600 dark:text-gray-200 px-4 py-2 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors",children:"Close"})})]})]})});if(!e||!a)return null;const G=Q=>{const{name:Y,value:W}=Q.target;if(Y==="notes"){const K=W.length;d(K)}let U=null;Y==="customer_name"&&W?U=k(W):Y==="customer_contact"&&W?U=M(W):Y==="customer_email"&&W?U=y(W)?null:"Please enter a valid email address":Y==="event_type"&&W&&(U=L(W)),D(K=>({...K,[Y]:U})),g(K=>({...K,[Y]:Y==="payment_amount"?W&&parseFloat(W)||0:W}))},V=Q=>{g(Y=>{const W=Y.slots.includes(Q)?Y.slots.filter(U=>U!==Q):[...Y.slots,Q];return{...Y,slots:W,booking_type:ce.SLOT}})},$=()=>{g(Q=>({...Q,slots:[],booking_type:ce.FULL_DAY}))},te=Q=>{g(Y=>{const W=Y.net_number.includes(Q)?Y.net_number.filter(U=>U!==Q):[...Y.net_number,Q];return{...Y,net_number:W}})},X=async Q=>{if(Q.preventDefault(),!!z()){if(!navigator.onLine){b("No internet connection. Please check your network and try again.");return}h(!0),b("");try{const Y={...c,date:a?.toISOString().split("T")[0],system:s,submitted_at:new Date().toISOString()};if(o){console.log(" Updating existing booking request:",o.id);const W={...Y,id:o.id,request_number:o.request_number,status:o.status,created_at:o.created_at};await n(W)}else{console.log(" Creating new booking request");const W={...Y,status:"pending"};await n(W)}if(t(),i)try{await i()}catch(W){console.error(" Error refreshing data after booking request:",W)}}catch(Y){console.error("Failed to submit booking request:",Y)}finally{h(!1)}}};return l.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fadeIn",children:l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full max-w-md md:max-w-2xl max-h-[90vh] flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-brand-dark dark:text-white",children:[o?"Edit":"Request"," Booking ",o?"- "+a?.toLocaleDateString("en-GB",{weekday:"short",month:"short",day:"numeric"}):"for "+a?.toLocaleDateString("en-GB",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),l.jsx("button",{onClick:t,className:"p-1 rounded-full text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700",children:l.jsx(pt,{})})]}),l.jsxs("form",{onSubmit:X,className:"p-6 space-y-4 overflow-y-auto",children:[T&&l.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:l.jsx("p",{className:"text-red-700 dark:text-red-300 text-sm",children:T})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold mb-2 text-gray-800 dark:text-gray-200",children:"Booking Type"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s==="ground"&&l.jsx("button",{type:"button",onClick:$,className:`p-3 rounded text-center transition-all ${c.booking_type===ce.FULL_DAY?"bg-brand-blue text-white ring-2 ring-brand-orange":"bg-gray-100 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Full Day Booking"}),l.jsxs("div",{className:`col-span-full ${s==="ground"?"":"md:col-span-2"}`,children:[l.jsx("p",{className:"mb-2 text-sm font-medium text-gray-600 dark:text-gray-400",children:"Available Slots"}),p.booking_timing&&l.jsx("p",{className:"text-red-500 text-xs mb-2",children:p.booking_timing}),l.jsx("div",{className:`grid grid-cols-2 sm:grid-cols-3 gap-2 ${c.slots.length===0?"ring-2 ring-red-300 dark:ring-red-600 rounded-lg p-2":""}`,children:u.map(Q=>l.jsx("button",{type:"button",onClick:()=>V(Q),className:`p-2 rounded text-sm transition-all flex items-center justify-center space-x-2 ${c.slots.includes(Q)?"bg-brand-blue text-white ring-2 ring-brand-orange":"bg-gray-100 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:l.jsx("span",{children:Q})},Q))})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t dark:border-gray-700",children:[l.jsx("input",{name:"customer_name",value:c.customer_name,onChange:G,type:"text",placeholder:"Your Name",className:`p-2 border rounded bg-white dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-brand-orange focus:border-transparent transition ${p.customer_name?"border-red-500":""}`,required:!0}),p.customer_name&&l.jsx("p",{className:"text-red-500 text-xs mt-1",children:p.customer_name}),l.jsx("input",{name:"customer_contact",value:c.customer_contact,onChange:G,type:"tel",placeholder:"Contact Number",className:`p-2 border rounded bg-white dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-brand-orange focus:border-transparent transition ${p.customer_contact?"border-red-500":""}`,required:!0}),p.customer_contact&&l.jsx("p",{className:"text-red-500 text-xs mt-1",children:p.customer_contact}),l.jsx("input",{name:"customer_email",value:c.customer_email,type:"email",onChange:G,placeholder:"Email Address",className:`p-2 border rounded bg-white dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-brand-orange focus:border-transparent transition ${p.customer_email?"border-red-500":""}`}),p.customer_email&&l.jsx("p",{className:"text-red-500 text-xs mt-1",children:p.customer_email}),s==="ground"?l.jsxs(l.Fragment,{children:[l.jsx("input",{name:"event_type",value:c.event_type,onChange:G,type:"text",placeholder:"Sport / Event Type",className:`p-2 border rounded bg-white dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-brand-orange focus:border-transparent transition ${p.event_type?"border-red-500":""}`,required:!0}),p.event_type&&l.jsx("p",{className:"text-red-500 text-xs mt-1",children:p.event_type})]}):l.jsxs("div",{children:[l.jsx("p",{className:"mb-1.5 text-sm font-medium text-gray-600 dark:text-gray-400",children:"Select Nets"}),p.net_selection&&l.jsx("p",{className:"text-red-500 text-xs mb-2",children:p.net_selection}),l.jsxs("div",{className:`grid grid-cols-2 gap-2 ${c.net_number.length===0?"ring-2 ring-red-300 dark:ring-red-600 rounded-lg p-2":""}`,children:[l.jsx("button",{type:"button",onClick:()=>te("1"),className:`p-2.5 rounded text-center transition-all text-sm ${c.net_number.includes("1")?"bg-brand-blue text-white ring-2 ring-brand-orange":"bg-gray-100 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Concrete Net 1"}),l.jsx("button",{type:"button",onClick:()=>te("2"),className:`p-2.5 rounded text-center transition-all text-sm ${c.net_number.includes("2")?"bg-brand-blue text-white ring-2 ring-brand-orange":"bg-gray-100 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Concrete Net 2"}),l.jsx("button",{type:"button",onClick:()=>te("3"),className:`p-2.5 rounded text-center transition-all text-sm ${c.net_number.includes("3")?"bg-brand-blue text-white ring-2 ring-brand-orange":"bg-gray-100 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Astro Net 1"}),l.jsx("button",{type:"button",onClick:()=>te("4"),className:`p-2.5 rounded text-center transition-all text-sm ${c.net_number.includes("4")?"bg-brand-blue text-white ring-2 ring-brand-orange":"bg-gray-100 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Astro Net 2"})]})]}),l.jsxs("select",{name:"payment_status",value:c.payment_status,onChange:G,className:"p-2 border rounded bg-white dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-brand-orange focus:border-transparent transition",children:[l.jsx("option",{value:Ve.UNPAID,children:"Pay Later"}),l.jsx("option",{value:Ve.PAID,children:"Pay Now"})]}),l.jsx("input",{name:"payment_amount",value:c.payment_amount||"",onChange:G,type:"number",step:"0.01",min:"0",placeholder:"Expected Amount",className:"p-2 border rounded bg-white dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-brand-orange focus:border-transparent transition"})]}),l.jsxs("div",{className:"pt-4",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Notes / Special Requests"}),l.jsxs("span",{className:`text-xs ${m>100?"text-red-500":"text-gray-500 dark:text-gray-400"}`,children:[m,"/100"]})]}),l.jsx("textarea",{name:"notes",value:c.notes,onChange:G,placeholder:"Any special requests or notes...",maxLength:m>100?void 0:100,className:`p-2 border rounded w-full h-24 bg-white dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-brand-orange focus:border-transparent transition ${m>100?"border-red-500":""}`}),m>100&&l.jsx("p",{className:"text-red-500 text-xs mt-1",children:"Letter limit exceeded. Please keep notes under 100 letters."})]}),l.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-3",children:l.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-300",children:[l.jsx("strong",{children:"Note:"})," This is a booking request that will be reviewed by our management team. You'll receive a notification once your request is approved or declined."]})}),l.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-end items-center gap-3 pt-4 border-t dark:border-gray-700",children:[l.jsx("button",{type:"button",onClick:t,className:"w-full sm:w-auto bg-gray-200 text-gray-800 dark:bg-gray-600 dark:text-gray-200 px-4 py-2 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:f||Object.keys(p).length>0,className:"w-full sm:w-auto bg-brand-orange text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition-colors flex items-center justify-center space-x-2 disabled:opacity-50",children:f?l.jsxs(l.Fragment,{children:[l.jsx(_l,{size:16,className:"animate-spin"}),l.jsx("span",{children:"Submitting..."})]}):l.jsxs(l.Fragment,{children:[l.jsx(gd,{size:16}),l.jsx("span",{children:o?"Update":"Submit Request"})]})})]})]})]})})},Ix=({isOpen:e,onClose:t,date:a,system:s,onSubmitRequest:n,user:r,bookings:i,onBookingUpdate:o})=>{const[c,g]=S.useState({customer_name:r?.name||"",customer_contact:"",customer_email:r?.email||"",event_type:"",notes:"",booking_type:ce.SLOT,slots:[],net_number:[],payment_amount:void 0}),[f,h]=S.useState(!1),[m,d]=S.useState(0),[p,D]=S.useState(null),[T,b]=S.useState(!1),[u,y]=S.useState({}),[k,M]=S.useState(""),L=S.useMemo(()=>s==="ground"&&a?Dr(a):s==="ground"?Er:Cr,[s,a]),z=S.useMemo(()=>{if(!a||!i)return[];const E=j(a);return i.filter(_=>_.date===E)},[a,i]),G=E=>z.some(_=>_.booking_type===ce.SLOT&&_.status===I.CONFIRMED&&_.slots?.includes(E)),V=S.useMemo(()=>z.some(E=>E.booking_type===ce.SLOT&&E.status===I.CONFIRMED),[z]),$=S.useMemo(()=>z.some(E=>E.booking_type===ce.FULL_DAY),[z]),te=E=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(E),X=E=>E.trim().split(/\s+/).filter(w=>w.length>0).length>5?"Name should not exceed 5 words":null,Q=E=>{const _=E.replace(/\D/g,"");return E.trim()===""?"Contact number is required":_.length===0?"Contact number must contain only numbers":_.length<10?"Contact number must be at least 10 digits":_.length>10?"Contact number should not exceed 10 digits":null},Y=E=>E.trim().split(/\s+/).filter(w=>w.length>0).length>1?"Event type should be one word only":null,W=()=>{const E={};if(c.customer_name){const w=X(c.customer_name);w&&(E.customer_name=w)}if(c.customer_contact){const w=Q(c.customer_contact);w&&(E.customer_contact=w)}if(c.customer_email){const w=te(c.customer_email)?null:"Please enter a valid email address";w&&(E.customer_email=w)}if(c.event_type){const w=Y(c.event_type);w&&(E.event_type=w)}c.booking_type===ce.SLOT&&c.slots.length===0&&(E.booking_timing="Please select at least one time slot"),s==="net"&&c.net_number.length===0&&(E.net_selection="Please select at least one net"),y(E);const _=Object.keys(E).length>0;return M(_?"Please fix the errors above before submitting.":""),!_};if(S.useEffect(()=>{e&&a&&(console.log(" CustomerBookingRequestModal: Setting up form with user data:",{userName:r?.name,userEmail:r?.email,date:a.toISOString(),system:s}),b(!1),D(null),M(""),g(E=>({...E,customer_name:r?.name||"",customer_email:r?.email||"",booking_type:ce.SLOT,slots:[],net_number:[]})))},[e,a,s,r]),!e||!a)return null;if(T&&p)return l.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-2 animate-fadeIn",children:l.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full max-w-xs mx-2",children:l.jsxs("div",{className:"p-3 text-center",children:[l.jsx("div",{className:"w-8 h-8 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center mx-auto mb-2 animate-pulse",children:l.jsx("svg",{className:"w-4 h-4 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),l.jsx("h2",{className:"text-sm font-bold text-green-800 dark:text-green-300 mb-2",children:"Submitted Successfully!"}),l.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-2 mb-2",children:[l.jsx("p",{className:"text-green-800 dark:text-green-300 text-xs font-semibold mb-1",children:"Booking request submitted successfully!"}),l.jsx("p",{className:"text-green-700 dark:text-green-400 text-xs",children:"Our team will review and respond soon."})]}),l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-2 mb-2",children:[l.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-1.5 mb-1 border border-blue-200 dark:border-blue-700",children:l.jsx("p",{className:"font-mono text-xs text-blue-600 dark:text-blue-400 font-bold tracking-wider",children:p})}),l.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:" Save this tracking number"})]}),l.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-2 mb-2",children:l.jsxs("div",{className:"text-xs text-amber-700 dark:text-amber-400 space-y-0.5",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"w-1 h-1 bg-amber-500 rounded-full mr-1 flex-shrink-0"}),"Review within 24 hours"]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"w-1 h-1 bg-amber-500 rounded-full mr-1 flex-shrink-0"}),"Notification on approval/rejection"]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"w-1 h-1 bg-amber-500 rounded-full mr-1 flex-shrink-0"}),'Track in "Track Bookings"']})]})}),l.jsx("button",{onClick:()=>{b(!1),D(null),t()},className:"w-full bg-green-600 hover:bg-green-700 text-white px-3 py-1.5 rounded-lg font-semibold text-sm transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl",children:" Done"})]})})});const U=E=>{const{name:_,value:w}=E.target;if(_==="notes"){const C=w.length;d(C)}let v=null;_==="customer_name"&&w?v=X(w):_==="customer_contact"&&w?v=Q(w):_==="customer_email"&&w?v=te(w)?null:"Please enter a valid email address":_==="event_type"&&w&&(v=Y(w)),y(C=>({...C,[_]:v})),g(C=>({...C,[_]:_==="payment_amount"?w&&parseFloat(w)||void 0:w}))},K=E=>{g(_=>{const w=_.slots.includes(E)?_.slots.filter(v=>v!==E):[..._.slots,E];return{..._,slots:w,booking_type:ce.SLOT}})},N=()=>{g(E=>({...E,slots:[],booking_type:ce.FULL_DAY}))},A=E=>{g(_=>{const w=_.net_number.includes(E)?_.net_number.filter(v=>v!==E):[..._.net_number,E];return{..._,net_number:w}})},x=async E=>{if(E.preventDefault(),!!W()){if(!navigator.onLine){M("No internet connection. Please check your network and try again.");return}h(!0),M("");try{const w={...{...c,customer_name:c.customer_name.trim().replace(/\s+/g," "),customer_email:c.customer_email.trim().toLowerCase(),customer_contact:c.customer_contact.trim()},date:a.toISOString().split("T")[0],system:s,status:"pending",submitted_at:new Date().toISOString(),payment_status:Ve.UNPAID,payment_amount:c.payment_amount||0};console.log(` Submitting booking request for ${w.customer_name} (${w.customer_email})`),console.log(" Request data:",w);const v=await n(w),C=v&&v[0]?v[0].request_number:null;if(!C)throw new Error("Request submitted but no tracking number was generated");if(console.log(` Request submitted successfully. Tracking number: ${C}`),D(C),b(!0),o)try{await o()}catch(R){console.error(" Error refreshing data after booking request:",R)}}catch(_){console.error("Failed to submit booking request:",_);let w="Failed to submit booking request. Please try again.";_ instanceof Error&&(_.message.includes("duplicate")?w="A similar request already exists. Please check your existing requests.":_.message.includes("constraint")?w="Invalid request data. Please check all fields and try again.":_.message.includes("network")||_.message.includes("fetch")?w="Network error. Please check your connection and try again.":_.message.includes("required")?w="Please fill in all required fields correctly.":_.message.includes("Access denied")?w="Access denied. Please log in again.":_.message.includes("already in progress")&&(w="Request submission already in progress. Please wait.")),M(w)}finally{h(!1)}}},j=E=>{const _=E.getFullYear(),w=(E.getMonth()+1).toString().padStart(2,"0"),v=E.getDate().toString().padStart(2,"0");return`${_}-${w}-${v}`};return l.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-1 sm:p-2 animate-fadeIn",children:l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full max-w-[95vw] sm:max-w-md md:max-w-2xl max-h-[90vh] flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-center p-3 border-b dark:border-gray-700",children:[l.jsxs("h2",{className:"text-base sm:text-lg font-bold text-brand-dark dark:text-white pr-2",children:["Request Booking - ",a.toLocaleDateString("en-GB",{weekday:"short",month:"short",day:"numeric"})]}),l.jsx("button",{onClick:t,className:"p-2 rounded-full text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 flex-shrink-0 touch-manipulation",children:l.jsx(pt,{size:20})})]}),l.jsxs("form",{onSubmit:x,className:"p-2 sm:p-3 md:p-4 space-y-2 sm:space-y-3 overflow-y-auto",children:[k&&l.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:l.jsx("p",{className:"text-red-700 dark:text-red-300 text-sm",children:k})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold mb-2 text-gray-800 dark:text-gray-200",children:"Booking Type"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s==="ground"&&l.jsxs("button",{type:"button",onClick:N,disabled:V,className:`p-2.5 rounded text-center transition-all text-sm ${c.booking_type===ce.FULL_DAY?"bg-brand-blue text-white ring-2 ring-brand-orange":"bg-gray-100 dark:bg-gray-700 dark:text-gray-300"} ${V?"opacity-50 cursor-not-allowed":"hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:["Full Day Booking",V&&l.jsx("span",{className:"block text-xs",children:"Unavailable"})]}),l.jsxs("div",{className:`col-span-full ${s==="ground"?"":"md:col-span-2"}`,children:[l.jsx("p",{className:"mb-1.5 text-sm font-medium text-gray-600 dark:text-gray-400",children:"Available Slots"}),u.booking_timing&&l.jsx("p",{className:"text-red-500 text-xs mb-2",children:u.booking_timing}),l.jsxs("div",{className:`grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 sm:gap-1.5 ${c.slots.length===0?"ring-2 ring-red-300 dark:ring-red-600 rounded-lg p-2":""}`,children:[L.map(E=>{const _=G(E);return l.jsxs("button",{type:"button",onClick:()=>K(E),disabled:_||$,className:`p-2 sm:p-1.5 rounded text-xs sm:text-sm transition-all flex flex-col items-center justify-center min-h-[44px] touch-manipulation ${c.slots.includes(E)?"bg-brand-blue text-white ring-2 ring-brand-orange":"bg-gray-100 dark:bg-gray-700 dark:text-gray-300"} ${_||$?"opacity-50 cursor-not-allowed":"hover:bg-gray-200 dark:hover:bg-gray-600 active:scale-95"}`,children:[l.jsx("span",{className:"font-medium",children:E}),_&&l.jsx("span",{className:"block text-xs leading-tight mt-0.5",children:"(Booked)"})]},E)}),c.slots.length===0&&l.jsx("div",{className:"col-span-full text-center py-2",children:l.jsx("p",{className:"text-xs text-red-500 dark:text-red-400",children:" Please select at least one time slot"})})]})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3 pt-2 sm:pt-3 border-t dark:border-gray-700",children:[l.jsxs("div",{children:[l.jsx("input",{name:"customer_name",value:c.customer_name,onChange:U,type:"text",placeholder:"Your Name",className:"p-2 sm:p-1.5 border rounded bg-gray-100 dark:bg-gray-600 dark:border-gray-500 text-gray-600 dark:text-gray-400 cursor-not-allowed w-full text-sm",readOnly:!0,required:!0}),u.customer_name&&l.jsx("p",{className:"text-red-500 text-xs mt-1",children:u.customer_name})]}),l.jsxs("div",{children:[l.jsx("input",{name:"customer_contact",value:c.customer_contact,onChange:U,type:"tel",inputMode:"numeric",pattern:"[0-9]*",maxLength:10,placeholder:"Contact Number",className:`p-2 sm:p-1.5 border rounded bg-white dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-brand-orange focus:border-transparent transition w-full text-sm touch-manipulation ${u.customer_contact?"border-red-500":""}`,required:!0}),u.customer_contact&&l.jsx("p",{className:"text-red-500 text-xs mt-1",children:u.customer_contact})]}),l.jsxs("div",{children:[l.jsx("input",{name:"customer_email",value:c.customer_email,onChange:U,type:"email",placeholder:"Email Address",className:"p-2 sm:p-1.5 border rounded bg-gray-100 dark:bg-gray-600 dark:border-gray-500 text-gray-600 dark:text-gray-400 cursor-not-allowed w-full text-sm",readOnly:!0}),u.customer_email&&l.jsx("p",{className:"text-red-500 text-xs mt-1",children:u.customer_email})]}),s==="ground"?l.jsxs("div",{children:[l.jsx("input",{name:"event_type",value:c.event_type,onChange:U,type:"text",placeholder:"Sport / Event Type",className:`p-2 sm:p-1.5 border rounded bg-white dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-brand-orange focus:border-transparent transition w-full text-sm touch-manipulation ${u.event_type?"border-red-500":""}`,required:!0}),u.event_type&&l.jsx("p",{className:"text-red-500 text-xs mt-1",children:u.event_type})]}):l.jsxs("div",{children:[l.jsx("p",{className:"mb-1.5 text-sm font-medium text-gray-600 dark:text-gray-400",children:"Select Nets"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsx("button",{type:"button",onClick:()=>A("1"),className:`p-2.5 rounded text-center transition-all text-sm ${c.net_number.includes("1")?"bg-brand-blue text-white ring-2 ring-brand-orange":"bg-gray-100 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Concrete Net 1"}),l.jsx("button",{type:"button",onClick:()=>A("2"),className:`p-2.5 rounded text-center transition-all text-sm ${c.net_number.includes("2")?"bg-brand-blue text-white ring-2 ring-brand-orange":"bg-gray-100 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Concrete Net 2"}),l.jsx("button",{type:"button",onClick:()=>A("3"),className:`p-2.5 rounded text-center transition-all text-sm ${c.net_number.includes("3")?"bg-brand-blue text-white ring-2 ring-brand-orange":"bg-gray-100 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Astro Net 1"}),l.jsx("button",{type:"button",onClick:()=>A("4"),className:`p-2.5 rounded text-center transition-all text-sm ${c.net_number.includes("4")?"bg-brand-blue text-white ring-2 ring-brand-orange":"bg-gray-100 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Astro Net 2"})]}),u.net_selection&&l.jsx("p",{className:"text-red-500 text-xs mt-1",children:u.net_selection})]}),l.jsx("input",{name:"payment_amount",value:c.payment_amount||"",onChange:U,type:"number",step:"0.01",min:"0",placeholder:"Expected Amount",className:"p-2 sm:p-1.5 border rounded bg-white dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-brand-orange focus:border-transparent transition w-full text-sm touch-manipulation"})]}),l.jsxs("div",{className:"pt-2 sm:pt-3",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1 sm:mb-1.5",children:[l.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Notes"}),l.jsxs("span",{className:`text-xs ${m>100?"text-red-500":"text-gray-500 dark:text-gray-400"}`,children:[m,"/100"]})]}),l.jsx("textarea",{name:"notes",value:c.notes,onChange:U,placeholder:"Notes...",maxLength:m>100?void 0:100,className:`p-1.5 sm:p-2 border rounded w-full h-16 sm:h-20 bg-white dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-brand-orange focus:border-transparent transition text-sm ${m>100?"border-red-500":""}`}),m>100&&l.jsx("p",{className:"text-red-500 text-xs mt-1",children:"Letter limit exceeded"})]}),l.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-2.5",children:l.jsxs("p",{className:"text-xs text-blue-800 dark:text-blue-300",children:[l.jsx("strong",{children:"Note:"})," This is a booking request that will be reviewed by our management team. You'll receive a notification once your request is approved or declined."]})}),l.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-end items-center gap-2 sm:gap-3 pt-2 sm:pt-3 border-t dark:border-gray-700",children:[l.jsx("button",{type:"button",onClick:t,className:"w-full sm:w-auto bg-gray-200 text-gray-800 dark:bg-gray-600 dark:text-gray-200 px-3 py-2 sm:px-3 sm:py-1.5 rounded-lg text-sm hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors touch-manipulation min-h-[44px] sm:min-h-[36px]",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:f||Object.keys(u).length>0,className:"w-full sm:w-auto bg-brand-orange text-white px-3 py-2 sm:px-3 sm:py-1.5 rounded-lg text-sm hover:bg-orange-600 transition-colors flex items-center justify-center space-x-2 disabled:opacity-50 touch-manipulation min-h-[44px] sm:min-h-[36px]",children:f?l.jsxs(l.Fragment,{children:[l.jsx(_l,{size:14,className:"animate-spin flex-shrink-0"}),l.jsx("span",{children:"Submitting..."})]}):l.jsxs(l.Fragment,{children:[l.jsx(gd,{size:14,className:"flex-shrink-0"}),l.jsx("span",{children:"Submit Request"})]})})]})]})]})})},Wx=e=>{const[t,a]=S.useState(null),[s,n]=S.useState(!1),[r,i]=S.useState(null),o=S.useCallback((d,p)=>{if(p&&d){const D=d+"-"+p,T=new TextEncoder().encode(D);let b=0;for(let u=0;u<T.length;u++)b=(b<<5)-b+T[u],b=b&b;return btoa(String.fromCharCode(...T)).replace(/[^a-zA-Z0-9]/g,"").substring(0,16)}return`session-${Date.now()}`},[]),c=S.useCallback(async()=>{if(!e)return null;try{const d=o(e.name,e.email),p=new Date().toISOString(),D={id:d,name:e.name,email:e.email||null,created_at:p,last_active:p};try{const{data:T,error:b}=await re.from("customer_sessions").select("*").eq("id",d).single();if(!b&&T)return await re.from("customer_sessions").update({last_active:p}).eq("id",d),{...T,last_active:p};{const{error:u}=await re.from("customer_sessions").insert([D]);return u&&console.log("Using virtual session (database table may not exist yet):",u.message),D}}catch(T){return console.log("Database session failed, using virtual session:",T),D}}catch(d){return console.error("Error creating customer session:",d),{id:o(e.name,e.email),name:e.name,email:e.email||null,created_at:new Date().toISOString(),last_active:new Date().toISOString()}}},[e,o]),g=S.useCallback(async()=>{if(!e){a(null);return}n(!0),i(null);try{const d=await c();if(!d)throw new Error("Could not create customer session");console.log(" Loading tracking data for session:",d.id);let p=[],D=[];try{const{data:b,error:u}=await re.from("booking_requests").select("*").eq("customer_session_id",d.id).order("created_at",{ascending:!1});if(!u&&b)p=b,console.log(" Loaded requests using session ID:",p.length);else throw console.log(" Session ID method failed, trying fallback method"),new Error("Session method failed");const{data:y,error:k}=await re.from("bookings").select("*").eq("customer_session_id",d.id).order("created_at",{ascending:!1});if(!k&&y)D=y,console.log(" Loaded bookings using session ID:",D.length);else throw console.log(" Session ID method failed for bookings, trying fallback method"),new Error("Session method failed")}catch(b){console.log(" Falling back to name/email matching:",b);const u=[];e.email&&u.push(`customer_email.ilike.%${e.email.toLowerCase().trim()}%`),e.name&&u.push(`customer_name.ilike.%${e.name.toLowerCase().trim()}%`);const y=[];if(e.email&&y.push(`customer_email.ilike.%${e.email.toLowerCase().trim()}%`),e.name&&y.push(`customer_name.ilike.%${e.name.toLowerCase().trim()}%`),u.length>0){const{data:k,error:M}=await re.from("booking_requests").select("*").or(u.join(",")).order("created_at",{ascending:!1});M||(p=k||[],console.log(" Loaded requests using fallback method:",p.length))}if(y.length>0){const{data:k,error:M}=await re.from("bookings").select("*").or(y.join(",")).order("created_at",{ascending:!1});M||(D=k||[],console.log(" Loaded bookings using fallback method:",D.length))}}const T={requests:p,bookings:D,session:d,lastSync:new Date().toISOString()};console.log(" Final tracking data:",{requests:p.length,bookings:D.length,session:d.id}),a(T)}catch(d){console.error(" Error loading tracking data:",d);const p=d instanceof Error?d.message:"Failed to load tracking data";p.includes("customer session")?(console.log(" Session creation failed, but continuing with fallback method"),i(null)):i(p)}finally{n(!1)}},[e,c]);S.useEffect(()=>{if(!e||!t)return;console.log(" Setting up real-time subscriptions for session:",t.session.id);const d=e.email||e.name,p=`customer-requests-${d}`,D=`customer-bookings-${d}`;console.log(" Creating real-time subscriptions:",{requestsChannel:p,bookingsChannel:D,user:{name:e.name,email:e.email}});const T=re.channel(p).on("postgres_changes",{event:"*",schema:"public",table:"booking_requests"},u=>{console.log(" Real-time request update received:",{eventType:u.eventType,record:u.new||u.old,user:{name:e.name,email:e.email}});const y=u.new||u.old;if(y&&typeof y=="object"){const k=$=>$.toLowerCase().trim(),M=e.email?k(e.email):"",L=e.name?k(e.name):"",z=y.customer_email||"",G=y.customer_name||"";M&&z&&k(z).includes(M)||L&&G&&k(G).includes(L)?(console.log(" Real-time update is for current user, reloading data"),g()):console.log(" Real-time update is for different user, ignoring")}}).subscribe(u=>{console.log(" Requests subscription status:",u)}),b=re.channel(D).on("postgres_changes",{event:"*",schema:"public",table:"bookings"},u=>{console.log(" Real-time booking update received:",{eventType:u.eventType,record:u.new||u.old,user:{name:e.name,email:e.email}});const y=u.new||u.old;if(y&&typeof y=="object"){const k=$=>$.toLowerCase().trim(),M=e.email?k(e.email):"",L=e.name?k(e.name):"",z=y.customer_email||"",G=y.customer_name||"";M&&z&&k(z).includes(M)||L&&G&&k(G).includes(L)?(console.log(" Real-time booking update is for current user, reloading data"),g()):console.log(" Real-time booking update is for different user, ignoring")}}).subscribe(u=>{console.log(" Bookings subscription status:",u)});return()=>{console.log(" Cleaning up real-time subscriptions"),re.removeChannel(T),re.removeChannel(b)}},[e,t,g]),S.useEffect(()=>{g()},[g]);const f=S.useCallback(()=>{if(!t)return[];const d=t.requests.map(D=>({...D,isRequest:!0})),p=t.bookings.map(D=>({...D,isRequest:!1}));return[...d,...p].sort((D,T)=>{const b=new Date(D.date).getTime();return new Date(T.date).getTime()-b})},[t]),h=S.useCallback(d=>{const p=f();return d?p.filter(D=>D.request_number?.toLowerCase().includes(d.toLowerCase())||D.event_type?.toLowerCase().includes(d.toLowerCase())||D.customer_name?.toLowerCase().includes(d.toLowerCase())||D.date.includes(d)):p},[f]),m=S.useCallback(()=>{const d=f();return{total:d.length,pending:d.filter(p=>p.status==="pending").length,approved:d.filter(p=>p.status==="approved").length,confirmed:d.filter(p=>p.status==="confirmed").length,rejected:d.filter(p=>p.status==="rejected").length,requests:t?.requests.length||0,bookings:t?.bookings.length||0}},[f,t]);return{trackingData:t,isLoading:s,error:r,loadTrackingData:g,getAllItems:f,getFilteredItems:h,getStats:m,session:t?.session||null}},Px=e=>{const[t,a,s]=e.split("-").map(Number);return new Date(t,a-1,s)},eb=({booking:e})=>{const t=e.payment_status===Ve.PAID;e.status,I.PENDING;const a=e.isRequest,n=(()=>{if(a)switch(e.status){case I.PENDING:return{status:"Under Review",description:"Your booking request is being reviewed by our team",color:"yellow",icon:""};case I.APPROVED:return{status:"Approved",description:"Your booking request has been approved! Please complete payment to confirm.",color:"blue",icon:""};case I.REJECTED:return{status:"Not Approved",description:"Unfortunately, your booking request could not be accommodated at this time.",color:"red",icon:""};case I.CONFIRMED:return{status:"Confirmed",description:"Your booking is confirmed and active! This slot is now reserved for you.",color:"green",icon:""};default:return{status:"Unknown",description:"Status update pending",color:"gray",icon:""}}else switch(e.status){case I.CONFIRMED:return{status:"Confirmed Booking",description:"Your booking is confirmed and the slot is reserved for you",color:"green",icon:""};case I.APPROVED:return{status:"Payment Pending",description:"Your booking is approved. Please complete payment to confirm.",color:"blue",icon:""};default:return{status:"Booking Status",description:"Booking status update",color:"gray",icon:""}}})(),r=()=>{switch(e.status){case I.PENDING:return"border-yellow-400 bg-yellow-50 dark:bg-yellow-900/20";case I.APPROVED:return"border-blue-400 bg-blue-50 dark:bg-blue-900/20";case I.CONFIRMED:return"border-green-400 bg-green-50 dark:bg-green-900/20";default:return"border-red-400 bg-red-50 dark:bg-red-900/20"}};return l.jsxs("div",{className:`p-4 rounded-lg shadow-sm border-l-4 ${r()} transition-all duration-200 hover:shadow-md`,children:[l.jsx("div",{className:"flex justify-between items-start mb-3",children:l.jsxs("div",{className:"min-w-0 flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-200 truncate text-base",children:e.event_type||(Array.isArray(e.net_number)?e.net_number.map(i=>`Net ${i}`).join(", "):`Net ${e.net_number}`)}),a&&l.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-700 dark:bg-yellow-900/50 dark:text-yellow-300",children:"REQUEST"})]}),e.request_number&&l.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-2 mb-2",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium",children:"TRACKING TOKEN"}),l.jsxs("p",{className:"text-sm font-mono font-bold text-blue-800 dark:text-blue-300",children:["#",e.request_number]})]}),l.jsx("div",{className:"text-right",children:l.jsxs("div",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold ${n.color==="yellow"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/50 dark:text-yellow-300":n.color==="blue"?"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300":n.color==="green"?"bg-green-100 text-green-700 dark:bg-green-900/50 dark:text-green-300":"bg-gray-100 text-gray-700 dark:bg-gray-900/50 dark:text-gray-300"}`,children:[l.jsx("span",{children:n.icon}),n.status]})})]})})]})}),l.jsx("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-lg p-3 mb-3",children:l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx("span",{className:"text-lg",children:n.icon}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-200 text-sm",children:n.status}),l.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:n.description})]})]})}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(it,{size:14,className:"text-gray-500"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Date"}),l.jsx("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:Px(e.date).toLocaleDateString("en-GB")})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(zg,{size:14,className:"text-gray-500"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Time"}),l.jsx("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:e.booking_type==="full_day"?"Full Day":e.slots?.join(", ")})]})]})]}),l.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Amount:"}),l.jsxs("span",{className:"text-lg font-bold text-gray-800 dark:text-gray-200",children:["",e.payment_amount.toLocaleString()]})]}),l.jsxs("div",{className:"flex items-center justify-between mt-1",children:[l.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Payment Status:"}),l.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${t?"bg-green-100 text-green-700 dark:bg-green-900/50 dark:text-green-300":"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/50 dark:text-yellow-300"}`,children:e.payment_status})]})]}),l.jsx("div",{className:"mt-3 flex items-center justify-center",children:l.jsxs("div",{className:"flex items-center gap-2 text-xs text-green-600 dark:text-green-400",children:[l.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),l.jsx("span",{className:"font-medium",children:"Live Tracking Active"})]})})]})},tb=()=>{const{user:e}=S.useContext(Yt),[t,a]=S.useState(new Date),{trackingData:s,isLoading:n,error:r,loadTrackingData:i,getAllItems:o,getStats:c}=Wx(e),g=o(),f=c();return S.useEffect(()=>{s&&a(new Date)},[s]),e?n?l.jsxs("div",{className:"space-y-4 animate-slideInUp",children:[l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-200",children:" Advanced Booking Tracker"}),l.jsxs("div",{className:"flex items-center gap-1 bg-green-100 dark:bg-green-900/30 px-2 py-1 rounded-full",children:[l.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),l.jsx("span",{className:"text-xs text-green-700 dark:text-green-400 font-semibold",children:"LIVE"})]})]}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Loading your booking requests with real-time tracking..."})]}),l.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx(Tg,{size:14,className:"animate-spin"}),l.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Loading your bookings..."})]})})]}):r&&!r.includes("customer session")?l.jsxs("div",{className:"space-y-4 animate-slideInUp",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-200 mb-2",children:"Advanced Booking Tracker"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Track your booking requests in real-time"})]}),l.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(It,{size:16,className:"text-red-500"}),l.jsx("p",{className:"text-red-700 dark:text-red-300 font-medium",children:"Error Loading Data"})]}),l.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:r}),l.jsx("button",{onClick:i,className:"mt-2 px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700",children:"Try Again"})]})]}):l.jsxs("div",{className:"space-y-4 animate-slideInUp",children:[l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-200",children:"Advanced Booking Tracker"}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),l.jsx("span",{className:"text-xs text-green-600 dark:text-green-400 font-medium",children:"Live"})]})]}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Monitor your booking requests with real-time updates"}),l.jsx("div",{className:"mt-2 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:l.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Customer:"})," ",e.name]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Email:"})," ",e.email]})]})})]}),l.jsxs("div",{className:"flex gap-1 overflow-x-auto",children:[l.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/20 border border-gray-200 dark:border-gray-700 rounded-md px-2 py-1.5 text-center flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm sm:text-base font-bold text-gray-700 dark:text-gray-300 leading-tight",children:f.total}),l.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 leading-tight",children:"Total"})]}),l.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-md px-2 py-1.5 text-center flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm sm:text-base font-bold text-yellow-700 dark:text-yellow-300 leading-tight",children:f.pending}),l.jsx("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 leading-tight",children:"Pending"})]}),l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md px-2 py-1.5 text-center flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm sm:text-base font-bold text-blue-700 dark:text-blue-300 leading-tight",children:f.approved}),l.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 leading-tight",children:"Approved"})]}),l.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-md px-2 py-1.5 text-center flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm sm:text-base font-bold text-green-700 dark:text-green-300 leading-tight",children:f.confirmed}),l.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 leading-tight",children:"Confirmed"})]}),l.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md px-2 py-1.5 text-center flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm sm:text-base font-bold text-red-700 dark:text-red-300 leading-tight",children:f.rejected}),l.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 leading-tight",children:"Rejected"})]})]}),l.jsx("div",{className:"space-y-3",children:g.length>0?g.map(h=>l.jsx(eb,{booking:h},h.id)):l.jsxs("div",{className:"text-center py-8",children:[l.jsx("div",{className:"w-12 h-12 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-3",children:l.jsx(it,{size:18,className:"text-gray-400"})}),l.jsx("h3",{className:"text-base font-semibold text-gray-700 dark:text-gray-300 mb-1",children:"No Bookings Yet"}),l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:"You haven't made any booking requests yet. Use the 'Book Now' tab to submit a request and get your tracking token!"})]})}),l.jsxs("div",{className:"text-center text-xs text-gray-500 dark:text-gray-400",children:["Last updated: ",t.toLocaleTimeString()]})]}):l.jsxs("div",{className:"space-y-6 animate-slideInUp",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-200 mb-2",children:"Advanced Booking Tracker"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Track the status of all your booking requests with real-time updates"})]}),l.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:l.jsx("p",{className:"text-red-700 dark:text-red-300",children:" Please log in to view your bookings."})})]})},Nc=({className:e="",size:t=24})=>l.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e,children:[l.jsx("circle",{cx:"12",cy:"12",r:"11",fill:"#86efac",stroke:"#16a34a",strokeWidth:"1"}),l.jsxs("g",{transform:"translate(12, 12)",children:[l.jsx("rect",{x:"-3",y:"-6",width:"1.5",height:"12",fill:"#f59e0b",stroke:"#d97706",strokeWidth:"0.5"}),l.jsx("rect",{x:"-0.75",y:"-6",width:"1.5",height:"12",fill:"#f59e0b",stroke:"#d97706",strokeWidth:"0.5"}),l.jsx("rect",{x:"1.5",y:"-6",width:"1.5",height:"12",fill:"#f59e0b",stroke:"#d97706",strokeWidth:"0.5"}),l.jsx("rect",{x:"-3.5",y:"-6",width:"7",height:"0.8",fill:"#f59e0b",stroke:"#d97706",strokeWidth:"0.3"})]})]}),kc=({className:e="",size:t=24})=>l.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e,children:[l.jsx("path",{d:"M12 2 L22 12 L12 22 L2 12 Z",fill:"#fbbf24",stroke:"#f59e0b",strokeWidth:"0.5"}),l.jsx("path",{d:"M4 4 L20 20 M6 2 L22 18 M8 0 L24 16 M10 2 L20 12",stroke:"#f59e0b",strokeWidth:"0.3",opacity:"0.6"}),l.jsxs("g",{transform:"translate(12, 8)",children:[l.jsx("rect",{x:"-2",y:"-3",width:"1",height:"6",fill:"#1f2937",stroke:"#111827",strokeWidth:"0.3"}),l.jsx("rect",{x:"-0.5",y:"-3",width:"1",height:"6",fill:"#1f2937",stroke:"#111827",strokeWidth:"0.3"}),l.jsx("rect",{x:"1",y:"-3",width:"1",height:"6",fill:"#1f2937",stroke:"#111827",strokeWidth:"0.3"}),l.jsx("rect",{x:"-2.5",y:"-3",width:"5",height:"0.5",fill:"#1f2937",stroke:"#111827",strokeWidth:"0.2"})]}),l.jsx("rect",{x:"2",y:"20",width:"20",height:"1",fill:"#f59e0b",opacity:"0.8"})]}),ab=({onSelectSystem:e,customerName:t})=>l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4 relative overflow-hidden",children:[l.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[l.jsx("div",{className:"absolute -top-20 -right-20 w-40 h-40 bg-gradient-to-br from-orange-500/15 to-red-600/15 rounded-full blur-2xl animate-pulse"}),l.jsx("div",{className:"absolute -bottom-20 -left-20 w-40 h-40 bg-gradient-to-br from-blue-500/15 to-purple-600/15 rounded-full blur-2xl animate-pulse delay-1000"})]}),l.jsxs("div",{className:"w-full max-w-[95vw] sm:max-w-3xl bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm rounded-2xl shadow-2xl p-3 sm:p-4 md:p-6 space-y-3 sm:space-y-4 md:space-y-6 border border-white/20 animate-slideInUp",children:[l.jsxs("div",{className:"text-center space-y-1 sm:space-y-2",children:[l.jsx("div",{className:"relative",children:l.jsx("img",{src:"logo.png",alt:"Harvard House Sports Logo",className:"h-16 w-16 sm:h-20 sm:w-20 md:h-24 md:w-24 mx-auto"})}),l.jsx("h1",{className:"text-lg sm:text-2xl md:text-3xl font-display font-bold text-gray-800 dark:text-white",children:"Harvard House Sports"}),l.jsxs("div",{className:"space-y-0.5 sm:space-y-1",children:[l.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm sm:text-base font-medium",children:["Welcome back, ",l.jsx("span",{className:"text-orange-600 dark:text-orange-400 font-semibold",children:t}),"!"]}),l.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs sm:text-sm",children:"Customer Portal"})]})]}),l.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[l.jsx("h2",{className:"text-lg sm:text-xl md:text-2xl font-bold text-center text-gray-800 dark:text-white",children:"Choose Booking System"}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 md:gap-6 mt-2 sm:mt-4",children:[l.jsxs("div",{onClick:()=>e("ground"),className:"group relative bg-gradient-to-br from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 rounded-xl p-3 sm:p-4 md:p-5 cursor-pointer transition-all duration-300 transform hover:scale-105 hover:shadow-xl border-2 border-orange-200 dark:border-orange-800 hover:border-orange-300 dark:hover:border-orange-700",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-400/5 to-red-500/5 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),l.jsxs("div",{className:"relative z-10 text-center space-y-2 sm:space-y-3",children:[l.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 md:w-14 md:h-14 bg-gradient-to-br from-orange-500 to-red-500 rounded-xl flex items-center justify-center mx-auto shadow-lg group-hover:shadow-xl transition-all duration-300",children:l.jsx(Nc,{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-7 md:h-7 text-white"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-800 dark:text-white mb-0.5 sm:mb-1",children:"Ground Booking"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-xs sm:text-sm leading-tight",children:"Outdoor facilities for matches, training & events"})]}),l.jsxs("div",{className:"flex items-center justify-center space-x-2 text-orange-600 dark:text-orange-400 group-hover:text-orange-700 dark:group-hover:text-orange-300 transition-colors",children:[l.jsx("span",{className:"font-semibold text-xs sm:text-sm",children:"Select"}),l.jsx(hs,{className:"w-3 h-3 sm:w-4 sm:h-4 group-hover:translate-x-1 transition-transform duration-200 flex-shrink-0"})]})]})]}),l.jsxs("div",{onClick:()=>e("net"),className:"group relative bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-3 sm:p-4 md:p-5 cursor-pointer transition-all duration-300 transform hover:scale-105 hover:shadow-xl border-2 border-blue-200 dark:border-blue-800 hover:border-blue-300 dark:hover:border-blue-700",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-400/5 to-indigo-500/5 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),l.jsxs("div",{className:"relative z-10 text-center space-y-2 sm:space-y-3",children:[l.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 md:w-14 md:h-14 bg-gradient-to-br from-blue-500 to-indigo-500 rounded-xl flex items-center justify-center mx-auto shadow-lg group-hover:shadow-xl transition-all duration-300",children:l.jsx(kc,{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-7 md:h-7 text-white"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-800 dark:text-white mb-0.5 sm:mb-1",children:"Indoor Net Booking"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-xs sm:text-sm leading-tight",children:"Indoor nets for practice & small group activities"})]}),l.jsxs("div",{className:"flex items-center justify-center space-x-2 text-blue-600 dark:text-blue-400 group-hover:text-blue-700 dark:group-hover:text-blue-300 transition-colors",children:[l.jsx("span",{className:"font-semibold text-xs sm:text-sm",children:"Select"}),l.jsx(hs,{className:"w-3 h-3 sm:w-4 sm:h-4 group-hover:translate-x-1 transition-transform duration-200 flex-shrink-0"})]})]})]})]})]}),l.jsx("div",{className:"text-center pt-1 sm:pt-2 border-t border-gray-200 dark:border-gray-700",children:l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Select your preferred booking system"})})]})]}),sb=({deferredPrompt:e,onInstallClick:t,userRole:a,isInstalled:s=!1})=>{const[n,r]=S.useState(!1),[i,o]=S.useState(!1),[c,g]=S.useState("HHS Booking"),[f,h]=S.useState(!1);S.useEffect(()=>{if(g(a==="customer"?"HHS Booking":a==="admin"||a==="management"?"Booking Management":"HHS Booking"),sessionStorage.getItem(`installPromptDismissed-${a||"default"}`)){r(!1);return}const T=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,b=/Mobi|Android|iPad|iPhone|iPod/.test(navigator.userAgent)||window.innerWidth<=768,u="standalone"in window.navigator&&window.navigator.standalone===!0||window.matchMedia("(display-mode: standalone)").matches||window.navigator.displayMode==="standalone";if(s){r(!1);return}e&&!u?(r(!0),o(!1)):b&&!u&&(r(!0),o(T))},[e,a]),S.useEffect(()=>{if(n){const D=setTimeout(()=>h(!0),500);return()=>clearTimeout(D)}},[n]),S.useEffect(()=>{if(!e&&!n&&!s){const D=/Mobi|Android|iPad|iPhone|iPod/.test(navigator.userAgent)||window.innerWidth<=768,T="standalone"in window.navigator&&window.navigator.standalone===!0||window.matchMedia("(display-mode: standalone)").matches;if(D&&!T){const b=setTimeout(()=>{!sessionStorage.getItem(`installPromptDismissed-${a||"default"}`)&&!s&&(r(!0),o(/iPad|iPhone|iPod/.test(navigator.userAgent)))},3e3);return()=>clearTimeout(b)}}},[e,n,a,s]);const m=()=>{sessionStorage.setItem(`installPromptDismissed-${a||"default"}`,"true"),r(!1)},d=()=>{t()};if(!n)return null;const p=a==="customer";return l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[1000] flex items-center justify-center p-2 sm:p-4 animate-fadeIn",children:l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl sm:rounded-3xl shadow-2xl max-w-sm sm:max-w-md w-full mx-auto overflow-hidden animate-bounce-in border border-gray-200 dark:border-gray-700",children:[l.jsxs("div",{className:`relative ${p?"bg-gradient-to-br from-orange-500 to-red-500":"bg-gradient-to-br from-blue-600 to-indigo-600"} p-4 sm:p-6 text-white overflow-hidden`,children:[l.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-16 translate-x-16 animate-float"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white/10 rounded-full translate-y-12 -translate-x-12 animate-float delay-1000"}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent animate-shimmer"}),l.jsxs("div",{className:"relative z-10",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[l.jsxs("div",{className:"relative",children:[l.jsx("img",{src:"logo.png",alt:"App Logo",className:"h-10 w-10 sm:h-12 sm:w-12 rounded-xl shadow-lg"}),l.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 sm:w-5 sm:h-5 bg-green-400 rounded-full border-2 border-white flex items-center justify-center",children:l.jsx(_o,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 text-white"})})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg sm:text-xl font-bold",children:c}),l.jsx("p",{className:"text-white/90 text-xs sm:text-sm",children:"Progressive Web App"})]})]}),l.jsx("button",{onClick:m,className:"text-white/80 hover:text-white transition-colors p-2 hover:bg-white/10 rounded-full","aria-label":"Dismiss install prompt",children:l.jsx(pt,{size:24})})]}),l.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[l.jsx(Rg,{className:"w-5 h-5"}),l.jsx("span",{className:"text-sm font-medium",children:"Install for the best experience"})]})]})]}),l.jsxs("div",{className:"p-4 sm:p-6",children:[l.jsxs("div",{className:"mb-4 sm:mb-6",children:[l.jsx("h4",{className:"text-base sm:text-lg font-bold text-gray-800 dark:text-white mb-2",children:p?" Book Facilities Faster":" Manage Bookings Efficiently"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-xs sm:text-sm leading-relaxed",children:p?"Get instant access to book sports facilities, track your reservations, and receive real-time updates - all from your home screen!":"Streamline your workflow with powerful management tools, real-time analytics, and instant notifications - right at your fingertips!"})]}),l.jsx("div",{className:`space-y-2 sm:space-y-3 mb-4 sm:mb-6 transition-all duration-500 ${f?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:p?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 p-2 sm:p-3 rounded-lg bg-orange-50 dark:bg-orange-900/20 hover:bg-orange-100 dark:hover:bg-orange-900/30 transition-colors duration-200 animate-slide-up-fade delay-200",children:[l.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-orange-400 to-orange-600 rounded-full flex items-center justify-center shadow-lg flex-shrink-0",children:l.jsx(qg,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),l.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 leading-tight",children:"Instant booking confirmations"})]}),l.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 p-2 sm:p-3 rounded-lg bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors duration-200 animate-slide-up-fade delay-300",children:[l.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center shadow-lg flex-shrink-0",children:l.jsx(it,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),l.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 leading-tight",children:"Real-time availability updates"})]}),l.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 p-2 sm:p-3 rounded-lg bg-green-50 dark:bg-green-900/20 hover:bg-green-100 dark:hover:bg-green-900/30 transition-colors duration-200 animate-slide-up-fade delay-400",children:[l.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center shadow-lg flex-shrink-0",children:l.jsx(Og,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),l.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 leading-tight",children:"Offline access & push notifications"})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 p-2 sm:p-3 rounded-lg bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors duration-200 animate-slide-up-fade delay-200",children:[l.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center shadow-lg flex-shrink-0",children:l.jsx(Ug,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),l.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 leading-tight",children:"Advanced analytics & reporting"})]}),l.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 p-2 sm:p-3 rounded-lg bg-indigo-50 dark:bg-indigo-900/20 hover:bg-indigo-100 dark:hover:bg-indigo-900/30 transition-colors duration-200 animate-slide-up-fade delay-300",children:[l.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-indigo-400 to-indigo-600 rounded-full flex items-center justify-center shadow-lg flex-shrink-0",children:l.jsx(hn,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),l.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 leading-tight",children:"Comprehensive customer management"})]}),l.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 p-2 sm:p-3 rounded-lg bg-purple-50 dark:bg-purple-900/20 hover:bg-purple-100 dark:hover:bg-purple-900/30 transition-colors duration-200 animate-slide-up-fade delay-400",children:[l.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-purple-400 to-purple-600 rounded-full flex items-center justify-center shadow-lg flex-shrink-0",children:l.jsx(Si,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),l.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 leading-tight",children:"Enterprise-grade security"})]})]})}),i&&l.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-3 sm:p-4 mb-3 sm:mb-4 animate-slide-up-fade delay-500",children:[l.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-800 rounded-full flex items-center justify-center",children:l.jsx(Rc,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),l.jsx("span",{className:"font-semibold text-blue-800 dark:text-blue-200 text-xs sm:text-sm",children:"iPhone/iPad Installation Guide"})]}),l.jsxs("div",{className:"space-y-1 sm:space-y-2 text-xs sm:text-sm text-blue-700 dark:text-blue-300 leading-relaxed",children:[l.jsxs("div",{className:"flex items-start space-x-2",children:[l.jsx("span",{className:"text-blue-500 dark:text-blue-400 font-bold",children:"1."}),l.jsxs("span",{children:["Tap the share button ",l.jsx(Rc,{size:14,className:"inline-block mx-1"})," in Safari's toolbar (square with arrow pointing up)"]})]}),l.jsxs("div",{className:"flex items-start space-x-2",children:[l.jsx("span",{className:"text-blue-500 dark:text-blue-400 font-bold",children:"2."}),l.jsx("span",{children:'Scroll down and tap "Add to Home Screen"'})]}),l.jsxs("div",{className:"flex items-start space-x-2",children:[l.jsx("span",{className:"text-blue-500 dark:text-blue-400 font-bold",children:"3."}),l.jsx("span",{children:'Tap "Add" in the top-right corner to install'})]}),l.jsx("div",{className:"mt-2 sm:mt-3 p-2 bg-blue-100 dark:bg-blue-800/50 rounded-lg",children:l.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-300",children:[" ",l.jsx("strong",{children:"Tip:"})," Look for the app icon on your home screen after installation!"]})})]})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3",children:[!i&&e&&l.jsxs("button",{onClick:d,className:`flex-1 ${p?"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600":"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700"} text-white py-4 sm:py-3 px-4 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl flex items-center justify-center space-x-2 animate-pulse-glow text-sm sm:text-base min-h-[48px] sm:min-h-[44px]`,children:[l.jsx(ko,{className:"w-5 h-5"}),l.jsx("span",{children:"Install App"})]}),l.jsx("button",{onClick:m,className:"px-4 py-4 sm:py-3 border-2 border-gray-300 dark:border-gray-600 text-gray-600 dark:text-gray-400 rounded-xl font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200 hover:border-gray-400 dark:hover:border-gray-500 text-sm sm:text-base min-h-[48px] sm:min-h-[44px]",children:"Maybe Later"})]})]})]})})},lb=({isOpen:e,onConfirm:t,onCancel:a,canGoBack:s,exitType:n="back-button"})=>e?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fadeIn",children:l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6 w-full max-w-sm mx-auto animate-scaleIn",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Exit App"}),l.jsx("button",{onClick:a,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:l.jsx(pt,{size:20})})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-red-100 dark:bg-red-900/20 rounded-full mx-auto mb-4",children:l.jsx(fd,{className:"w-8 h-8 text-red-600 dark:text-red-400"})}),l.jsx("p",{className:"text-center text-gray-600 dark:text-gray-400",children:n==="exit-button"?s?"You're about to exit the app. Would you like to go back instead?":"Are you sure you want to exit the Harvard House Sports app?":s?"Would you like to go back to the previous screen or exit the app?":"Are you sure you want to exit the app?"})]}),l.jsxs("div",{className:"space-y-3",children:[s&&l.jsxs("button",{onClick:a,className:"w-full flex items-center justify-center space-x-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-4 py-3 rounded-xl hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors font-medium",children:[l.jsx(Bg,{size:18}),l.jsx("span",{children:"Go Back"})]}),l.jsx("button",{onClick:t,className:"w-full bg-red-500 text-white px-4 py-3 rounded-xl hover:bg-red-600 transition-colors font-medium",children:"Exit App"}),l.jsx("button",{onClick:a,className:"w-full text-gray-500 dark:text-gray-400 text-sm hover:text-gray-700 dark:hover:text-gray-300 transition-colors",children:"Cancel"})]}),l.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:l.jsx("p",{className:"text-xs text-center text-gray-500 dark:text-gray-400",children:"You can also close the app using your device's app switcher"})})]})}):null;class Ds{constructor(){this.twilioAccountSid="AC66c624614fd2ac06bfc5fefcf518156e",this.twilioAuthToken="d9a204c38703563876280bdfa0907234",this.twilioPhoneNumber="+12293635565",this.twilioEmailServiceSid=void 0,(!this.twilioAccountSid||!this.twilioAuthToken)&&console.warn(" Twilio credentials not configured. SMS notifications will not work.")}static getInstance(){return Ds.instance||(Ds.instance=new Ds),Ds.instance}async sendSMS(t,a){try{if(!this.twilioAccountSid||!this.twilioAuthToken||!this.twilioPhoneNumber)return console.warn(" Twilio not configured for SMS"),{success:!1,error:"Twilio credentials not configured"};console.log(` Sending SMS to ${t}`);const s=await fetch(`https://api.twilio.com/2010-04-01/Accounts/${this.twilioAccountSid}/Messages.json`,{method:"POST",headers:{Authorization:`Basic ${btoa(`${this.twilioAccountSid}:${this.twilioAuthToken}`)}`,"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({From:this.twilioPhoneNumber,To:t,Body:a})});if(s.ok){const n=await s.json();return console.log(` SMS sent successfully to ${t}`),{success:!0,messageId:n.sid}}else{const n=await s.text();return console.error(` SMS failed to ${t}:`,n),{success:!1,error:n}}}catch(s){return console.error(" Error sending SMS:",s),{success:!1,error:s.message}}}async sendNotification(t){if(!t.recipientPhone)return console.warn(" No phone number provided for SMS notification"),{success:!1,error:"No phone number provided for SMS notification"};const a=this.formatSMSBody(t);return await this.sendSMS(t.recipientPhone,a)}formatSMSBody(t){let a=t.body;switch(t.type){case"booking_request":t.data?.requestNumber&&(a+=` (Req: ${t.data.requestNumber})`);break;case"booking_approval":a+=" Booking approved!",t.data?.requestNumber&&(a+=` Ref: ${t.data.requestNumber}`);break;case"booking_rejection":a+=" Please contact us for details.",t.data?.requestNumber&&(a+=` Ref: ${t.data.requestNumber}`);break;case"new_booking":t.data?.customerName&&(a+=` - ${t.data.customerName}`);break}return a.length>160&&(a=a.substring(0,157)+"..."),a}async sendNotificationToAdmins(t){try{return console.log(" Admin SMS notification requested:",t.title),console.warn(" Admin SMS notifications are disabled. Only customer SMS notifications are supported."),{success:!1,sentCount:0,errors:["Admin SMS notifications are disabled"]}}catch(a){return console.error(" Error sending notifications to admins:",a),{success:!1,sentCount:0,errors:[a.message]}}}async getAdminEmails(){try{const t=["hhskolkata@gmail.com"];return console.log(` Admin email reference: ${t[0]}`),t}catch(t){return console.error(" Error getting admin emails:",t),[]}}async testNotificationService(){const t=[],a=[];console.log(" Testing SMS notification service...");const s=!!(this.twilioAccountSid&&this.twilioAuthToken&&this.twilioPhoneNumber);s||t.push("Twilio credentials not configured for SMS");const r=(await this.getAdminEmails()).length>0;r||a.push("No admin email addresses configured for reference");const i=t.length===0;return console.log(" SMS notification service test completed:",{success:i,errorCount:t.length,warningCount:a.length,diagnostics:{smsConfigured:s,adminEmailsAvailable:r}}),{success:i,errors:t,warnings:a,diagnostics:{smsConfigured:s,adminEmailsAvailable:r}}}}const cg=Ds.getInstance(),vi=Object.freeze(Object.defineProperty({__proto__:null,twilioNotificationService:cg},Symbol.toStringTag,{value:"Module"})),nb=({user:e,isOpen:t,onClose:a})=>{const[s,n]=S.useState(!1),[r,i]=S.useState(null),[o,c]=S.useState(!0),g=async()=>{n(!0),i(null);try{const f=await cg.testNotificationService();i(f)}catch(f){console.error("Failed to run notification test:",f),i({success:!1,errors:[`Test failed: ${f.message}`],warnings:[],diagnostics:{emailConfigured:!1,smsConfigured:!1,adminEmailsAvailable:!1}})}finally{n(!1)}};return t?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center",children:[l.jsx(Lg,{className:"w-5 h-5 mr-2"}),"SMS Notification Settings"]}),l.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:""})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(Hg,{className:"w-5 h-5 text-green-500 mr-3"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"SMS Notifications"}),l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Send notifications via SMS"})]})]}),l.jsx("div",{className:`w-3 h-3 rounded-full ${o?"bg-green-500":"bg-gray-400"}`})]}),l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[l.jsxs("h3",{className:"font-medium text-blue-900 dark:text-blue-100 mb-3 flex items-center",children:[l.jsx(Gg,{className:"w-4 h-4 mr-2"}),"Notification Types"]}),l.jsxs("div",{className:"space-y-2 text-sm text-blue-800 dark:text-blue-200",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{children:"New Booking Requests (Admin)"}),l.jsx("span",{className:"text-xs bg-blue-100 dark:bg-blue-800 px-2 py-1 rounded",children:"SMS Only"})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{children:"Booking Approvals (Customer)"}),l.jsx("span",{className:"text-xs bg-green-100 dark:bg-green-800 px-2 py-1 rounded",children:"SMS Only"})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{children:"Booking Rejections (Customer)"}),l.jsx("span",{className:"text-xs bg-yellow-100 dark:bg-yellow-800 px-2 py-1 rounded",children:"SMS Only"})]})]})]}),l.jsx("div",{className:"space-y-3",children:l.jsx("button",{onClick:g,disabled:s,className:"w-full bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white font-medium py-3 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center",children:s?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Testing..."]}):l.jsxs(l.Fragment,{children:[l.jsx($g,{className:"w-4 h-4 mr-2"}),"Test Notification System"]})})}),r&&l.jsxs("div",{className:`p-4 rounded-lg border ${r.success?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800"}`,children:[l.jsxs("div",{className:"flex items-center mb-3",children:[r.success?l.jsx(_o,{className:"w-5 h-5 text-green-600 dark:text-green-400 mr-2"}):l.jsx(It,{className:"w-5 h-5 text-red-600 dark:text-red-400 mr-2"}),l.jsx("h3",{className:`font-medium ${r.success?"text-green-900 dark:text-green-100":"text-red-900 dark:text-red-100"}`,children:r.success?"Notification Test Passed":"Notification Test Failed"})]}),r.errors.length>0&&l.jsxs("div",{className:"mb-3",children:[l.jsxs("h4",{className:"text-sm font-medium text-red-800 dark:text-red-200 mb-1 flex items-center",children:[l.jsx(It,{className:"w-4 h-4 mr-1"}),"Issues Found:"]}),l.jsx("ul",{className:"text-sm text-red-700 dark:text-red-300 space-y-1",children:r.errors.map((f,h)=>l.jsxs("li",{className:"flex items-start",children:[l.jsx("span",{className:"w-1 h-1 bg-red-500 rounded-full mr-2 mt-2 flex-shrink-0"}),f]},h))})]}),r.warnings.length>0&&l.jsxs("div",{className:"mb-3",children:[l.jsxs("h4",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200 mb-1 flex items-center",children:[l.jsx(Yg,{className:"w-4 h-4 mr-1"}),"Warnings:"]}),l.jsx("ul",{className:"text-sm text-yellow-700 dark:text-yellow-300 space-y-1",children:r.warnings.map((f,h)=>l.jsxs("li",{className:"flex items-start",children:[l.jsx("span",{className:"w-1 h-1 bg-yellow-500 rounded-full mr-2 mt-2 flex-shrink-0"}),f]},h))})]}),l.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600",children:[l.jsx("h4",{className:"text-sm font-medium text-gray-800 dark:text-gray-200 mb-2",children:"System Diagnostics:"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[l.jsxs("div",{className:`p-2 rounded ${r.diagnostics.emailConfigured?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200":"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200"}`,children:[l.jsx("strong",{children:"Email Configured:"})," ",r.diagnostics.emailConfigured?"":""]}),l.jsxs("div",{className:`p-2 rounded ${r.diagnostics.smsConfigured?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200":"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200"}`,children:[l.jsx("strong",{children:"SMS Configured:"})," ",r.diagnostics.smsConfigured?"":""]}),l.jsxs("div",{className:`p-2 rounded ${r.diagnostics.adminEmailsAvailable?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200":"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-200"}`,children:[l.jsx("strong",{children:"Admin Emails:"})," ",r.diagnostics.adminEmailsAvailable?"":""]}),l.jsxs("div",{className:"p-2 rounded bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200",children:[l.jsx("strong",{children:"Platform:"})," Email/SMS"]})]})]})]}),l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[l.jsx("h3",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:"About SMS Notifications"}),l.jsxs("ul",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-1",children:[l.jsx("li",{children:" Admins receive SMS notifications for new booking requests"}),l.jsx("li",{children:" Customers receive SMS notifications for booking approvals"}),l.jsx("li",{children:" Customers receive SMS notifications for booking rejections"}),l.jsx("li",{children:" Notifications are sent instantly when booking status changes"}),l.jsx("li",{children:" Configure Twilio credentials in environment variables"})]})]})]}),l.jsx("div",{className:"flex justify-end mt-6",children:l.jsx("button",{onClick:a,className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:"Close"})})]})}):null},rb=({isOpen:e,onClose:t})=>{const{specialDates:a,addSpecialDate:s,removeSpecialDate:n,user:r}=S.useContext(Yt),[i,o]=S.useState("single"),[c,g]=S.useState(""),[f,h]=S.useState(""),[m,d]=S.useState(""),[p,D]=S.useState(""),[T,b]=S.useState(!1),[u,y]=S.useState(null),[k,M]=S.useState(null),[L,z]=S.useState(null),G=j=>{if(!j)return"Date is required";const E=new Date(j),_=new Date;return _.setHours(0,0,0,0),E<_?"Cannot select past dates":a.some(v=>{if(v.date===j)return!0;if(v.start_date&&v.end_date){const C=new Date(v.start_date),R=new Date(v.end_date);return E>=C&&E<=R}return!1})?"This date is already marked as special":null},V=(j,E)=>{if(!j)return"Start date is required";if(!E)return"End date is required";const _=new Date(j),w=new Date(E),v=new Date;if(v.setHours(0,0,0,0),_<v)return"Cannot select past start dates";if(w<v)return"Cannot select past end dates";if(w<_)return"End date cannot be before start date";const C=Math.abs(w.getTime()-_.getTime());return Math.ceil(C/(1e3*60*60*24))>365?"Date range cannot exceed 365 days":a.some(Z=>{if(Z.start_date&&Z.end_date){const P=new Date(Z.start_date),ne=new Date(Z.end_date);return _<=ne&&w>=P}else if(Z.date){const P=new Date(Z.date);return P>=_&&P<=w}return!1})?"This date range overlaps with an existing special date or range":null},$=(j,E)=>{y({type:j,text:E}),setTimeout(()=>y(null),5e3)},te=async()=>{if(!r)return;let j=null;if(i==="single"){if(!c)return;j=G(c)}else{if(!f||!m)return;j=V(f,m)}if(j){$("error",j);return}b(!0);try{if(i==="single")await s(c,p.trim()||void 0,!1),g(""),D(""),$("success",`Special date added successfully for ${new Date(c).toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long"})}`);else{await s(f,m,!0),h(""),d(""),D("");const E=new Date(f).toLocaleDateString("en-GB",{day:"numeric",month:"long"}),_=new Date(m).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"});$("success",`Special date range added successfully from ${E} to ${_}`)}}catch(E){console.error("Error adding special date:",E);const _=E instanceof Error?E.message:"Failed to add special date. Please try again.";$("error",_)}finally{b(!1)}},X=async j=>{r&&M(j)},Q=async()=>{if(!(!k||!r))try{await n(k),$("success","Special date removed successfully"),M(null)}catch(j){console.error("Error removing special date:",j);const E=j instanceof Error?j.message:"Failed to remove special date. Please try again.";$("error",E)}},Y=()=>{M(null)},W=async()=>{if(!(!L||!r))try{await n(L.start,L.end),$("success","Special date range removed successfully"),z(null)}catch(j){console.error("Error removing special date range:",j);const E=j instanceof Error?j.message:"Failed to remove special date range. Please try again.";$("error",E)}},U=()=>{z(null)},K=j=>{j.key==="Enter"&&!T&&te()},N=()=>i==="single"?!!(c&&!G(c)&&!T):!!(f&&m&&!V(f,m)&&!T),A=j=>new Date(j).toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"}),x=j=>{if(j.start_date&&j.end_date){const E=new Date(j.start_date),_=new Date(j.end_date),w=E.toLocaleDateString("en-GB",{day:"numeric",month:"short"}),v=_.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"});return`${w} - ${v}`}else if(j.date)return A(j.date);return"Invalid Date"};return e?l.jsxs("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-2 animate-fadeIn",children:[l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-lg font-bold text-brand-dark dark:text-white flex items-center gap-2",children:[l.jsx("div",{className:"p-1.5 bg-brand-orange/10 dark:bg-brand-orange/20 rounded-lg",children:l.jsx(it,{size:20,className:"text-brand-orange"})}),"Manage Special Dates"]}),l.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-0.5",children:"Add dates for full availability like weekends"})]}),l.jsx("button",{onClick:t,className:"p-2 rounded-full text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-all transform hover:scale-110 active:scale-95",children:l.jsx(pt,{size:18})})]}),l.jsxs("div",{className:"p-3 flex-grow overflow-y-auto",children:[u&&l.jsxs("div",{className:`mb-4 p-3 rounded-lg flex items-center gap-2 ${u.type==="success"?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":u.type==="error"?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800"}`,children:[u.type==="success"?l.jsx(_o,{size:16,className:"text-green-600 dark:text-green-400"}):u.type==="error"?l.jsx(It,{size:16,className:"text-red-600 dark:text-red-400"}):l.jsx(It,{size:16,className:"text-blue-600 dark:text-blue-400"}),l.jsx("span",{className:`text-sm ${u.type==="success"?"text-green-700 dark:text-green-300":u.type==="error"?"text-red-700 dark:text-red-300":"text-blue-700 dark:text-blue-300"}`,children:u.text})]}),l.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-700/50 dark:to-gray-600/50 rounded-lg p-4 mb-4 border border-gray-200 dark:border-gray-600",children:[l.jsxs("h3",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-3 flex items-center gap-2",children:[l.jsx(ka,{size:16,className:"text-brand-orange"}),"Add Special Date"]}),l.jsx("div",{className:"mb-4",children:l.jsxs("div",{className:"flex bg-gray-200 dark:bg-gray-700 rounded-lg p-1",children:[l.jsx("button",{type:"button",onClick:()=>o("single"),className:`flex-1 py-2 px-3 text-sm rounded-md transition-all ${i==="single"?"bg-white dark:bg-gray-600 text-brand-orange shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"}`,children:"Single Date"}),l.jsx("button",{type:"button",onClick:()=>o("range"),className:`flex-1 py-2 px-3 text-sm rounded-md transition-all ${i==="range"?"bg-white dark:bg-gray-600 text-brand-orange shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"}`,children:"Date Range"})]})}),l.jsxs("div",{className:"space-y-3",children:[i==="single"?l.jsxs("div",{children:[l.jsxs("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Date * ",l.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"(Future dates only)"})]}),l.jsx("input",{type:"date",value:c,onChange:j=>g(j.target.value),onKeyPress:K,className:`w-full p-2 border rounded-lg bg-white dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-brand-orange focus:border-transparent text-sm transition-colors ${c&&G(c)?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-500"}`,min:new Date().toISOString().split("T")[0],required:!0}),c&&G(c)&&l.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center gap-1",children:[l.jsx(It,{size:12}),G(c)]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Start Date *"}),l.jsx("input",{type:"date",value:f,onChange:j=>h(j.target.value),onKeyPress:K,className:`w-full p-2 border rounded-lg bg-white dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-brand-orange focus:border-transparent text-sm transition-colors ${f&&V(f,m)?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-500"}`,min:new Date().toISOString().split("T")[0],required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"End Date *"}),l.jsx("input",{type:"date",value:m,onChange:j=>d(j.target.value),onKeyPress:K,className:`w-full p-2 border rounded-lg bg-white dark:bg-gray-700 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-brand-orange focus:border-transparent text-sm transition-colors ${m&&V(f,m)?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-500"}`,min:f||new Date().toISOString().split("T")[0],required:!0})]})]}),f&&m&&V(f,m)&&l.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center gap-1",children:[l.jsx(It,{size:12}),V(f,m)]}),f&&m&&!V(f,m)&&l.jsxs("p",{className:"text-blue-600 dark:text-blue-400 text-xs mt-1 flex items-center gap-1",children:[l.jsx(it,{size:12}),"Range: ",Math.ceil((new Date(m).getTime()-new Date(f).getTime())/(1e3*60*60*24))," days"]})]}),i==="single"&&l.jsxs("div",{children:[l.jsxs("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Description ",l.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"(Optional)"})]}),l.jsx("input",{type:"text",value:p,onChange:j=>D(j.target.value),onKeyPress:K,placeholder:"e.g., Company event, Holiday, etc.",className:"w-full p-2 border border-gray-300 dark:border-gray-500 rounded-lg bg-white dark:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-brand-orange focus:border-transparent text-sm transition-colors"})]})]}),l.jsx("button",{onClick:te,disabled:!N(),className:"mt-3 w-full bg-brand-orange text-white py-2.5 px-4 rounded-lg text-sm hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 transition-all transform hover:scale-[1.02] active:scale-[0.98]",children:T?l.jsxs(l.Fragment,{children:[l.jsx(_l,{size:14,className:"animate-spin"}),i==="single"?"Adding Special Date...":"Adding Date Range..."]}):l.jsxs(l.Fragment,{children:[l.jsx(ka,{size:14}),i==="single"?"Add Special Date":"Add Date Range"]})}),l.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 text-center",children:[" ",i==="single"?"Special dates":"Date ranges"," will be treated like weekends with all slots available"]})]}),l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border dark:border-gray-700 shadow-sm",children:[l.jsxs("div",{className:"p-4 border-b dark:border-gray-700 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20",children:[l.jsxs("h3",{className:"font-semibold text-gray-800 dark:text-gray-200 flex items-center gap-2",children:[l.jsx(it,{size:16,className:"text-brand-orange"}),"Current Special Dates (",a.length,")"]}),l.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"These dates will be treated like weekends with all slots available for full day bookings"})]}),l.jsx("div",{className:"max-h-96 overflow-y-auto",children:a.length===0?l.jsxs("div",{className:"p-8 text-center",children:[l.jsx(it,{size:32,className:"text-gray-300 dark:text-gray-600 mx-auto mb-3"}),l.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No special dates configured"}),l.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-xs mt-1",children:"Add your first special date above"})]}):l.jsx("div",{className:"divide-y dark:divide-gray-700",children:a.sort((j,E)=>{const _=j.start_date||j.date||"",w=E.start_date||E.date||"";return _.localeCompare(w)}).map(j=>{const E=!!(j.start_date&&j.end_date);return l.jsx("div",{className:"p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors group",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("div",{className:"font-semibold text-gray-800 dark:text-gray-200",children:x(j)}),l.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full font-medium ${E?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300"}`,children:E?"Date Range":"Special Day"})]}),j.description&&l.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1 flex items-center gap-1",children:[l.jsx("span",{className:"text-xs",children:""}),j.description]}),l.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1",children:l.jsxs("span",{children:["Added: ",new Date(j.created_at).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})]})})]}),l.jsx("button",{onClick:()=>{E&&j.start_date&&j.end_date?z({start:j.start_date,end:j.end_date}):j.date&&X(j.date)},className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-all transform hover:scale-110 active:scale-95 opacity-0 group-hover:opacity-100",title:`Remove special ${E?"date range":"date"}`,children:l.jsx(cr,{size:14})})]})},j.id)})})})]})]}),l.jsx("div",{className:"p-4 border-t dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50",children:l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:t,className:"flex-1 bg-gray-200 text-gray-800 dark:bg-gray-600 dark:text-gray-200 py-2.5 px-4 rounded-lg text-sm hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors font-medium",children:"Close"}),a.length>0&&l.jsx("button",{onClick:()=>$("info",`Total special dates: ${a.length}. These dates provide full availability like weekends.`),className:"flex-1 bg-blue-500 text-white py-2.5 px-4 rounded-lg text-sm hover:bg-blue-600 transition-colors font-medium",children:"View Summary"})]})})]}),k&&l.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[60] p-2 animate-fadeIn",children:l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full max-w-sm",children:[l.jsx("div",{className:"p-4 border-b dark:border-gray-700",children:l.jsxs("h3",{className:"font-bold text-gray-800 dark:text-gray-200 flex items-center gap-2",children:[l.jsx(It,{size:18,className:"text-red-500"}),"Confirm Deletion"]})}),l.jsxs("div",{className:"p-4",children:[l.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4",children:["Are you sure you want to remove this special date?",l.jsx("br",{}),l.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:k&&A(k)}),l.jsx("br",{}),"This action cannot be undone."]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:Y,className:"flex-1 bg-gray-200 text-gray-800 dark:bg-gray-600 dark:text-gray-200 py-2 px-3 rounded text-sm hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors",children:"Cancel"}),l.jsx("button",{onClick:Q,className:"flex-1 bg-red-500 text-white py-2 px-3 rounded text-sm hover:bg-red-600 transition-colors",children:"Remove"})]})]})]})}),L&&l.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[60] p-2 animate-fadeIn",children:l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full max-w-sm",children:[l.jsx("div",{className:"p-4 border-b dark:border-gray-700",children:l.jsxs("h3",{className:"font-bold text-gray-800 dark:text-gray-200 flex items-center gap-2",children:[l.jsx(It,{size:18,className:"text-red-500"}),"Confirm Deletion"]})}),l.jsxs("div",{className:"p-4",children:[l.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4",children:["Are you sure you want to remove this special date range?",l.jsx("br",{}),l.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:L&&`${A(L.start)} - ${A(L.end)}`}),l.jsx("br",{}),"This action cannot be undone."]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:U,className:"flex-1 bg-gray-200 text-gray-800 dark:bg-gray-600 dark:text-gray-200 py-2 px-3 rounded text-sm hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors",children:"Cancel"}),l.jsx("button",{onClick:W,className:"flex-1 bg-red-500 text-white py-2 px-3 rounded text-sm hover:bg-red-600 transition-colors",children:"Remove"})]})]})]})})]}):null},ib=e=>{const{onExit:t,onNavigateBack:a,isMobile:s}=e,[n,r]=S.useState({viewHistory:[],canGoBack:!1}),[i,o]=S.useState(!1),[c,g]=S.useState("back-button"),f=S.useCallback(b=>{r(u=>{const y=[...u.viewHistory,b];return{viewHistory:y,canGoBack:y.length>1}})},[]),h=S.useCallback(()=>{r(b=>{if(b.viewHistory.length<=1)return s&&(g("back-button"),o(!0)),b;const u=b.viewHistory.slice(0,-1),y=u[u.length-1];return y&&a(y),{viewHistory:u,canGoBack:u.length>1}})},[a,s]);S.useEffect(()=>{if(!s)return;const b=y=>{y.preventDefault(),h()},u=y=>{if(s&&n.canGoBack)return y.preventDefault(),y.returnValue="",""};return window.addEventListener("popstate",b),window.addEventListener("beforeunload",u),()=>{window.removeEventListener("popstate",b),window.removeEventListener("beforeunload",u)}},[s,h,n.canGoBack]);const m=S.useCallback(b=>{if(typeof window<"u"&&s){const u={view:b,timestamp:Date.now()};window.history.pushState(u,"",`#${b}`)}},[s]);S.useEffect(()=>{typeof window<"u"&&s&&window.history.replaceState({view:"initial",timestamp:Date.now()},"",window.location.pathname)},[s]);const d=S.useCallback(()=>{o(!1),p().then(()=>{t()}).catch(b=>{console.error("Error during cleanup:",b),t()})},[t]),p=S.useCallback(async()=>{try{if(console.log(" Performing cleanup before exit..."),["customerName","customerEmail","customerRememberMe","customerLastLoginTime","customerSelectedSystem","customerLogout"].forEach(u=>{localStorage.removeItem(u)}),sessionStorage.clear(),"serviceWorker"in navigator&&"controller"in navigator.serviceWorker){const u=await navigator.serviceWorker.ready;u&&u.active&&(u.active.postMessage({type:"EXIT_APP",timestamp:Date.now()}),console.log(" Sent exit message to service worker"))}await new Promise(u=>setTimeout(u,100)),console.log(" Cleanup completed")}catch(b){throw console.error(" Error during cleanup:",b),b}},[]),D=S.useCallback(()=>{o(!1)},[]),T=S.useCallback(()=>{s?(g("exit-button"),o(!0)):t()},[s,t]);return{navigationState:n,showExitDialog:i,exitDialogType:c,addToHistory:f,navigateBack:h,updateBrowserHistory:m,confirmExit:d,cancelExit:D,triggerExit:T}},ob=["https://res.cloudinary.com/dknjbns6k/image/upload/v1760439107/DSC03351a_ze4rju.webp","https://res.cloudinary.com/dknjbns6k/image/upload/v1760439107/DSC03474_aeyffx.webp","https://res.cloudinary.com/dknjbns6k/image/upload/v1760439106/DSC03483_m4flry.webp","https://res.cloudinary.com/dknjbns6k/image/upload/v1760439106/DSC03510_zrqebo.webp"],cb=["https://res.cloudinary.com/dknjbns6k/image/upload/v1760439107/IMG-20251014-WA0001_y7ciwk.webp","https://res.cloudinary.com/dknjbns6k/image/upload/v1760439107/IMG-20251014-WA0003_bvvgiw.webp","https://res.cloudinary.com/dknjbns6k/image/upload/v1760439106/IMG-20251014-WA0002_qxmfih.webp","https://res.cloudinary.com/dknjbns6k/image/upload/v1760439107/IMG-20251014-WA0000_ytdmbm.webp"],ub=({system:e,className:t=""})=>{const[a,s]=S.useState(0),[n,r]=S.useState(!0),[i,o]=S.useState(!1),c=e==="ground"?ob:cb;S.useEffect(()=>{let h=0;const m=c.length,d=p=>{const D=new Image;D.onload=()=>{h++,h===m&&(o(!0),r(!1))},D.onerror=()=>{h++,h===m&&(o(!0),r(!1))},D.src=p};c.forEach(d)},[e]),S.useEffect(()=>{if(!i)return;const h=setInterval(()=>{s(m=>(m+1)%c.length)},4e3);return()=>clearInterval(h)},[i,c.length]);const g=()=>{s(h=>(h+1)%c.length)},f=h=>{s(h)};return n?l.jsx("div",{className:`w-full max-w-4xl mx-auto mt-8 ${t}`,children:l.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-lg aspect-video flex items-center justify-center",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500"})})}):l.jsxs("div",{className:`w-full max-w-4xl mx-auto mt-8 ${t}`,children:[l.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden aspect-video",children:[l.jsx("img",{src:c[a],alt:`${e==="ground"?"Ground":"Indoor Net"} facility ${a+1}`,className:"w-full h-full object-cover cursor-pointer transition-opacity duration-500 hover:opacity-95",onClick:g,onError:h=>{console.error("Failed to load image:",c[a]),h.currentTarget.src="/logo.png"}}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 via-transparent to-transparent"}),l.jsxs("div",{className:"absolute top-4 right-4 bg-black/50 text-white px-3 py-1 rounded-full text-sm font-medium",children:[a+1," / ",c.length]}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity duration-300",children:l.jsx("div",{className:"bg-black/50 text-white px-4 py-2 rounded-full text-sm font-medium",children:"Click to navigate manually"})})]}),l.jsx("div",{className:"mt-4 grid grid-cols-4 gap-2",children:c.map((h,m)=>l.jsxs("button",{onClick:()=>f(m),className:`relative rounded-lg overflow-hidden aspect-video transition-all duration-300 ${m===a?"ring-2 ring-orange-500 shadow-lg scale-105":"opacity-70 hover:opacity-100 hover:scale-102"}`,children:[l.jsx("img",{src:h,alt:`Thumbnail ${m+1}`,className:"w-full h-full object-cover",onError:d=>{d.currentTarget.src="/logo.png"}}),m===a&&l.jsx("div",{className:"absolute inset-0 bg-orange-500/20"})]},m))}),l.jsxs("div",{className:"mt-4 text-center",children:[l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 font-medium",children:e==="ground"?" Cricket Ground Facilities":" Indoor Practice Nets"}),l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:"Professional training environment  Premium facilities"})]})]})};/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const ug="180";function Ft(e,t,a){return Math.max(t,Math.min(a,e))}class db{constructor(t=0,a=0,s=0,n=1){this.isQuaternion=!0,this._x=t,this._y=a,this._z=s,this._w=n}static slerpFlat(t,a,s,n,r,i,o){let c=s[n+0],g=s[n+1],f=s[n+2],h=s[n+3];const m=r[i+0],d=r[i+1],p=r[i+2],D=r[i+3];if(o===0){t[a+0]=c,t[a+1]=g,t[a+2]=f,t[a+3]=h;return}if(o===1){t[a+0]=m,t[a+1]=d,t[a+2]=p,t[a+3]=D;return}if(h!==D||c!==m||g!==d||f!==p){let T=1-o;const b=c*m+g*d+f*p+h*D,u=b>=0?1:-1,y=1-b*b;if(y>Number.EPSILON){const M=Math.sqrt(y),L=Math.atan2(M,b*u);T=Math.sin(T*L)/M,o=Math.sin(o*L)/M}const k=o*u;if(c=c*T+m*k,g=g*T+d*k,f=f*T+p*k,h=h*T+D*k,T===1-o){const M=1/Math.sqrt(c*c+g*g+f*f+h*h);c*=M,g*=M,f*=M,h*=M}}t[a]=c,t[a+1]=g,t[a+2]=f,t[a+3]=h}static multiplyQuaternionsFlat(t,a,s,n,r,i){const o=s[n],c=s[n+1],g=s[n+2],f=s[n+3],h=r[i],m=r[i+1],d=r[i+2],p=r[i+3];return t[a]=o*p+f*h+c*d-g*m,t[a+1]=c*p+f*m+g*h-o*d,t[a+2]=g*p+f*d+o*m-c*h,t[a+3]=f*p-o*h-c*m-g*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,a,s,n){return this._x=t,this._y=a,this._z=s,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,a=!0){const s=t._x,n=t._y,r=t._z,i=t._order,o=Math.cos,c=Math.sin,g=o(s/2),f=o(n/2),h=o(r/2),m=c(s/2),d=c(n/2),p=c(r/2);switch(i){case"XYZ":this._x=m*f*h+g*d*p,this._y=g*d*h-m*f*p,this._z=g*f*p+m*d*h,this._w=g*f*h-m*d*p;break;case"YXZ":this._x=m*f*h+g*d*p,this._y=g*d*h-m*f*p,this._z=g*f*p-m*d*h,this._w=g*f*h+m*d*p;break;case"ZXY":this._x=m*f*h-g*d*p,this._y=g*d*h+m*f*p,this._z=g*f*p+m*d*h,this._w=g*f*h-m*d*p;break;case"ZYX":this._x=m*f*h-g*d*p,this._y=g*d*h+m*f*p,this._z=g*f*p-m*d*h,this._w=g*f*h+m*d*p;break;case"YZX":this._x=m*f*h+g*d*p,this._y=g*d*h+m*f*p,this._z=g*f*p-m*d*h,this._w=g*f*h-m*d*p;break;case"XZY":this._x=m*f*h-g*d*p,this._y=g*d*h-m*f*p,this._z=g*f*p+m*d*h,this._w=g*f*h+m*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+i)}return a===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,a){const s=a/2,n=Math.sin(s);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(s),this._onChangeCallback(),this}setFromRotationMatrix(t){const a=t.elements,s=a[0],n=a[4],r=a[8],i=a[1],o=a[5],c=a[9],g=a[2],f=a[6],h=a[10],m=s+o+h;if(m>0){const d=.5/Math.sqrt(m+1);this._w=.25/d,this._x=(f-c)*d,this._y=(r-g)*d,this._z=(i-n)*d}else if(s>o&&s>h){const d=2*Math.sqrt(1+s-o-h);this._w=(f-c)/d,this._x=.25*d,this._y=(n+i)/d,this._z=(r+g)/d}else if(o>h){const d=2*Math.sqrt(1+o-s-h);this._w=(r-g)/d,this._x=(n+i)/d,this._y=.25*d,this._z=(c+f)/d}else{const d=2*Math.sqrt(1+h-s-o);this._w=(i-n)/d,this._x=(r+g)/d,this._y=(c+f)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(t,a){let s=t.dot(a)+1;return s<1e-8?(s=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=s):(this._x=0,this._y=-t.z,this._z=t.y,this._w=s)):(this._x=t.y*a.z-t.z*a.y,this._y=t.z*a.x-t.x*a.z,this._z=t.x*a.y-t.y*a.x,this._w=s),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Ft(this.dot(t),-1,1)))}rotateTowards(t,a){const s=this.angleTo(t);if(s===0)return this;const n=Math.min(1,a/s);return this.slerp(t,n),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,a){const s=t._x,n=t._y,r=t._z,i=t._w,o=a._x,c=a._y,g=a._z,f=a._w;return this._x=s*f+i*o+n*g-r*c,this._y=n*f+i*c+r*o-s*g,this._z=r*f+i*g+s*c-n*o,this._w=i*f-s*o-n*c-r*g,this._onChangeCallback(),this}slerp(t,a){if(a===0)return this;if(a===1)return this.copy(t);const s=this._x,n=this._y,r=this._z,i=this._w;let o=i*t._w+s*t._x+n*t._y+r*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=i,this._x=s,this._y=n,this._z=r,this;const c=1-o*o;if(c<=Number.EPSILON){const d=1-a;return this._w=d*i+a*this._w,this._x=d*s+a*this._x,this._y=d*n+a*this._y,this._z=d*r+a*this._z,this.normalize(),this}const g=Math.sqrt(c),f=Math.atan2(g,o),h=Math.sin((1-a)*f)/g,m=Math.sin(a*f)/g;return this._w=i*h+this._w*m,this._x=s*h+this._x*m,this._y=n*h+this._y*m,this._z=r*h+this._z*m,this._onChangeCallback(),this}slerpQuaternions(t,a,s){return this.copy(t).slerp(a,s)}random(){const t=2*Math.PI*Math.random(),a=2*Math.PI*Math.random(),s=Math.random(),n=Math.sqrt(1-s),r=Math.sqrt(s);return this.set(n*Math.sin(t),n*Math.cos(t),r*Math.sin(a),r*Math.cos(a))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,a=0){return this._x=t[a],this._y=t[a+1],this._z=t[a+2],this._w=t[a+3],this._onChangeCallback(),this}toArray(t=[],a=0){return t[a]=this._x,t[a+1]=this._y,t[a+2]=this._z,t[a+3]=this._w,t}fromBufferAttribute(t,a){return this._x=t.getX(a),this._y=t.getY(a),this._z=t.getZ(a),this._w=t.getW(a),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Mr{constructor(t=0,a=0,s=0){Mr.prototype.isVector3=!0,this.x=t,this.y=a,this.z=s}set(t,a,s){return s===void 0&&(s=this.z),this.x=t,this.y=a,this.z=s,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,a){switch(t){case 0:this.x=a;break;case 1:this.y=a;break;case 2:this.z=a;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,a){return this.x=t.x+a.x,this.y=t.y+a.y,this.z=t.z+a.z,this}addScaledVector(t,a){return this.x+=t.x*a,this.y+=t.y*a,this.z+=t.z*a,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,a){return this.x=t.x-a.x,this.y=t.y-a.y,this.z=t.z-a.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,a){return this.x=t.x*a.x,this.y=t.y*a.y,this.z=t.z*a.z,this}applyEuler(t){return this.applyQuaternion(cd.setFromEuler(t))}applyAxisAngle(t,a){return this.applyQuaternion(cd.setFromAxisAngle(t,a))}applyMatrix3(t){const a=this.x,s=this.y,n=this.z,r=t.elements;return this.x=r[0]*a+r[3]*s+r[6]*n,this.y=r[1]*a+r[4]*s+r[7]*n,this.z=r[2]*a+r[5]*s+r[8]*n,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const a=this.x,s=this.y,n=this.z,r=t.elements,i=1/(r[3]*a+r[7]*s+r[11]*n+r[15]);return this.x=(r[0]*a+r[4]*s+r[8]*n+r[12])*i,this.y=(r[1]*a+r[5]*s+r[9]*n+r[13])*i,this.z=(r[2]*a+r[6]*s+r[10]*n+r[14])*i,this}applyQuaternion(t){const a=this.x,s=this.y,n=this.z,r=t.x,i=t.y,o=t.z,c=t.w,g=2*(i*n-o*s),f=2*(o*a-r*n),h=2*(r*s-i*a);return this.x=a+c*g+i*h-o*f,this.y=s+c*f+o*g-r*h,this.z=n+c*h+r*f-i*g,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const a=this.x,s=this.y,n=this.z,r=t.elements;return this.x=r[0]*a+r[4]*s+r[8]*n,this.y=r[1]*a+r[5]*s+r[9]*n,this.z=r[2]*a+r[6]*s+r[10]*n,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,a){return this.x=Ft(this.x,t.x,a.x),this.y=Ft(this.y,t.y,a.y),this.z=Ft(this.z,t.z,a.z),this}clampScalar(t,a){return this.x=Ft(this.x,t,a),this.y=Ft(this.y,t,a),this.z=Ft(this.z,t,a),this}clampLength(t,a){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Ft(s,t,a))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,a){return this.x+=(t.x-this.x)*a,this.y+=(t.y-this.y)*a,this.z+=(t.z-this.z)*a,this}lerpVectors(t,a,s){return this.x=t.x+(a.x-t.x)*s,this.y=t.y+(a.y-t.y)*s,this.z=t.z+(a.z-t.z)*s,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,a){const s=t.x,n=t.y,r=t.z,i=a.x,o=a.y,c=a.z;return this.x=n*c-r*o,this.y=r*i-s*c,this.z=s*o-n*i,this}projectOnVector(t){const a=t.lengthSq();if(a===0)return this.set(0,0,0);const s=t.dot(this)/a;return this.copy(t).multiplyScalar(s)}projectOnPlane(t){return wi.copy(this).projectOnVector(t),this.sub(wi)}reflect(t){return this.sub(wi.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const a=Math.sqrt(this.lengthSq()*t.lengthSq());if(a===0)return Math.PI/2;const s=this.dot(t)/a;return Math.acos(Ft(s,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const a=this.x-t.x,s=this.y-t.y,n=this.z-t.z;return a*a+s*s+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,a,s){const n=Math.sin(a)*t;return this.x=n*Math.sin(s),this.y=Math.cos(a)*t,this.z=n*Math.cos(s),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,a,s){return this.x=t*Math.sin(a),this.y=s,this.z=t*Math.cos(a),this}setFromMatrixPosition(t){const a=t.elements;return this.x=a[12],this.y=a[13],this.z=a[14],this}setFromMatrixScale(t){const a=this.setFromMatrixColumn(t,0).length(),s=this.setFromMatrixColumn(t,1).length(),n=this.setFromMatrixColumn(t,2).length();return this.x=a,this.y=s,this.z=n,this}setFromMatrixColumn(t,a){return this.fromArray(t.elements,a*4)}setFromMatrix3Column(t,a){return this.fromArray(t.elements,a*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,a=0){return this.x=t[a],this.y=t[a+1],this.z=t[a+2],this}toArray(t=[],a=0){return t[a]=this.x,t[a+1]=this.y,t[a+2]=this.z,t}fromBufferAttribute(t,a){return this.x=t.getX(a),this.y=t.getY(a),this.z=t.getZ(a),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,a=Math.random()*2-1,s=Math.sqrt(1-a*a);return this.x=s*Math.cos(t),this.y=a,this.z=s*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const wi=new Mr,cd=new db;typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ug}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ug);const mb={colors:{primary:"#f26a36"}};class gb{static prefersReducedMotion(){return window.matchMedia("(prefers-reduced-motion: reduce)").matches}static getAdaptiveDuration(t){const a=navigator.connection;if(a){if(a.effectiveType==="slow-2g"||a.effectiveType==="2g")return t*1.5;if(a.effectiveType==="3g")return t*1.2}return navigator.hardwareConcurrency&&navigator.hardwareConcurrency>4?t*.8:t}static getBatteryAwareIntensity(){return"getBattery"in navigator&&navigator.getBattery().then(t=>{if(t.level<.2)return .5}),1}static getMobileOptimizedSettings(){const t=window.innerWidth<=768||"ontouchstart"in window;return{reducedComplexity:t,lowerFPS:t&&this.prefersReducedMotion(),shorterDuration:t,disable3D:t&&navigator.hardwareConcurrency<=2}}}const ud={colors:mb.colors};class fb{static prefersReducedMotion(){return window.matchMedia("(prefers-reduced-motion: reduce)").matches}static getMotionPreference(){return window.matchMedia("(prefers-reduced-motion: reduce)").matches?"reduce":"no-preference"}static onMotionPreferenceChange(t){const a=window.matchMedia("(prefers-reduced-motion: reduce)"),s=n=>{t(n.matches?"reduce":"no-preference")};return a.addEventListener("change",s),()=>{a.removeEventListener("change",s)}}static applyReducedMotionStyles(){if(this.prefersReducedMotion()){const t=document.createElement("style");t.id="reduced-motion-styles",t.textContent=`
        *, *::before, *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
          scroll-behavior: auto !important;
        }
      `,document.head.appendChild(t)}}static removeReducedMotionStyles(){const t=document.getElementById("reduced-motion-styles");t&&t.remove()}static init(){this.applyReducedMotionStyles(),this.onMotionPreferenceChange(t=>{t==="reduce"?this.applyReducedMotionStyles():this.removeReducedMotionStyles()}),this.enhanceFocusIndicators()}static enhanceFocusIndicators(){const t=document.createElement("style");t.textContent=`
      .focus-enhanced:focus {
        outline: 3px solid ${ud.colors.primary} !important;
        outline-offset: 2px !important;
        box-shadow: 0 0 0 5px ${ud.colors.primary}33 !important;
      }

      .focus-enhanced:focus:not(:focus-visible) {
        outline: none !important;
        box-shadow: none !important;
      }
    `,document.head.appendChild(t)}}typeof window<"u"&&fb.init();const hb=({activeSystem:e,onSystemChange:t,className:a=""})=>{const[s,n]=S.useState([]),[r,i]=S.useState(!1);S.useRef(null);const o=S.useRef(null),c=S.useRef(null),g=S.useRef(null);S.useEffect(()=>{gb.getMobileOptimizedSettings().disable3D||f()},[]);const f=()=>{const d=[];for(let p=0;p<20;p++)d.push(new Mr((Math.random()-.5)*10,(Math.random()-.5)*10,(Math.random()-.5)*5));n(d)},h=m=>{m===e||r||(i(!0),setTimeout(()=>{i(!1),t(m)},150),"vibrate"in navigator&&navigator.vibrate(30))};return l.jsxs("div",{className:`relative ${a}`,children:[l.jsx("div",{ref:g,className:"absolute inset-0 pointer-events-none overflow-hidden rounded-3xl",style:{zIndex:1}}),l.jsxs("div",{className:"relative flex justify-center mb-6 sm:mb-8",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-orange-500/5 via-transparent to-blue-500/5 rounded-3xl blur-xl"}),l.jsxs("div",{className:"relative bg-white/80 dark:bg-gray-800/80 backdrop-blur-lg rounded-3xl p-2 shadow-2xl border border-gray-200/50 dark:border-gray-700/50",style:{zIndex:2},children:[l.jsx("div",{className:"absolute top-0 left-0 w-20 h-20 bg-gradient-to-br from-orange-400/20 to-red-500/20 rounded-full blur-2xl"}),l.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-blue-400/20 to-indigo-500/20 rounded-full blur-2xl"}),l.jsxs("div",{className:"relative flex space-x-2 sm:space-x-3",children:[l.jsxs("button",{ref:o,onClick:()=>h("ground"),disabled:r,className:`group relative px-4 sm:px-6 py-3 sm:py-4 rounded-2xl font-bold transition-all duration-500 text-sm sm:text-base touch-manipulation transform ${e==="ground"?"bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-2xl":"bg-white/80 dark:bg-gray-700/80 text-gray-700 dark:text-gray-300 hover:bg-white dark:hover:bg-gray-700 border-2 border-transparent hover:border-gray-200 dark:hover:border-gray-600"}`,style:{boxShadow:e==="ground"?"0 0 30px rgba(245, 158, 11, 0.3)":"none"},children:[e==="ground"&&l.jsx("div",{className:"absolute inset-0 rounded-2xl opacity-50 blur-xl bg-gradient-to-r from-orange-400 to-red-400 tab-glow"}),l.jsxs("span",{className:"relative z-10 flex items-center justify-center space-x-2",children:[l.jsx("div",{className:`p-1.5 rounded-lg transition-all duration-300 flex-shrink-0 flex items-center justify-center ${e==="ground"?"bg-white/20":"bg-gray-100 dark:bg-gray-600 group-hover:bg-orange-100 dark:group-hover:bg-orange-900/30"}`,children:l.jsx(Nc,{className:`w-4 h-4 sm:w-5 sm:h-5 transition-transform duration-300 ${e==="ground"?"scale-110":"group-hover:scale-110"}`})}),l.jsx("span",{className:"font-bold",children:"Ground Booking"}),e==="ground"&&l.jsxs("div",{className:"flex space-x-1 flex-shrink-0",children:[l.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"}),l.jsx("div",{className:"w-1.5 h-1.5 bg-white/70 rounded-full"}),l.jsx("div",{className:"w-1.5 h-1.5 bg-white/50 rounded-full"})]})]}),e==="ground"&&l.jsx("div",{className:"absolute inset-0 rounded-2xl opacity-10 bg-gradient-to-br from-green-400 to-green-600"})]}),l.jsxs("button",{ref:c,onClick:()=>h("net"),disabled:r,className:`group relative px-4 sm:px-6 py-3 sm:py-4 rounded-2xl font-bold transition-all duration-500 text-sm sm:text-base touch-manipulation transform ${e==="net"?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-2xl":"bg-white/80 dark:bg-gray-700/80 text-gray-700 dark:text-gray-300 hover:bg-white dark:hover:bg-gray-700 border-2 border-transparent hover:border-gray-200 dark:hover:border-gray-600"}`,style:{boxShadow:e==="net"?"0 0 30px rgba(59, 130, 246, 0.3)":"none"},children:[e==="net"&&l.jsx("div",{className:"absolute inset-0 rounded-2xl opacity-50 blur-xl bg-gradient-to-r from-blue-500 to-indigo-500 tab-glow"}),l.jsxs("span",{className:"relative z-10 flex items-center justify-center space-x-2",children:[l.jsx("div",{className:`p-1.5 rounded-lg transition-all duration-300 flex-shrink-0 flex items-center justify-center ${e==="net"?"bg-white/20":"bg-gray-100 dark:bg-gray-600 group-hover:bg-blue-100 dark:group-hover:bg-blue-900/30"}`,children:l.jsx(kc,{className:`w-4 h-4 sm:w-5 sm:h-5 transition-transform duration-300 ${e==="net"?"scale-110":"group-hover:scale-110"}`})}),l.jsx("span",{className:"font-bold",children:"Indoor Net Booking"}),e==="net"&&l.jsxs("div",{className:"flex space-x-1 flex-shrink-0",children:[l.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"}),l.jsx("div",{className:"w-1.5 h-1.5 bg-white/70 rounded-full"}),l.jsx("div",{className:"w-1.5 h-1.5 bg-white/50 rounded-full"})]})]}),e==="net"&&l.jsx("div",{className:"absolute inset-0 rounded-2xl opacity-10 bg-gradient-to-br from-purple-400 to-indigo-600"})]})]})]})]})]})};class xb extends S.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,a){}render(){return this.state.hasError?l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-gray-50 to-blue-50 dark:from-gray-900 dark:via-slate-900 dark:to-gray-900 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl p-8 max-w-md w-full text-center",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(pt,{className:"w-8 h-8 text-red-600 dark:text-red-400"})}),l.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Something went wrong"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"The application encountered an unexpected error. Please refresh the page to continue."})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("button",{onClick:()=>window.location.reload(),className:"w-full bg-brand-orange text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition-colors",children:l.jsx("span",{children:"Refresh Page"})}),l.jsxs("details",{className:"text-left",children:[l.jsx("summary",{className:"cursor-pointer text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:"Technical Details"}),l.jsx("pre",{className:"mt-2 p-3 bg-gray-100 dark:bg-gray-700 rounded text-xs text-gray-600 dark:text-gray-400 overflow-auto",children:this.state.error?.message})]})]})]})}):this.props.children}}const bb=()=>{const{user:e,logout:t,theme:a,toggleTheme:s,bookings:n,bookingRequests:r,pendingRequestCount:i,isLoading:o,addBookingRequest:c,approveBookingRequest:g,rejectBookingRequest:f,deleteBookingRequest:h,refreshData:m,refreshDataSilent:d}=S.useContext(Yt),p=()=>{localStorage.removeItem("customerName"),localStorage.removeItem("customerEmail"),localStorage.removeItem("customerRememberMe"),localStorage.removeItem("customerLastLoginTime"),localStorage.removeItem("customerSelectedSystem"),localStorage.setItem("customerLogout","true"),setTimeout(()=>{localStorage.removeItem("customerLogout")},1e3),Q(!1),t()},D=H=>{M(H),Q(!1),localStorage.setItem("customerSelectedSystem",H),b("dashboard")},[T,b]=S.useState("dashboard"),[u,y]=S.useState({});S.useEffect(()=>{if(e)if(e.role===he.CUSTOMER){const H=localStorage.getItem("customerSelectedSystem");H&&(H==="ground"||H==="net")?(M(H),Q(!1),b("dashboard")):Q(!0)}else b("dashboard")},[e]);const[k,M]=S.useState("ground"),[L,z]=S.useState(!1),[G,V]=S.useState("animate-fadeIn"),[$,te]=S.useState("landing"),[X,Q]=S.useState(!1),[Y,W]=S.useState(null),[U,K]=S.useState("/manifest.json"),[N,A]=S.useState(!1),[x,j]=S.useState(null),[E,_]=S.useState(!1),w=async H=>{T!==H&&(z(!0),E&&T&&(B(T),Z(T)),y(ae=>({...ae,[H]:!0})),setTimeout(()=>{b(H),z(!1),E&&(B(H),Z(H))},150),e&&(e.role===he.ADMIN||e.role===he.MANAGEMENT)?setTimeout(()=>{d().then(()=>{y(ae=>({...ae,[H]:!1}))}).catch(ae=>{y(ee=>({...ee,[H]:!1}))})},200):setTimeout(()=>{y(ae=>({...ae,[H]:!1}))},300))};S.useEffect(()=>{const H=()=>{_(window.innerWidth<=768||"ontouchstart"in window||navigator.maxTouchPoints>0)};return H(),window.addEventListener("resize",H),()=>window.removeEventListener("resize",H)},[]);const{navigationState:v,showExitDialog:C,exitDialogType:R,addToHistory:B,updateBrowserHistory:Z,confirmExit:P,cancelExit:ne,triggerExit:be}=ib({onExit:async()=>{const ae=(()=>{const ee=window.matchMedia("(display-mode: standalone)").matches,de=window.matchMedia("(display-mode: window-standalone)").matches,ve=window.navigator.standalone===!0,Ot=!!window.twaExitApp,os=!!window.ReactNativeWebView,cs=window!==window.top||window.navigator.userAgent.includes("WebView");return{isStandalone:ee||de||ve,isTWA:Ot,isReactNative:os,isWebView:cs,displayMode:ve?"ios-standalone":ee?"android-standalone":de?"window-standalone":"browser"}})();try{if("serviceWorker"in navigator&&ae.isStandalone)try{const ee=await navigator.serviceWorker.ready;if(ee?.active&&(console.log(" Sending exit command to service worker..."),ee.active.postMessage({type:"EXIT_APP",timestamp:Date.now(),url:window.location.href,pwaContext:ae}),await new Promise(de=>setTimeout(de,300)),window.closed))return}catch{}if(ae.isTWA)try{window.twaExitApp();return}catch{}if(ae.isReactNative)try{window.ReactNativeWebView.postMessage(JSON.stringify({type:"EXIT_APP",timestamp:Date.now(),source:"pwa-exit-handler"}));return}catch{}if(ae.displayMode==="ios-standalone"){const ee=[()=>window.close(),()=>window.webkit?.messageHandlers?.close?.postMessage?.("close"),()=>{window.location.href="about:blank",setTimeout(()=>window.close(),100)},()=>{window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.close.postMessage("close")}];for(let de=0;de<ee.length;de++)try{if(ee[de](),await new Promise(ve=>setTimeout(ve,200)),window.closed)return}catch{}}if(ae.displayMode==="android-standalone"){const ee=[()=>window.close(),()=>{confirm("Close app?")&&window.close()},()=>{window.blur(),window.close()},()=>{window.Android?window.Android.closeApp?.():window.close()}];for(let de=0;de<ee.length;de++)try{if(ee[de](),await new Promise(ve=>setTimeout(ve,150)),window.closed)return}catch{}}if(ae.displayMode==="window-standalone"){const ee=[()=>window.close(),()=>{window.open("","_self")?.close(),window.close()},()=>{window.location.replace("about:blank"),setTimeout(()=>window.close(),50)}];for(let de=0;de<ee.length;de++)try{if(ee[de](),await new Promise(ve=>setTimeout(ve,100)),window.closed)return}catch{}}if(ae.isWebView){const ee=[()=>window.close(),()=>{window.parent&&window.parent!==window&&window.parent.postMessage("CLOSE_APP","*")},()=>{window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.close?.postMessage?.("close")}];for(let de=0;de<ee.length;de++)try{if(ee[de](),await new Promise(ve=>setTimeout(ve,100)),window.closed)return}catch{}}try{window.blur(),window.location.href="about:blank",setTimeout(()=>{try{window.close()}catch{}},100)}catch{window.location.href="about:blank"}}catch{window.location.href="about:blank"}},onNavigateBack:H=>{b(H)},isMobile:E});S.useEffect(()=>{E&&e&&T&&(B(T),Z(T))},[E,e,T,B,Z]),S.useEffect(()=>{const H=ee=>{const{type:de}=ee.detail||{};switch(de){case"booking_request":(e?.role==="admin"||e?.role==="management")&&w("bookings");break;case"booking_approval":case"booking_rejection":e?.role==="customer"&&w("bookings");break}},ae=["navigateToBookings","navigateToBookingsTracker"];return ae.forEach(ee=>{window.addEventListener(ee,H)}),()=>{ae.forEach(ee=>{window.removeEventListener(ee,H)})}},[e]);const ie=async()=>{try{if(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0||window.matchMedia("(display-mode: window-standalone)").matches)return A(!0),!0;if("getInstalledRelatedApps"in window.navigator)try{if((await window.navigator.getInstalledRelatedApps()).some(Ot=>Ot.id==="hhs-booking-system"||Ot.url?.includes("hhs")||Ot.name?.includes("HHS")))return A(!0),!0}catch{}const ae=localStorage.getItem("pwa-installed-date"),ee=localStorage.getItem("pwa-installed-version");if(ae&&ee){const de=new Date(ae).getTime();if((Date.now()-de)/(1e3*60*60*24)<30)return A(!0),!0}return sessionStorage.getItem("pwa-installed")==="true"?(A(!0),!0):(A(!1),!1)}catch{return A(!1),!1}};S.useEffect(()=>{e?.role==="customer"?K("/manifest-customer.json"):K("/manifest.json"),ie();const H=window.matchMedia("(display-mode: standalone)"),ae=()=>ie();H.addEventListener("change",ae);const ee=tt=>{N||(tt.preventDefault(),W(tt))};window.addEventListener("beforeinstallprompt",ee);const de=tt=>{},ve=tt=>{},Ot=()=>{document.hidden},os=()=>{},cs=history.pushState,Cc=history.replaceState;history.pushState=function(...tt){return cs.apply(history,tt)},history.replaceState=function(...tt){return Cc.apply(history,tt)},window.addEventListener("beforeunload",de),window.addEventListener("pagehide",ve),window.addEventListener("visibilitychange",Ot),window.addEventListener("unload",os);const Mc=()=>{};window.addEventListener("popstate",Mc);const vg=async()=>{if("serviceWorker"in navigator)try{const tt=await navigator.serviceWorker.register("/service-worker.js",{scope:"/",updateViaCache:"none"});tt.active&&tt.active.postMessage({type:"SUPABASE_CREDENTIALS",supabaseUrl:"https://ghqczwgnycewbcrwtiaz.supabase.co",supabaseKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdocWN6d2dueWNld2Jjcnd0aWF6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg1MTk5NTAsImV4cCI6MjA3NDA5NTk1MH0.X6WqnEfHGWgASB2B0nvbHsGzBsyEkCZAYPCGCJKYcvU"}),navigator.serviceWorker.addEventListener("message",jg=>{const{type:Ng,data:kg,url:Tr}=jg.data||{};switch(Ng){case"NOTIFICATION_CLICK":wg(kg);break;case"NAVIGATE":Tr&&Tr!==window.location.pathname&&(window.history.pushState(null,"",Tr),window.location.reload());break;case"APP_EXIT":try{window.close(),setTimeout(()=>{if(!window.closed){window.blur();try{window.location.href="about:blank",setTimeout(()=>{window.closed||window.close()},50)}catch{}}},100)}catch{}break;case"FORCE_CLOSE":try{window.blur(),window.close(),setTimeout(()=>{window.closed||(window.location.replace("about:blank"),setTimeout(()=>window.close(),10))},10)}catch{window.location.href="about:blank"}break;case"SW_UPDATE_READY":confirm("App update available! Click OK to refresh.")&&window.location.reload();break;case"PWA_INSTALLED":A(!0),localStorage.setItem("pwa-installed-date",new Date().toISOString()),localStorage.setItem("pwa-installed-version","1.0.0"),sessionStorage.setItem("pwa-installed","true");break;default:}})}catch{}},wg=tt=>{if(tt?.type)switch(tt.type){case"booking_request":(e?.role==="admin"||e?.role==="management")&&w("bookings");break;case"booking_approval":case"booking_rejection":e?.role==="customer"&&w("bookings");break;case"new_booking":(e?.role==="admin"||e?.role==="management")&&w("bookings");break}};return vg(),()=>{window.removeEventListener("beforeinstallprompt",ee),window.removeEventListener("beforeunload",de),window.removeEventListener("pagehide",ve),window.removeEventListener("visibilitychange",Ot),window.removeEventListener("unload",os),window.removeEventListener("popstate",Mc),history.pushState=cs,history.replaceState=Cc}},[]);const Ue=async()=>{if(Y)try{Y.prompt();const{outcome:H}=await Y.userChoice;H==="accepted"&&(A(!0),localStorage.setItem("pwa-installed-date",new Date().toISOString()),localStorage.setItem("pwa-installed-version","1.0.0"),sessionStorage.setItem("pwa-installed","true"),W(null))}catch{}};S.useEffect(()=>{const H=document.querySelector('link[rel="manifest"]');H&&H.setAttribute("href",U)},[U,e?.role]);const[Te,jt]=S.useState({isOpen:!1,date:null,booking:null}),[q,J]=S.useState({isOpen:!1,date:null}),[F,se]=S.useState(!1),ue=(H,ae=null)=>{jt({isOpen:!0,date:H,booking:ae})},$e=()=>jt({isOpen:!1,date:null,booking:null}),Xe=(H,ae,ee)=>{J({isOpen:!0,date:H,booking:ae}),M(ee)},Vt=()=>J({isOpen:!1,date:null,booking:void 0}),Ar=async H=>{try{return await c({...H,status:I.PENDING,created_at:new Date().toISOString()})}catch(ae){throw alert("Failed to submit booking request. Please try again."),ae}},[mg,Sc]=S.useState(!1),gg=()=>{Sc(!0)},fg=()=>{Sc(!1)};if(!e)switch($){case"landing":return l.jsx(rd,{onCustomerLogin:()=>te("customer"),onAdminLogin:()=>te("admin")});case"customer":return l.jsx(Rx,{onBack:()=>te("landing")});case"admin":return l.jsx(Mx,{isManagementPortal:!0});default:return l.jsx(rd,{onCustomerLogin:()=>te("customer"),onAdminLogin:()=>te("admin")})}if(e&&e.role===he.CUSTOMER&&X)return l.jsx(ab,{onSelectSystem:D,customerName:e.name});if(o)return l.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center p-4",children:l.jsx("div",{className:"w-full max-w-4xl mx-auto",children:l.jsx("video",{src:"/intro.mp4",autoPlay:!0,muted:!0,loop:!0,playsInline:!0,className:"w-full h-auto max-h-screen object-contain rounded-lg",style:{maxHeight:"80vh",width:"100%",objectFit:"contain"},children:"Your browser does not support the video tag."})})});const hg=H=>{const ae=["ground","net"],ee=ae.indexOf(k),de=ae.indexOf(H);ee!==de&&(de>ee?V("animate-slideInFromRight"):V("animate-slideInFromLeft"),M(H))},_c=()=>{const H=new Date,ae=new Date(H.getFullYear(),H.getMonth(),1),ee=new Date(H.getFullYear(),H.getMonth()+1,0),de=ve=>{const Ot=ve.getFullYear(),os=(ve.getMonth()+1).toString().padStart(2,"0"),cs=ve.getDate().toString().padStart(2,"0");return`${Ot}-${os}-${cs}`};j({start:de(ae),end:de(ee)}),w("bookings")},Ec=()=>{j(null),w("customers")},Ha=e?(H=>[{view:"dashboard",label:H==="customer"?"Home":"Dashboard",icon:zr},{view:"calendar",label:"Calendar",icon:it},{view:"bookings",label:H==="customer"?"Track Bookings":"Bookings",icon:Rr},{view:"customers",label:"Customers",icon:hn}])(e.role):[{view:"dashboard",label:"Dashboard",icon:zr},{view:"calendar",label:"Calendar",icon:it},{view:"bookings",label:"Bookings",icon:Rr},{view:"customers",label:"Customers",icon:hn}],xg=e?(H=>{switch(H){case"admin":return Ha.slice(0,5);case"management":return Ha.slice(0,3);case"customer":return[Ha[1],Ha[2]];default:return Ha.slice(0,3)}})(e.role):Ha.slice(0,3),Dc=e?(H=>{const ae=[{view:"dashboard",label:H==="customer"?"Home":"Dashboard",icon:zr},{view:"calendar",label:"Calendar",icon:it},{view:"bookings",label:H==="customer"?"Track Bookings":"Bookings",icon:Rr},{view:"customers",label:"Customers",icon:hn}];return H==="customer"?[ae[1],ae[2]]:H==="management"?ae.slice(0,3):ae})(e.role):Ha.slice(0,3),bg=({view:H,label:ae,icon:ee})=>l.jsxs("button",{onClick:()=>w(H),className:`group w-full flex items-center justify-center space-x-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-300 touch-manipulation transform hover:scale-105 relative overflow-hidden ${T===H?"bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg":"text-gray-600 dark:text-gray-400 hover:bg-white/50 dark:hover:bg-gray-700/50 hover:text-gray-800 dark:hover:text-white"}`,style:{background:T===H?"linear-gradient(45deg, #f26a36, #dc2626, #f26a36)":void 0,backgroundSize:T===H?"200% 100%":void 0,animation:T===H?"gradientShift 3s ease infinite":void 0},children:[T===H&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-orange-400/20 to-red-400/20 animate-pulse"}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent animate-shimmer"})]}),l.jsxs("div",{className:`p-2 rounded-lg transition-all duration-300 flex-shrink-0 flex items-center justify-center relative ${T===H?"bg-white/20 shadow-lg":"bg-gray-100 dark:bg-gray-700 group-hover:bg-orange-100 dark:group-hover:bg-orange-900/30"}`,children:[l.jsx(ee,{size:18,className:`transition-all duration-300 ${T===H?"scale-110":"group-hover:scale-105"}`}),T===H&&l.jsx("div",{className:"absolute inset-0 rounded-lg bg-orange-300/30 blur-sm animate-ping"})]}),l.jsx("span",{className:`truncate flex-1 text-left transition-all duration-300 ${T===H?"font-bold":"group-hover:font-semibold"}`,children:ae}),H==="bookings"&&i>0&&(e?.role==="admin"||e?.role==="management")&&l.jsx("div",{className:"bg-red-500 text-white text-xs font-bold px-1.5 py-0.5 rounded-full min-w-[20px] h-5 flex items-center justify-center flex-shrink-0 shadow-lg border-2 border-white","aria-label":`${i} pending requests`,children:i}),l.jsx("div",{className:`absolute inset-0 rounded-xl transition-opacity duration-300 ${T===H?"opacity-0":"opacity-0 group-hover:opacity-100"} bg-gradient-to-r from-orange-500/5 to-red-500/5`})]}),yg=({view:H,label:ae,icon:ee})=>l.jsxs("button",{onClick:()=>w(H),className:`group flex flex-col items-center justify-center w-full h-full text-xs transition-all duration-300 touch-manipulation py-2 relative transform active:scale-95 ${T===H?"text-orange-500":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"}`,children:[l.jsxs("div",{className:`p-2 sm:p-2.5 rounded-xl transition-all duration-300 flex-shrink-0 flex items-center justify-center relative ${T===H?"bg-gradient-to-br from-orange-100 to-orange-200 dark:from-orange-900/30 dark:to-orange-800/40 shadow-lg":"bg-gray-100 dark:bg-gray-700 group-hover:bg-gradient-to-br group-hover:from-orange-50 group-hover:to-orange-100 dark:group-hover:from-orange-900/20 dark:group-hover:to-orange-800/30"}`,children:[l.jsx(ee,{size:20,className:`sm:w-[22px] sm:h-[22px] transition-all duration-300 ${T===H?"scale-105":"group-hover:scale-105 group-active:scale-95"}`}),l.jsx("div",{className:`absolute inset-0 rounded-xl transition-opacity duration-300 ${T===H?"opacity-0":"opacity-0 group-active:opacity-50"} bg-orange-100/30 dark:bg-orange-900/30`})]}),l.jsx("span",{className:`text-xs leading-tight font-medium mt-1 text-center transition-all duration-300 ${T===H?"font-bold":"group-hover:font-semibold"}`,children:ae}),H==="bookings"&&i>0&&(e?.role==="admin"||e?.role==="management")&&l.jsx("div",{className:"absolute -top-1 -right-1 bg-gradient-to-r from-red-500 to-red-600 text-white text-xs font-bold px-1.5 py-0.5 rounded-full min-w-[18px] h-4 flex items-center justify-center z-10 shadow-lg border-2 border-white","aria-label":`${i} pending requests`,children:i}),l.jsx("div",{className:`absolute bottom-0 left-1/2 transform -translate-x-1/2 w-8 h-0.5 bg-orange-500 rounded-full transition-all duration-300 ${T===H?"opacity-100 scale-100":"opacity-0 scale-0"}`})]}),pg=()=>{const H=n[k],ae=u[T]||!1,ee=()=>l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"h-8 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 dark:from-gray-700 dark:via-gray-600 dark:to-gray-700 rounded w-1/3 animate-pulse"}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-shimmer rounded"})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3].map((de,ve)=>l.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-100 dark:border-gray-700 relative overflow-hidden",style:{animationDelay:`${ve*.2}s`},children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-50/50 via-transparent to-gray-50/50 dark:from-gray-800/50 dark:to-gray-700/50 animate-pulse"}),l.jsxs("div",{className:"relative z-10",children:[l.jsx("div",{className:"h-4 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 dark:from-gray-700 dark:via-gray-600 dark:to-gray-700 rounded w-3/4 mb-3 animate-pulse",style:{animationDelay:`${ve*.2+.1}s`}}),l.jsx("div",{className:"h-3 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 dark:from-gray-700 dark:via-gray-600 dark:to-gray-700 rounded w-1/2 mb-2 animate-pulse",style:{animationDelay:`${ve*.2+.2}s`}}),l.jsx("div",{className:"h-3 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 dark:from-gray-700 dark:via-gray-600 dark:to-gray-700 rounded w-2/3 animate-pulse",style:{animationDelay:`${ve*.2+.3}s`}}),l.jsxs("div",{className:"mt-4 flex items-center space-x-3",children:[l.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-orange-200 to-red-200 dark:from-orange-800 dark:to-red-800 rounded-full animate-pulse flex items-center justify-center",children:l.jsx("div",{className:"w-3 h-3 bg-white/60 rounded-full animate-spin-slow"})}),l.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/3 animate-pulse"})]})]}),l.jsx("div",{className:"absolute top-2 right-2 w-2 h-2 bg-orange-300/60 rounded-full animate-bounce",style:{animationDelay:`${ve*.3}s`}}),l.jsx("div",{className:"absolute bottom-3 left-3 w-1.5 h-1.5 bg-blue-300/60 rounded-full animate-pulse",style:{animationDelay:`${ve*.3+.5}s`}})]},de))}),l.jsxs("div",{className:"flex justify-center items-center space-x-4 py-8",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"w-12 h-12 border-4 border-orange-200 dark:border-orange-800 rounded-full animate-spin"}),l.jsx("div",{className:"absolute inset-0 w-12 h-12 border-4 border-transparent border-t-orange-500 rounded-full animate-spin",style:{animationDirection:"reverse"}}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-bounce"})})]}),l.jsx("div",{className:"text-gray-600 dark:text-gray-400 font-medium animate-pulse",children:"Loading cricket facilities..."})]})]});switch(T){case"dashboard":return e?.role==="customer"?l.jsxs("div",{className:"text-center py-12 relative",children:[l.jsx("h2",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl xl:text-4xl font-bold text-gray-800 dark:text-gray-200 mb-4",children:"Welcome to Harvard House Sports"}),l.jsx(ub,{system:k}),l.jsxs("div",{className:"relative inline-block mt-8",children:[l.jsx("div",{className:"absolute inset-0 rounded-full animate-ping bg-gradient-to-r from-orange-400 via-red-400 to-pink-400 opacity-20 blur-xl"}),l.jsx("div",{className:"absolute inset-0 rounded-full animate-pulse bg-gradient-to-r from-blue-400 via-purple-400 to-orange-400 opacity-30 blur-lg delay-500"}),l.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-orange-500 via-red-500 to-pink-500 opacity-40 blur-md animate-pulse delay-1000"}),l.jsxs("button",{onClick:()=>{w("calendar")},className:"group relative bg-gradient-to-r from-orange-500 via-red-500 to-pink-500 text-white font-bold text-lg px-8 py-4 rounded-full shadow-2xl transform transition-all duration-300 hover:scale-105 hover:shadow-3xl focus:outline-none focus:ring-4 focus:ring-orange-300/50 active:scale-95 border-2 border-white/20",children:[l.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-orange-400 to-red-400 opacity-30 blur-sm group-hover:opacity-50 transition-opacity duration-300"}),l.jsxs("div",{className:"absolute inset-0 opacity-30",children:[l.jsx("div",{className:"absolute top-2 left-4 w-1 h-1 bg-white rounded-full animate-ping"}),l.jsx("div",{className:"absolute top-4 right-6 w-0.5 h-0.5 bg-yellow-300 rounded-full animate-pulse delay-300"}),l.jsx("div",{className:"absolute bottom-3 left-8 w-1 h-1 bg-pink-300 rounded-full animate-pulse delay-700"}),l.jsx("div",{className:"absolute bottom-2 right-4 w-0.5 h-0.5 bg-blue-300 rounded-full animate-pulse delay-1000"})]}),l.jsxs("div",{className:"relative flex items-center justify-center space-x-3",children:[l.jsx("div",{className:"p-2 bg-white/20 rounded-full group-hover:bg-white/30 transition-all duration-300 transform group-hover:scale-110 group-hover:rotate-12",children:l.jsx(it,{className:"w-6 h-6 group-hover:scale-105"})}),l.jsx("span",{className:"text-xl font-bold transform group-hover:scale-105 transition-transform duration-300",children:"Book Now"}),l.jsx("div",{className:"absolute -top-2 -right-2 w-3 h-3 bg-yellow-300/30 rounded-full opacity-60"}),l.jsx("div",{className:"absolute -bottom-2 -left-2 w-2 h-2 bg-blue-300/30 rounded-full opacity-50"}),l.jsx("div",{className:"absolute top-1 -right-4 w-1.5 h-1.5 bg-pink-300/30 rounded-full opacity-50"})]}),l.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-white/0 via-white/10 to-white/0 opacity-0 group-hover:opacity-100 transition-opacity duration-300 animate-shimmer"})]}),l.jsx("div",{className:"absolute inset-x-0 -bottom-4 h-4 bg-gradient-to-t from-white/10 to-transparent rounded-full blur-sm opacity-50"})]}),l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-8",children:"Click the button above to start booking instantly"})]}):ae?ee():l.jsx(od,{bookings:H,openModal:ue,onBookingsCardClick:_c,onRevenueCardClick:Ec});case"calendar":return e?.role==="customer"?ae?ee():l.jsx(Gx,{bookings:H,bookingRequests:r[k],system:k,onBookingRequest:Ar}):ae?ee():l.jsx(Hx,{bookings:H,bookingRequests:r[k],openModal:ue,system:k,onApproveRequest:g,onRejectRequest:f,onManageSpecialDates:gg});case"bookings":return e?.role==="customer"?ae?ee():l.jsx(tb,{}):ae?ee():l.jsx(Xx,{bookings:H,bookingRequests:r[k],openModal:ue,initialDateFilter:x,clearInitialFilter:()=>j(null),onApproveRequest:g,onRejectRequest:f,onDeleteRequest:h,onEditRequest:Xe,onDataRefresh:()=>d(),system:k});case"customers":return e?.role==="customer"?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-200 mb-4",children:"Access Restricted"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"You don't have permission to access this page."})]}):ae?ee():l.jsx(Kx,{bookings:H});default:return e?.role==="customer"?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-200 mb-4",children:"Welcome to Harvard House Sports"}),l.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Please use the calendar to check availability. Contact management directly for booking inquiries."})]}):l.jsx(od,{bookings:H,openModal:ue,onBookingsCardClick:_c,onRevenueCardClick:Ec})}};return l.jsxs(xb,{children:[l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-gray-50 to-blue-50 dark:from-gray-900 dark:via-slate-900 dark:to-gray-900 font-sans animate-fadeIn",children:[l.jsxs("aside",{className:"w-60 lg:w-64 bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm shadow-xl border-r border-gray-200/50 dark:border-gray-700/50 hidden lg:flex flex-col fixed h-full z-20 animate-slideInLeft",children:[l.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("img",{src:"logo.png",alt:"Logo",className:"h-12 w-12"}),l.jsxs("div",{children:[l.jsx("h2",{className:"font-bold text-gray-800 dark:text-white text-sm",children:"HHS Sports"}),l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Management"})]})]})}),l.jsx("nav",{className:"flex-grow p-3 sm:p-4",children:l.jsx("ul",{className:"space-y-1 sm:space-y-2",children:xg.map(H=>l.jsx("li",{children:l.jsx(bg,{...H})},H.view))})})]}),l.jsxs("div",{className:"flex-1 flex flex-col md:ml-64 min-h-screen",children:[l.jsx("header",{className:"bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm sticky top-0 z-10 border-b border-gray-200/50 dark:border-gray-700/50 shadow-sm animate-slideInUp",children:l.jsx("div",{className:"container mx-auto px-3 sm:px-4 lg:px-6",children:l.jsxs("div",{className:"flex items-center justify-between h-16 sm:h-18 md:h-20",children:[l.jsx("div",{className:"flex items-center min-w-0 flex-1",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("img",{src:"logo.png",alt:"Harvard House Sports Logo",className:"h-10 w-10 sm:h-12 sm:w-12 md:h-14 md:w-14 mr-2 sm:mr-3"}),l.jsxs("div",{className:"ml-1 sm:ml-2 md:ml-3 min-w-0",children:[l.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl xl:text-4xl 2xl:text-5xl font-display font-bold text-gray-800 dark:text-white leading-tight truncate",children:"Harvard House Sports"}),l.jsx("div",{className:"flex flex-col",children:l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e?.role==="customer"?"Customer Portal":"Booking Management System"})})]})]})}),l.jsxs("div",{className:"flex items-center space-x-0.5 sm:space-x-0.5 md:space-x-1",children:[Object.values(u).some(H=>H)&&l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),l.jsx("div",{className:"absolute inset-0 w-2 h-2 bg-blue-400 rounded-full animate-ping opacity-75"})]}),l.jsx("button",{onClick:s,className:"group p-2 sm:p-2 md:p-2.5 rounded-xl text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-300 touch-manipulation transform hover:scale-110 flex items-center justify-center min-w-[44px] min-h-[44px] relative overflow-hidden",children:l.jsxs("div",{className:"flex items-center justify-center relative",children:[a==="light"?l.jsx(Vg,{size:20}):l.jsx(Qg,{size:20}),l.jsx("div",{className:`absolute inset-0 transition-opacity duration-300 ${a==="light"?"opacity-0":"opacity-100"}`})]})}),l.jsxs("div",{className:"flex flex-col items-center justify-center",children:[l.jsxs("button",{onClick:p,className:"group p-2 sm:p-2 md:p-2.5 rounded-xl text-gray-600 dark:text-gray-300 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all duration-300 touch-manipulation transform hover:scale-110 flex items-center justify-center min-w-[44px] min-h-[44px] relative overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-center relative",children:[l.jsx(fd,{size:20}),l.jsxs("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[l.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-red-400 rounded-full animate-ping"}),l.jsx("div",{className:"absolute -bottom-1 -left-1 w-1.5 h-1.5 bg-orange-400 rounded-full animate-pulse delay-200"})]})]}),l.jsx("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-r from-red-500/10 to-orange-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),e&&l.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5 text-center leading-tight font-medium",children:e.name.substring(0,4)})]})]})]})})}),l.jsxs("main",{className:"flex-1 container mx-auto p-3 sm:p-4 lg:p-6",children:[e&&(e.role===he.ADMIN||e.role===he.MANAGEMENT)&&l.jsxs("div",{className:"relative flex justify-center mb-6 sm:mb-8",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-orange-500/5 via-transparent to-blue-500/5 rounded-3xl blur-xl"}),l.jsx("div",{className:"relative flex space-x-2 sm:space-x-3",children:l.jsx(hb,{activeSystem:k,onSystemChange:hg})})]}),e&&e.role===he.CUSTOMER&&l.jsx("div",{className:"flex justify-center mb-3 sm:mb-4",children:l.jsx("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-lg rounded-2xl px-6 py-3 shadow-lg border border-gray-200/50 dark:border-gray-700/50",children:l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:`p-2 rounded-lg flex items-center justify-center ${k==="ground"?"bg-gradient-to-br from-orange-500 to-red-500 text-white":"bg-gradient-to-br from-blue-500 to-indigo-500 text-white"}`,children:k==="ground"?l.jsx(Nc,{className:"w-5 h-5"}):l.jsx(kc,{className:"w-5 h-5"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Current System"}),l.jsx("p",{className:"font-bold text-gray-800 dark:text-white",children:k==="ground"?"Ground Booking":"Indoor Net Booking"})]}),l.jsx("button",{onClick:()=>{localStorage.removeItem("customerSelectedSystem"),Q(!0)},className:"ml-4 px-3 py-1.5 text-xs font-medium text-orange-600 dark:text-orange-400 bg-orange-50 dark:bg-orange-900/20 rounded-lg hover:bg-orange-100 dark:hover:bg-orange-900/30 transition-colors duration-200 border border-orange-200 dark:border-orange-800 flex items-center justify-center",children:"Switch System"})]})})}),l.jsx("div",{className:`relative ${L?"animate-fadeOut":""}`,children:l.jsx("div",{className:`${G} ${T==="dashboard"?"animate-fadeIn":""}`,children:l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"animate-fadeInUp",children:pg()}),T==="dashboard"&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed top-1/4 right-4 w-2 h-2 bg-orange-400/30 rounded-full animate-pulse delay-1000 hidden lg:block"}),l.jsx("div",{className:"fixed top-1/3 right-8 w-1.5 h-1.5 bg-red-400/30 rounded-full animate-bounce delay-1500 hidden lg:block"}),l.jsx("div",{className:"fixed bottom-1/4 left-4 w-1 h-1 bg-blue-400/30 rounded-full animate-pulse delay-2000 hidden lg:block"})]})]})},k)})]}),e&&Dc.length>0&&l.jsx("footer",{className:"sticky bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200/50 dark:border-gray-700/50 z-40 lg:hidden shadow-2xl pb-safe",children:l.jsxs("nav",{className:"flex justify-around h-16 sm:h-18 md:h-20",children:[Dc.map(H=>l.jsx(yg,{...H},H.view)),E&&l.jsxs("button",{onClick:be,className:"group flex flex-col items-center justify-center w-full h-full text-xs transition-all duration-300 touch-manipulation py-2 relative transform active:scale-95 text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 overflow-hidden","aria-label":"Exit App",children:[l.jsxs("div",{className:"p-2 sm:p-2.5 rounded-xl transition-all duration-300 flex-shrink-0 bg-red-50 dark:bg-red-900/20 group-hover:bg-red-100 dark:group-hover:bg-red-900/30 flex items-center justify-center relative",children:[l.jsx(Xg,{size:20,className:"sm:w-[22px] sm:h-[22px] group-hover:animate-pulse"}),l.jsxs("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[l.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-red-400 rounded-full animate-ping"}),l.jsx("div",{className:"absolute -bottom-1 -left-1 w-1.5 h-1.5 bg-orange-400 rounded-full animate-pulse delay-200"})]}),l.jsx("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-r from-red-500/10 to-orange-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 animate-pulse"})]}),l.jsx("span",{className:"text-xs leading-tight font-medium mt-1 text-center group-hover:font-bold transition-all duration-300",children:"Exit"}),l.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-6 h-0.5 bg-red-500 rounded-full opacity-0 group-hover:opacity-100 transition-all duration-300"}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-red-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-lg"})]})]})})]})]}),l.jsx(sb,{deferredPrompt:Y,onInstallClick:Ue,userRole:e?.role,isInstalled:N}),l.jsx(Jx,{isOpen:Te.isOpen,onClose:$e,date:Te.date,booking:Te.booking,system:k,onBookingUpdate:d}),e?.role==="admin"&&l.jsx(Fx,{isOpen:q.isOpen,onClose:Vt,date:q.date,system:k,onSubmitRequest:Ar,userRole:e.role,onBookingUpdate:d,booking:q.booking}),e?.role==="customer"&&l.jsx(Ix,{isOpen:q.isOpen,onClose:Vt,date:q.date,system:k,onSubmitRequest:Ar,user:e,bookings:n[k],onBookingUpdate:d}),E&&l.jsx(lb,{isOpen:C,onConfirm:P,onCancel:ne,canGoBack:v.canGoBack,exitType:R}),l.jsx(nb,{isOpen:F,onClose:()=>se(!1),user:e}),e?.role==="admin"&&l.jsx(rb,{isOpen:mg,onClose:fg})]})},yb=()=>l.jsx(bb,{}),dg=document.getElementById("root");if(!dg)throw new Error("Could not find root element to mount to");const pb=_x.createRoot(dg);pb.render(l.jsx(hd.StrictMode,{children:l.jsx(Cx,{children:l.jsx(yb,{})})}));
